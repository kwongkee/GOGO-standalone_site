<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>独立站平台 - website.gogo198.net</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="layui/css/layui.css">
    <style>
        :root {--primary: #8B5FBF;--primary-light: #9B7BC6;--primary-dark: #6A4A9C;--accent: #F0E6FF;--background: #f8f9fa;--card-bg: #ffffff;--text: #333333;--text-light: #666666;--shadow: 0 5px 15px rgba(0, 0, 0, 0.08);--shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.12);--gradient: linear-gradient(135deg, #8B5FBF 0%, #6A4A9C 100%);--border-radius: 12px;}

        * {margin: 0;padding: 0;box-sizing: border-box;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
        .action-buttons {display: flex;justify-content:end;gap: 15px;}
        .btn {padding: 10px 20px;border-radius: 50px;font-weight: 600;cursor: pointer;transition: all 0.3s ease;display: flex;align-items: center;gap: 8px;border: none;}
        .btn-primary {background: var(--gradient);color: white;}
        .btn-primary:hover {transform: translateY(-3px);box-shadow: var(--shadow-hover);}
        .btn-outline {background: transparent;color: var(--primary);border: 2px solid var(--primary-light);}
        .btn-outline:hover {background: var(--primary-light);color: white;}
        /* 表单样式 */
        .form-container {max-width: 800px;}
        .form-group {margin-bottom: 20px;}
        .form-label {display: block;margin-bottom: 8px;font-weight: 600;color: var(--primary-dark);}
        .form-control {width: 100%;padding: 15px;border: 2px solid #e0e0e0;border-radius: 10px;font-size: 1rem;transition: border-color 0.3s ease;}
        .form-control:focus {border-color: var(--primary);outline: none;}
        .form-row {display: grid;grid-template-columns: repeat(2, 1fr);gap: 20px;}

        .content-header {display: flex;justify-content: space-between;align-items: center;margin-bottom: 25px;padding-bottom: 15px;border-bottom: 1px solid #eee;}
        .content-title {font-size: 1.5rem;color: var(--primary-dark);}

        .layui-form-label{width:100px;}
        .layui-colorpicker-trigger-span{line-height: 24px;}
        .layui-btn-container{display: flex;}
    </style>
</head>
<body>
    <form class="layui-form" action="" lay-filter="component-form-group">
        <input type="hidden" name="company_id" value="{$company_id}">
        <input type="hidden" name="company_type" value="{$company_type}">

        <div class="content-header">
            <h2 class="content-title">店铺信息配置</h2>
    <!--        <div class="action-buttons">-->
    <!--            <button class="btn btn-primary" lay-submit lay-filter="formDemo">-->
    <!--                <i class="fas fa-save"></i> 保存更改-->
    <!--            </button>-->
    <!--        </div>-->
        </div>

        <div class="form-container">
            <div class="layui-form-item">
                <label class="layui-form-label">网站图标(像素：200*200)</label>
                <div class="layui-input-block">
                    <div class="layui-upload" style="margin-top: 10px;">
                        <button type="button" class="layui-btn" id="slogo_file-upload">上传图片(1张)</button>
                        <blockquote class="layui-elem-quote layui-quote-nm yulan" style="margin-top: 10px;">
                            预览图：
                            <div class="layui-upload-list" id="slogo_file-upload-list">
                                {if !empty($data['slogo'])}
                                <div style="display: inline-block;">
                                    <img onclick="seePic(this);" src="{$data['slogo']}" class="layui-upload-img" style="width:80px;height:80px;" alt="网站图标图片">
                                    <button type="button" onclick="delPic(this);" class="layui-btn layui-btn-xs layui-btn-danger" style="position: relative;left: -45px;top: -39px;">删除</button>
                                    <input type="hidden" name="slogo_file[]" value="{$data['slogo']}">
                                </div>
                                {/if}
                            </div>
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">网站标志(像素：155*65)</label>
                <div class="layui-input-block">
                    <div class="layui-upload" style="margin-top: 10px;">
                        <button type="button" class="layui-btn" id="logo_file-upload">上传图片(1张)</button>
                        <blockquote class="layui-elem-quote layui-quote-nm yulan" style="margin-top: 10px;">
                            预览图：
                            <div class="layui-upload-list" id="logo_file-upload-list">
                                {if !empty($data['logo'])}
                                <div style="display: inline-block;">
                                    <img onclick="seePic(this);" src="{$data['logo']}" class="layui-upload-img" style="width:80px;height:80px;" alt="网站logo图片">
                                    <button type="button" onclick="delPic(this);" class="layui-btn layui-btn-xs layui-btn-danger" style="position: relative;left: -45px;top: -39px;">删除</button>
                                    <input type="hidden" name="logo_file[]" value="{$data['logo']}">
                                </div>
                                {/if}
                            </div>
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">网站名称</label>
                <div class="layui-input-block">
                    <input type="text" name="name" value="{$data['name']}"  lay-verify="required" placeholder="请输入网站名称" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">网站描述</label>
                <div class="layui-input-block">
                    <input type="text" name="desc" value="{$data['desc']}"  lay-verify="required" placeholder="请输入网站描述" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">网站关键词</label>
                <div class="layui-input-block">
                    <input type="text" name="keywords" value="{$data['keywords']}"  lay-verify="required" placeholder="请输入网站关键词" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-form-label">网站主题色</div>
                <div class="layui-input-block">
                    <div id="color"></div>
                    <input type="hidden" name="color" value="{$data['color']}" lay-verify="required">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-form-label">网站页底色</div>
                <div class="layui-input-block">
                    <div id="color_inner"></div>
                    <input type="hidden" name="color_inner" value="{$data['color_inner']}" lay-verify="required">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-form-label">网站文字色</div>
                <div class="layui-input-block">
                    <div id="color_word"></div>
                    <input type="hidden" name="color_word" value="{$data['color_word']}" lay-verify="required">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-form-label">网站字体</div>
                <div class="layui-input-block">
                    <select name="font_family" id="font_family" lay-search>
                        <option value="Microsoft JhengHei, 微軟正黑體, Arial, sans-serif" {if $data['font_family']=="Microsoft JhengHei, 微軟正黑體, Arial, sans-serif"}selected{/if}>Microsoft JhengHei, 微軟正黑體, Arial, sans-serif</option>
                        <option value='微软雅黑' {if $data['font_family']=='微软雅黑'}selected{/if}>微软雅黑</option>
                        <option value='宋体' {if $data['font_family']=='宋体'}selected{/if}>宋体</option>
                        <option value='仿宋体' {if $data['font_family']=='仿宋体'}selected{/if}>仿宋体</option>
                        <option value='黑体' {if $data['font_family']=='黑体'}selected{/if}>黑体</option>
                        <option value='PingFang SC,microsoft yahei,STHeitiSC-Light,simsun,sans-serif' {if $data['font_family']=='PingFang SC,microsoft yahei,STHeitiSC-Light,simsun,sans-serif'}selected{/if}>PingFang SC,microsoft yahei,STHeitiSC-Light,simsun,sans-serif</option>
                    </select>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" lay-submit lay-filter="formDemo">
                    <i class="fas fa-save"></i> 立即保存
                </button>
            </div>
        </div>
    </form>
</body>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="layui/layui.js"></script>
<script>
    layui.use(['layer','form','laydate','upload','colorpicker'],function() {
        laydate = layui.laydate;
        layer = layui.layer;
        var form = layui.form;
        $ = layui.jquery;
        var upload = layui.upload;
        var colorpicker = layui.colorpicker;

        {if !empty($data['color'])}
            colorpicker.render({
                elem:'#color',
                alpha:true,
                size:'lg',
                predefine:true,
                color:'{$data["color"]}',
                done:function(color){
                    $('input[name="color"]').val(color);
                }
            });
        {else}
            colorpicker.render({
                elem:'#color',
                alpha:true,
                size:'lg',
                done:function(color){
                    $('input[name="color"]').val(color);
                }
            });
        {/if}

        {if !empty($data['color_inner'])}
            colorpicker.render({
                elem:'#color_inner',
                alpha:true,
                size:'lg',
                predefine:true,
                color:'{$data["color_inner"]}',
                done:function(color){
                    $('input[name="color_inner"]').val(color);
                }
            });
        {else}
            colorpicker.render({
                elem:'#color_inner',
                alpha:true,
                size:'lg',
                done:function(color){
                    $('input[name="color_inner"]').val(color);
                }
            });
        {/if}

        {if !empty($data['color_word'])}
            colorpicker.render({
                elem:'#color_word',
                alpha:true,
                size:'lg',
                predefine:true,
                color:'{$data["color_word"]}',
                done:function(color){
                    $('input[name="color_word"]').val(color);
                }
            });
        {else}
            colorpicker.render({
                elem:'#color_word',
                alpha:true,
                size:'lg',
                done:function(color){
                    $('input[name="color_word"]').val(color);
                }
            });
        {/if}

        //标签图标
        upload.render({
            elem: '#slogo_file-upload'
            ,url: '/?s=index/upload_file'
            ,accept: 'image'
            ,data: { folder: 'merch_file', type: 'shop_index'}
            ,multiple: false
            ,number:1
            ,before: function(obj){
                layer.load(); //上传loading
            }
            ,done: function(res){
                layer.closeAll('loading'); //关闭loading
                layer.msg(res.message, {time: 2000}, function () {
                    if (res.error == 1) {

                        $('#slogo_file-upload-list').append('<div style="display: inline-block;"><img onclick="seePic(this);" src="' + res.file_path + '" class="layui-upload-img" style="width:80px;height:80px;" alt="网站图标图片"><button type="button" onclick="delPic(this);" class="layui-btn layui-btn-xs layui-btn-danger" style="position: relative;left: -45px;top: -39px;">删除</button><input type="hidden" name="slogo_file[]" value="' + res.file_path + '"></div>')
                    }
                });
            }
        });

        // logo
        upload.render({
            elem: '#logo_file-upload'
            ,url: '/?s=index/upload_file'
            ,accept: 'image'
            ,data: { folder: 'merch_file', type: 'shop_index'}
            ,multiple: false
            ,number:1
            ,before: function(obj){
                layer.load(); //上传loading
            }
            ,done: function(res){
                layer.closeAll('loading'); //关闭loading
                layer.msg(res.message, {time: 2000}, function () {
                    if (res.error == 1)
                    {

                        $('#logo_file-upload-list').append('<div style="display: inline-block;"><img onclick="seePic(this);" src="'+ res.file_path +'" class="layui-upload-img" style="width:80px;height:80px;" alt="网站logo图片"><button type="button" onclick="delPic(this);" class="layui-btn layui-btn-xs layui-btn-danger" style="position: relative;left: -45px;top: -39px;">删除</button><input type="hidden" name="logo_file[]" value="'+res.file_path+'"></div>')
                    }
                });
            }
        });

        form.on('submit(formDemo)', function(data){
            layer.load();
            $.ajax({
                url:"/?s=index/website_basic",
                method:'post',
                data:data.field,
                dataType:'JSON',
                success:function(res){
                    layer.closeAll('loading');
                    layer.msg(res.msg,{time:2000}, function () {
                        if(res.code == 0)
                        {
                            let currentUrl = new URL(window.location.href);
                            currentUrl.searchParams.set('tab', 'website_basic');
                            window.history.pushState({}, '', currentUrl.toString());
                            window.location.reload();
                        }
                    });
                },
                error:function (data) {
                    layer.msg('系统错误',{time:2000});
                }
            });
            return false;
        });
    });

    function delPic(obj)
    {
        var layer = layui.layer,$ = layui.$;
        layer.confirm('确认要删除该附件？', {
            btn: ['删除','取消']
        }, function(){
            $(obj).parent().remove();
            layer.closeAll();
        }, function(){

        });
    }
</script>
</html>