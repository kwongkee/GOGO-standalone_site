<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>独立站平台 - website.gogo198.net</title>
    <link rel="stylesheet" href="css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="layui/css/layui.css">

    <style>
        html{height:100%;}
        :root {--primary: #8a2be2;--primary-dark: #6a1cb9;--primary-light: #9b4de3;--secondary: #bb86fc;--accent: #e6d7f5;--text: #333333;--text-light: #f8f8f8;--background: #f9f5fd;--card-bg: #ffffff;--gradient: linear-gradient(135deg, var(--primary), var(--primary-dark));--gradient-light: linear-gradient(135deg, var(--primary-light), var(--secondary));--shadow: 0 10px 30px rgba(138, 43, 226, 0.15);--shadow-hover: 0 15px 35px rgba(138, 43, 226, 0.25);}
        * {margin: 0;padding: 0;box-sizing: border-box;font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
        body {color: var(--text);line-height: 1.6;overflow-x: hidden;}
        h1, h2, h3, h4, h5, h6 {font-family: 'Montserrat', sans-serif;font-weight: 700;}

        /* 导航栏样式 */
        header {background: rgba(255, 255, 255, 0.95);color: var(--text);padding: 15px 0;box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);position: sticky;top: 0;z-index: 1000;backdrop-filter: blur(10px);}
        nav {display: flex;justify-content: space-between;align-items: center;position: relative;}
        .logo {font-size: 1.8rem;font-weight: 700;display: flex;align-items: center;background: var(--gradient);-webkit-background-clip: text;background-clip: text;color: transparent;z-index: 1001;}
        .logo i {margin-right: 10px;color: var(--primary);}
        .nav-links {display: flex;list-style: none;}
        .nav-links li {margin-left: 25px;position: relative;}
        .nav-links a {color: var(--text);text-decoration: none;font-weight: 500;transition: all 0.3s ease;padding: 8px 12px;border-radius: 4px;position: relative;display: flex;align-items: center;}
        .nav-links a::after {content: '';position: absolute;bottom: 0;left: 50%;width: 0;height: 2px;background: var(--gradient);transition: all 0.3s ease;transform: translateX(-50%);}
        .nav-links a:hover {color: var(--primary);}
        .nav-links a:hover::after {width: 80%;}
        .auth-buttons {display: flex;align-items: center;}
        .btn {padding: 12px 25px;border-radius: 50px;text-decoration: none;font-weight: 600;transition: all 0.3s ease;cursor: pointer;display: inline-block;text-align: center;border: none;font-family: 'Montserrat', sans-serif;}
        .btn-outline {border: 2px solid var(--primary);color: var(--primary);background: transparent;margin-right: 15px;}
        .btn-outline:hover {background: var(--primary);color: white;transform: translateY(-3px);box-shadow: var(--shadow);}
        .btn-primary {background: var(--gradient);color: white;border: 2px solid transparent;}
        .btn-primary:hover {background: transparent;border-color: var(--primary);color: var(--primary);transform: translateY(-3px);box-shadow: var(--shadow);}

        /* 表单样式 */
        .form-section {margin-bottom: 30px;}
        .form-title {font-size: 1.3rem;margin-bottom: 20px;color: var(--primary-dark);display: flex;align-items: center}
        .form-title i {margin-right: 10px;}
        .form-grid {display: grid;grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));gap: 20px;}
        .form-group {margin-bottom: 20px;}
        .form-group label {display: block;margin-bottom: 8px;font-weight: 600;color: var(--primary-dark);}
        .form-group input,
        .form-group select,
        .form-group textarea {width: 100%;padding: 15px;border: 2px solid #e0e0e0;border-radius: 10px;font-size: 1rem;transition: border-color 0.3s ease;}
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {border-color: var(--primary);outline: none;}
        .form-group textarea {min-height: 120px;resize: vertical;}
        .form-actions {display: flex;justify-content: flex-end;gap: 15px;margin-top: 30px;padding-top: 20px;border-top: 2px solid var(--accent);}

        xm-select{min-width:200px;}
        xm-select:hover{border-color:var(--primary) !important;}
        .xm-option.selected,.xm-label-block{background:var(--primary) !important;}

        .form-group {margin-bottom: 20px;}
        .form-group label {display: block;margin-bottom: 8px;font-weight: 600;color: var(--primary-dark);}
        .form-group input,
        .form-group select {width: 100%;padding: 15px;border: 2px solid #e0e0e0;border-radius: 10px;font-size: 1rem;transition: border-color 0.3s ease;border-top-left-radius: 0;border-bottom-left-radius: 0;}
        .form-group input:focus,
        .form-group select:focus {border-color: var(--primary);outline: none;}
        .form-actions {display: flex;justify-content: flex-end;gap: 15px;margin-top: 25px;}

        .disf{display: flex;align-items: center;}
        .layui-form-label{width: 100px;}
        .sel_div .layui-form-selected dl{width: 100%;}
        .w70{width:120px !important;}

        /*商品价格*/
        .no_specs_div,.have_specs_div{overflow-x:auto;}
        .no_specs_div .layui-table thead th:nth-of-type(1){min-width: 150px;}
        .no_specs_div .layui-table thead th:nth-of-type(2){min-width: 150px;}
        .no_specs_div .layui-table thead th:nth-of-type(3){min-width: 150px;}
        .no_specs_div .layui-table thead th:nth-of-type(4){min-width: 700px;}
        .no_specs_div .layui-table thead th:nth-of-type(5){min-width: 150px;}
        .no_specs_div .layui-table thead th:nth-of-type(6){min-width: 150px;}
        .no_specs_div .layui-table thead th:nth-of-type(7){min-width: 150px;}
        .no_specs_div .layui-table thead th:nth-of-type(8){min-width: 260px;}
        .have_specs_div .layui-table thead th:nth-of-type(1){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(2){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(3){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(4){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(5){min-width: 500px;}
        .have_specs_div .layui-table thead th:nth-of-type(6){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(7){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(8){min-width: 150px;}
        .have_specs_div .layui-table thead th:nth-of-type(9){min-width: 260px;}

        /*其他费用*/
        .fees_table_div{overflow-x: auto;}
        .fees_table thead th:nth-of-type(1){min-width: 150px;}
        .fees_table thead th:nth-of-type(2){min-width: 150px;}
        .fees_table thead th:nth-of-type(3){min-width: 500px;}
        .fees_table thead th:nth-of-type(4){min-width: 500px;}

        /*搜索框*/
        .result_div{display:none;width: calc(100% - 0px);height: 200px;position: absolute;background: #fff;color: #000;font-size: 13px;z-index: 9;border: 1px solid #c7c6c6;padding: 5px 10px;box-sizing: border-box;}
        .close_resultDiv{text-align: right;cursor: pointer;font-size:20px;font-weight:800;border-bottom: 1px solid #888;}
        .result_div .result_ul{height: 160px;overflow-x: hidden;overflow-y: scroll;}
        .result_div li:hover{background:var(--primary);color:#fff;cursor:pointer;}

        .have_specs_div select{width:150px;}
        .have_specs_div input{width:150px;}
        .layui-form-select .layui-input{width:100%;}

        .fees_table select{width:150px;}
        .fees_table input{width:150px;}

        .spec_table select{width:150px;}
        .spec_table input{width:150px;}

        .reduction_div select,.reduction_div .layui-form-select{width:150px;}
        .reduction_div input{width:150px;}

        .gift_div select,.gift_div .layui-form-select{width:150px;}
        /*.gift_div input{width:150px;}*/

        .noinclude_table select,.noinclude_table .layui-form-select{width:150px;}
        .noinclude_table input{width:150px;}

        .potential_table select,.potential_table .layui-form-select{width:150px;}
        .potential_table input{width:150px;}

        .warn_select{width:130px;}

        /* 动画 */
        @keyframes fadeIn {
            from {opacity: 0;transform: translateY(10px);}
            to {opacity: 1;transform: translateY(0);}
        }

        @media (max-width: 576px) {
            .btn {padding: 10px 20px;font-size: 0.9rem;}
            /*.form-actions {flex-direction: column;}*/
        }
    </style>
    <!--百度富文本-->
    <script type="text/javascript" src="cklein/plugins/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" src="cklein/plugins/ueditor/ueditor.all.min.js"> </script>
    <script type="text/javascript" src="cklein/plugins/ueditor/lang/zh-cn/zh-cn.js"></script>
</head>
<body>
<form class="layui-form" id="siteForm" action="" method="post" lay-filter="component-form-group" style="padding:0px;">
    <input type="hidden" name="company_id" value="{$company_id}">
    <input type="hidden" name="company_type" value="{$company_type}">
    <input type="hidden" name="id" value="{$id}">
    <input type="hidden" name="type" value="{$type2}">
    <input type="hidden" name="pa" value="1">

    <div class="form-group" style="padding:0px;">
        <div class="layui-tab layui-tab-card">
            <ul class="layui-tab-title">
                <li class="{if $page_type==1}layui-this{/if}">商品价格</li>
                <li class="{if $page_type==2}layui-this{/if}">物流支撑</li>
                <li class="{if $page_type==3}layui-this{/if}">其他费用</li>
                <li class="{if $page_type==4}layui-this{/if}">价格说明</li>
                <li class="{if $page_type==5}layui-this{/if}">商品促销</li>
                <li class="{if $page_type==6}layui-this{/if}">商品详情</li>
                <li class="{if $page_type==7}layui-this{/if}">卖家说明</li>
            </ul>
            <div class="layui-tab-content" style="min-height:550px;">
                <div class="layui-tab-item {if $page_type==1}layui-show{/if}">
                    <!--商品价格start-->
                    <div class="info_div">
                        <div class="layui-form-item">
                            <label class="layui-form-label">选择商品</label>
                            <div class="layui-input-block">
                                <div class="disf">
                                    <select name="goods_id" id="goods_id" lay-search lay-verify="" lay-filter="goods_id">
                                        <option value="">请选择</option>
                                        {volist name="type['goods']" id="vo"}
                                        <option value="{$vo['id']}">{$vo['goods_name']}</option>
                                        {/volist}
                                    </select>
                                    <a href="javascript:window.location.href='/?s=index/save_shelf';">
<!--                                        <img loading="lazy" alt="GOGO198 網站圖片" src="/img/refresh.png" alt="" style="padding:5px 10px;width:23px;text-align: center;border:2px solid #5c5a5a;">-->
                                        <i class="fa fa-refresh" style="padding:5px;text-align: center;border:2px solid #5c5a5a;"></i>
                                    </a>
                                </div>
                                <div id="name_result1" class="result_div"></div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">计价币种</label>
                            <div class="layui-input-block">
                                <div class="disf">
                                    <div class="currency_type">
                                        <select name="currency_type" id="currency_type" lay-filter="currency_type">
                                            <option value="0">本币结算</option>
                                            <option value="1">外币结算</option>
                                        </select>
                                    </div>
                                    <div class="currency_div">
                                        <div class="now_currency layui-input" style="line-height: 38px;padding-right: 10px;display:none;"></div>
                                        <div class="other_currency"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info_div">
                        <div class="layui-form-item">
                            <label class="layui-form-label">商品型号</label>
                            <div class="layui-input-block">
                                <div class="disf">
                                    <div class="have_specs_box">
                                        <select name="have_specs" id="have_specs" lay-filter="have_specs">
                                            <option value="2">无型号</option>
                                            <option value="1">有型号</option>
                                        </select>
                                    </div>

                                    <div class="add_specs" style="display: none;">
                                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_specs(this)">添加型号</div>
                                        <div class="add_specs_div" style="display: none;padding:10px;box-sizing: border-box;">
                                            <div class="layui-form-item">
                                                <label class="layui-form-label">型号分类<span style="color:#e60000;">*</span></label>
                                                <div class="layui-input-block">
                                                    <input type="text" id="option1" class="layui-input" placeholder="型号分类（一级）">
                                                    <div id="grade1_result" class="result_div"></div>
                                                </div>
                                            </div>
                                            <div class="layui-form-item">
                                                <label class="layui-form-label">型号属性<span style="color:#e60000;">*</span></label>
                                                <div class="layui-input-block">
                                                    <input type="text" id="option2" class="layui-input" placeholder="型号属性（二级）">
                                                    <div id="grade2_result" class="result_div"></div>
                                                </div>
                                            </div>
                                            <div class="layui-form-item">
                                                <label class="layui-form-label">型号属性</label>
                                                <div class="layui-input-block">
                                                    <input type="text" id="option3" class="layui-input" placeholder="型号属性（三级）">
                                                    <div id="grade3_result" class="result_div"></div>
                                                </div>
                                            </div>
                                            <div class="disf" style="justify-content: center;">
                                                <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="save_specs(this)">添加型号</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block" style="margin-left:0px !important;">
                            <div class="specs_div">
                                <!--无规格型号-->
                                <div class="no_specs_div">
                                    <table class="layui-table" style="margin-bottom:100px;">
                                        <thead>
                                            <th>货号</th>
                                            <th>条码</th>
                                            <th>库码</th>
                                            <th>销售价</th>
                                            <th>市场价</th>
                                            <th>成本价</th>
                                            <th>上架数量</th>
                                            <th>报警值</th>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                <input type="text" class="layui-input" name="nospecs[goods_sn]" placeholder="货号">
                                            </td>
                                            <td>
                                                <input type="text" class="layui-input" name="nospecs[goods_barcode]" placeholder="条码">
                                            </td>
                                            <td>
                                                <input type="text" class="layui-input" name="nospecs[goods_stockcode]" placeholder="库码">
                                            </td>
                                            <td>
                                                <table class="havespec_table" style="width:100%;text-align:center;">
                                                    <tr>
                                                        <td class="td_width">
                                                            <div class="disf">
                                                                <input type="number" name="nospecs[start_num][]" value="1" class="layui-input w70 start_num" placeholder="起始数值">
                                                                至
                                                                <div class="w70">
                                                                    <select name="nospecs[select_end][]" class="form-control chosen-select" lay-filter="select_end">
                                                                        <option value="1">数值</option>
                                                                        <option value="2">以上</option>
                                                                    </select>
                                                                </div>

                                                                <input type="number" name="nospecs[end_num][]" value="" class="layui-input w70 end_num" placeholder="尾止数值">
                                                                <div class="w70">
                                                                    <select name="nospecs[unit][]" class="form-control chosen-select unit" lay-search>
                                                                        <option value="">请选择</option>
                                                                        {volist name="type['unit']" id="v"}
                                                                        <option value="{$v['code_value']}" data-title="{$v['code_name']}">{$v['code_name']}</option>
                                                                        {/volist}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="td_width">
                                                            <input type="number" name="nospecs[price][]" value="" class="layui-input w70" placeholder="区间金额">
                                                        </td>
                                                        <td style="text-align:center;">
                                                            <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_interval2(this)">+</div>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td>
                                                <input type="number" class="layui-input" name="nospecs[market_price]" placeholder="市场价">
                                            </td>
                                            <td>
                                                <input type="number" class="layui-input" name="nospecs[cost_price]" placeholder="成本价">
                                            </td>
                                            <td>
                                                <input type="number" class="layui-input" name="nospecs[shelf_number]" placeholder="上架数量">
                                            </td>
                                            <td>
                                                <div class="disf">
                                                    <div class="w100 warn_select">
                                                        <select name="nospecs[warn_type]">
                                                            <option value="1">少于</option>
                                                            <option value="2">少于或等于</option>
                                                            <option value="3">等于</option>
                                                            <option value="4">大于</option>
                                                            <option value="5">大于或等于</option>
                                                        </select>
                                                    </div>
                                                    <input type="number" class="layui-input w100" name="nospecs[warn_number]" placeholder="报警值">
                                                    <div class="layu-input" style="white-space: nowrap;">触发报警</div>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!--有规格型号-->
                                <div class="have_specs_div" style="display: none;max-height:500px;min-height:400px;overflow-y:auto;">
                                    <table class="layui-table" style="margin-bottom:100px;">
                                        <thead>
                                        <th class="specs_th_name">型号</th>
                                        <th>货号</th>
                                        <th>条码</th>
                                        <th>库码</th>
                                        <th>销售价</th>
                                        <th>市场价</th>
                                        <th>成本价</th>
                                        <th>上架数量</th>
                                        <th>报警值</th>
                                        </thead>
                                        <tbody class="tbody">

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--商品价格end-->
                    <div class="form-actions">
                        <button class="submitBtn btn btn-primary" lay-submit="" lay-filter="component-form-demo1" data-i="1">立即保存</button>
                    </div>
                </div>
                <div class="layui-tab-item {if $page_type==2}layui-show{/if}">
                    <!--物流支撑start-->
                    <div class="info_div">
                        <div class="layui-form-item support_logistics">
                            <label class="layui-form-label">物流支撑</label>
                            <div class="layui-input-block">

                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item domestic_logistics_div">
                        <div class="layui-input-block" style="margin-left:70px !important;">
                            <table class="layui-table domestic_table">
                                <thead>
                                <th class="w150">区域名称</th>
                                <th>区域行政</th>
                                <th class="w120">操作</th>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>
                                        <input type="text" class="layui-input" name="domestic_logistics[name][]" placeholder="区域名称">
                                    </td>
                                    <td>
                                        <div class="domestic_area disf">
                                            <div class="area1"></div>
                                            <div class="area2"></div>
                                            <div class="area3"></div>
                                            <div class="area4"></div>
                                            <div class="area5"></div>
                                            <div class="area6"></div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="disf">
                                            <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_domestic_area(this)">+</div>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="foreign_logistics_div" style="display: none;">
                        <div class="layui-form-item">
                            <label class="layui-form-label">集运方式</label>
                            <div class="layui-input-block">
                                <div class="disf">
                                    <div class="gather_method">
                                        <select name="gather_method" id="gather_method" lay-filter="gather_method">
                                            <option value="1">平台集运</option>
                                            <option value="2">自主集运</option>
                                        </select>
                                    </div>
                                    <div class="support_export" style="display: none;">
                                        <select name="support_export" id="support_export" lay-filter="support_export">
                                            <option value="">请选择</option>
                                            <option value="1">支持</option>
                                            <option value="2">不支持</option>
                                        </select>
                                    </div>
                                    <div class="nosupport_export" style="display: none;">
                                        <select name="nosupport_export" id="nosupport_export" lay-filter="nosupport_export">
                                            <option value="">请选择</option>
                                            <option value="1">由平台集运</option>
                                            <option value="2">不提供集运</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="layui-form-item support_gather_div" style="display: none;">
                            <label class="layui-form-label">支持集运国家</label>
                            <div class="layui-input-block">
                                <table class="layui-table gather_table">
                                    <thead>
                                    <th class="w150">选择洲</th>
                                    <th class="w150">选择国家</th>
                                    <th>选择邮编</th>
                                    <th class="w120">操作</th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <select name="gather_zhou[]" lay-filter="gather_zhou">
                                                <option value="">请选择</option>
                                                {volist name="type['zhou']" id="vo"}
                                                <option value="{$vo['id']}">{$vo['param1']}</option>
                                                {/volist}
                                            </select>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_gather_country(this)">+</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!--物流支撑end-->
                    <div class="form-actions">
                        <button class="submitBtn btn btn-primary" lay-submit="" lay-filter="component-form-demo1" data-i="2">立即保存</button>
                    </div>
                </div>
                <div class="layui-tab-item {if $page_type==3}layui-show{/if}">
                    <!--其他费用start-->
                    <div class="fees_table_div" style="min-height: 300px;">
                        <table class="layui-table fees_table">
                            <thead>
                            <th>费用名称</th>
                            <th>费用描述</th>
                            <th>收费触发</th>
                            <th>收费标准</th>
                            <th>操作</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <input type="text" class="layui-input" name="fees_name[]" placeholder="费用名称">
                                </td>
                                <td>
                                    <input type="text" class="layui-input" name="fees_desc[]" placeholder="费用描述">
                                </td>
                                <td>
                                    <div class="disf">
                                        <div class="condition_div w120">
                                            <select name="fees_condition[]" lay-filter="fees_condition">
                                                <option value="1">无条件触发</option>
                                                <option value="2">有条件触发</option>
                                            </select>
                                        </div>
                                        <div class="condition_div2" style="display: none;">
                                            <div class="disf">
                                                <div class="trigger_div w100">
                                                    <select name="fees_trigger[]" lay-filter="fees_trigger">
                                                        <option value="1">要素触发</option>
                                                        <option value="2">型号触发</option>
                                                        <option value="3">物流触发</option>
                                                    </select>
                                                </div>
                                                <!--要素触发-->
                                                <div class="trigger_div1">
                                                    <div class="disf">
                                                        <div class="trigger_div1_box w100">
                                                            <select name="fees_trigger2[]">
                                                                <option value="1">购买数量</option>
                                                                <option value="2">购买金额</option>
                                                            </select>
                                                        </div>
                                                        <div class="trigger_div1_box w120">
                                                            <select name="fees_trigger2_equal[]">
                                                                <option value="1">少于</option>
                                                                <option value="2">少于或等于</option>
                                                                <option value="3">等于</option>
                                                                <option value="4">大于</option>
                                                                <option value="5">大于或等于</option>
                                                            </select>
                                                        </div>
                                                        <input type="number" class="layui-input w100" name="fees_trigger2_num[]" value="" placeholder="输入数值">
                                                        <div class="layui-input w70" style="line-height: 38px;padding-left:0;white-space:nowrap;">触发收费</div>
                                                    </div>
                                                </div>
                                                <!--型号触发-->
                                                <div class="trigger_div2" style="display: none;">
                                                    <div class="disf">
                                                        <div class="trigger_div2_box fees_options_trigger">
                                                            <!--新增规格型号时触发-->
                                                            <select name="fees_options[]" lay-search>
                                                                {if isset($type['now_goods']) && isset($type['now_goods']['have_specs'])}
                                                                    {if $type['now_goods']['have_specs']==2}
                                                                        <option value="-1">暂无规格型号数据</option>
                                                                    {else}
                                                                        {volist name="type['now_goods']['have_specs']" id="vo"}
                                                                            <option value="{$vo['sku_id']}">{$vo['spec_names2']}</option>
                                                                        {/volist}
                                                                    {/if}
                                                                {else}
                                                                    <option value="-1">暂无规格型号数据</option>
                                                                {/if}
                                                            </select>
                                                        </div>
                                                        <div class="layui-input w70" style="line-height: 38px;padding-left:0;white-space: nowrap;">触发收费</div>
                                                    </div>
                                                </div>
                                                <!--物流触发-->
                                                <div class="trigger_div3" style="display: none;">
                                                    <div class="disf">
                                                        <div class="layui-input w70" style="line-height: 38px;padding-left: 0;">收货地点</div>
                                                        <div class="trigger_div3_box w100">
                                                            <select name="fees_trigger2_area[]" lay-filter="fees_trigger2_area">
                                                                <option value="1">区域触发</option>
                                                                <option value="2">地点触发</option>
                                                            </select>
                                                        </div>
                                                        <div class="trigger_div3_box trigger_area1 w120">
                                                            <select name="fees_trigger2_area1[]" lay-search>
                                                                {if isset($type['now_goods'])}
                                                                {if empty($type['now_goods']['domestic_logistics'])}
                                                                <option value="-1">暂无区域信息</option>
                                                                {else}
                                                                {volist name="type['now_goods']['domestic_logistics']['name']" id="vo"}
                                                                <option value="{$vo}">{$vo}</option>
                                                                {/volist}
                                                                {/if}
                                                                {else}
                                                                <option value="-1">暂无区域信息</option>
                                                                {/if}
                                                            </select>
                                                        </div>
                                                        <div class="trigger_div3_box trigger_area2" style="display: none;">
                                                            <div class="disf">
                                                                <div class="area1">
                                                                    <select name="other_fees_area[area1][]" lay-search lay-filter="otherfees_area1">
                                                                        <option value="-1">暂无行政区域信息</option>
                                                                    </select>
                                                                </div>
                                                                <div class="area2"></div>
                                                                <div class="area3"></div>
                                                                <div class="area4"></div>
                                                                <div class="area5"></div>
                                                                <div class="area6"></div>
                                                                <input class="layui-input" name="other_fees_area[detail_area][]" placeholder="具体地址" value="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="disf">
                                        <div class="fees_standard w100">
                                            <select name="fees_standard[]" lay-filter="fees_standard">
                                                <option value="1">定额计价</option>
                                                <option value="2">比例计价</option>
                                            </select>
                                        </div>
                                        <div class="fees_standard_div1">
                                            <div class="disf">
                                                <div class="fees_standard_box w100">
                                                    <select name="fees_standard_currency[]" lay-search>
                                                        {volist name="type['currency']" id="vo"}
                                                        <option value="{$vo['id']}" {if isset($type['now_goods'])}{if $type['now_goods']['goods_currency']==$vo['id']}selected{/if}{/if}>{$vo['currency_symbol_standard']}</option>
                                                        {/volist}
                                                    </select>
                                                </div>
                                                <div class="fees_standard_box w120">
                                                    <input type="number" class="layui-input" name="fees_standard_price[]" placeholder="金额" value="">
                                                </div>
                                                <div class="fees_standard_box w100">
                                                    <select name="fees_standard_unit[]" lay-search>
                                                        {volist name="type['unit']" id="vo"}
                                                        <option value="{$vo['code_value']}">{$vo['code_name']}</option>
                                                        {/volist}
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="fees_standard_div2" style="display: none;">
                                            <div class="disf">
                                                <div class="fees_standard_box w100">
                                                    <select name="fees_standard_ratio[]" lay-filter="fees_standard_ratio">
                                                        <option value="1">计费基数</option>
                                                        <option value="2">计费比率</option>
                                                    </select>
                                                </div>
                                                <div class="fees_standard_ratio_div1 w100">
                                                    <input type="number" class="layui-input" name="fees_standard_ratio_price[]" placeholder="输入金额" value="">
                                                </div>
                                                <div class="fees_standard_ratio_div2 w120" style="display: none;">
                                                    <div class="disf">
                                                        <input type="number" class="layui-input" name="fees_standard_ratio_ratio[]" placeholder="输入比率" value="">
                                                        <div class="layui-input" style="width:35px;line-height: 38px;padding-left:0;">%</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="disf">
                                        <div class="layui-btn layui-btn-md layui-btn-normal" onclick="fees_add(this)">+</div>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!--其他费用end-->
                    <div class="form-actions">
                        <button class="btn btn-primary submitBtn" lay-submit="" lay-filter="component-form-demo1" data-i="3">立即保存</button>
                    </div>
                </div>
                <div class="layui-tab-item {if $page_type==4}layui-show{/if}">
                    <!--价格说明start-->
                    <div class="layui-form-item">
                        <div class="layui-input-block" style="margin-left:0px !important;overflow-y:auto;overflow-x:hidden;">

                            <fieldset class="layui-elem-field">
                                <legend>销售优惠-减免</legend>
                                <div class="layui-field-box" style="width: 100%;max-width:750px;overflow-x:auto;">
                                    <table class="layui-table reduction_div" style="width: 100%;">
                                        <thead>
                                        <th>优惠权属</th>
                                        <th>规则</th>
                                        <th>限制</th>
                                        <th>金额</th>
                                        <th>操作</th>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                <select id="goodsmodel-preferential_blong" class="form-control chosen-select" name="reduction[preferential_blong][]">
                                                    <option value="1">卖家优惠</option>
                                                    <option value="2">平台优惠</option>
                                                    <option value="3">他方优惠</option>
                                                </select>
                                            </td>
                                            <td>
                                                <select id="goodsmodel-reduction_type" class="form-control chosen-select" name="reduction[type][]" lay-filter="reduction_type">
                                                    <option value="">请选择规则</option>
                                                    {volist name="type['reduction_rule']" id="v"}
                                                    <option value="{$v['id']}" data-name1="{$v['content'][0]}" data-name2="{$v['content'][2]}">{$v['name']}</option>
                                                    {/volist}
                                                </select>
                                            </td>
                                            <td>
                                                <select id="goodsmodel-reduction_strict" class="form-control chosen-select" name="reduction[strict][]">
                                                    <option value="1">单独</option>
                                                    <option value="2">叠加</option>
                                                </select>
                                            </td>
                                            <td>
                                                <div class="disf" style="width:100%;justify-content: center;">
                                                    <div class="name1"></div>
                                                    <input type="number" class="layui-input w100" name="reduction[price1][]" placeholder="数值">
                                                    <div class="name2"></div>
                                                    <input type="number" class="layui-input w100" name="reduction[price2][]" placeholder="数值">
                                                </div>
                                            </td>
                                            <td style="width: 140px;">
                                                <div class="disf">
                                                    <div class="layui-btn layui-btn-md layui-btn-normal" onclick="reduction_add(this)">+</div>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </fieldset>

                            <fieldset class="layui-elem-field">
                                <legend>销售优惠-随赠</legend>
                                <div class="layui-field-box">
                                    <table class="layui-table gift_div" style="width: 100%;">
                                        <thead>
                                        <th>优惠权属</th>
                                        <th>项目</th>
                                        <th>限制</th>
                                        <th>操作</th>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                <select id="goodsmodel-preferential_blong" class="form-control chosen-select" name="gift[preferential_blong][]">
                                                    <option value="1">卖家优惠</option>
                                                    <option value="2">平台优惠</option>
                                                    <option value="3">他方优惠</option>
                                                </select>
                                            </td>
                                            <td style="white-space: nowrap;">
                                                <select id="goodsmodel-gift_type" class="form-control chosen-select" name="gift[type][]" lay-filter="gift_type">
                                                    <option value="">请选择项目</option>
                                                    <option value="1">积分</option>
                                                    <option value="2">卡券</option>
                                                    <option value="3">随赠</option>
                                                </select>
                                                <div class="points_coupon_div" style="display:none;">
                                                    <div class="disf">
                                                        <span class="gift_span">运营商：</span>
                                                        <select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[operaer][]" lay-filter="gift_type">
                                                            <option value="1">平台</option>
                                                            <option value="2">卖家</option>
                                                            <option value="3">他方</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="points_div" style="display: none;">
                                                    <div class="disf">
                                                        <span class="gift_span">按：</span>
                                                        <select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[points_type][]"  lay-filter="points_type">
                                                            <option value="1">订单/次</option>
                                                            <option value="2">金额</option>
                                                        </select>
                                                    </div>
                                                    <div class="disf points_money" style="display: none;">
                                                        <input type="number" class="layui-input" name="gift[points_money][]" placeholder="金额">
                                                    </div>
                                                    <div class="disf">
                                                        <span class="gift_span">送：</span>
                                                        <input type="number" class="layui-input" name="gift[points_send][]" placeholder="赠送值">
                                                    </div>
                                                </div>

                                                <div class="coupon_div" style="display: none;">
                                                    <div class="disf">
                                                        <span class="gift_span">面值：</span>
                                                        <input type="number" class="layui-input" name="gift[coupon_money][]" placeholder="金额">
                                                        <input type="number" class="layui-input" name="gift[coupon_num][]" placeholder="数量">
                                                    </div>
                                                </div>

                                                <div class="accgift_div" style="display: none;">
                                                    <div class="disf">
                                                        <span class="gift_span">类别：</span>
                                                        <select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[accgift_type][]" lay-filter="accgift_type">
                                                            <option value="1">虚拟</option>
                                                            <option value="2">服务</option>
                                                            <option value="3">实物</option>
                                                        </select>
                                                        <input type="text" class="layui-input" name="gift[accgift_content][]" placeholder="内容">
                                                        <input type="number" class="layui-input" name="gift[accgift_num][]" placeholder="数量">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <select id="goodsmodel-gift_strict" class="form-control chosen-select" name="gift[strict][]">
                                                    <option value="1">单独</option>
                                                    <option value="2">叠加</option>
                                                </select>
                                            </td>
                                            <td style="width:140px;">
                                                <div class="disf">
                                                    <div class="layui-btn layui-btn-md layui-btn-normal" onclick="gift_add(this)">+</div>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </fieldset>

                            <fieldset class="layui-elem-field">
                                <legend>价格未含</legend>
                                <div class="layui-field-box">
                                    <table class="layui-table noinclude_table" style="width: 100%;">
                                        <thead>
                                        <th>费用名称</th>
                                        <th>摘要描述</th>
                                        <th>计量单价</th>
                                        <th>操作</th>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                <input type="text" id="noinclude-name" class="layui-input" name="noinclude[name][]" data-anchor="费用名称" placeholder="费用名称">
                                            </td>
                                            <td>
                                                <input type="text" id="noinclude-desc" class="layui-input" name="noinclude[desc][]" data-anchor="摘要描述" placeholder="摘要描述">
                                            </td>
                                            <td>
                                                <input type="text" id="noinclude-price" class="layui-input" name="noinclude[price][]" data-anchor="计量单价" placeholder="计量单价">
                                            </td>
                                            <td style="width: 140px;">
                                                <div class="disf">
                                                    <div class="layui-btn layui-btn-md layui-btn-normal" onclick="noinclude_add(this)">+</div>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </fieldset>

                            <fieldset class="layui-elem-field">
                                <legend>潜在收费</legend>
                                <div class="layui-field-box" style="width: 100%;max-width:750px;overflow-x:auto;">
                                    <table class="layui-table potential_table" style="width: 100%;">
                                        <thead>
                                        <th>收款单位</th>
                                        <th>费用名称</th>
                                        <th>摘要描述</th>
                                        <th>计量单价</th>
                                        <th>操作</th>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                <select id="noinclude-currency" class="form-control chosen-select" name="potential[currency][]">
                                                    {volist name="type['currency']" id="v"}
                                                    <option value="{$v['id']}" {if $v['id'] == 5} selected {/if}>{$v['currency_symbol_standard']}</option>
                                                    {/volist}
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text" id="noinclude-name" class="layui-input" name="potential[name][]" data-anchor="费用名称" placeholder="费用名称">
                                            </td>
                                            <td>
                                                <input type="text" id="noinclude-desc" class="layui-input" name="potential[desc][]" data-anchor="摘要描述" placeholder="摘要描述">
                                            </td>
                                            <td>
                                                <input type="text" id="noinclude-price" class="layui-input" name="potential[price][]" data-anchor="计量单价" placeholder="计量单价">
                                            </td>
                                            <td style="width: 140px;">
                                                <div class="disf">
                                                    <div class="layui-btn layui-btn-md layui-btn-normal" onclick="potential_add(this)">+</div>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <!--价格说明end-->
                    <div class="form-actions">
                        <button class="btn btn-primary submitBtn" lay-submit="" lay-filter="component-form-demo1" data-i="4">立即保存</button>
                    </div>
                </div>
                <div class="layui-tab-item {if $page_type==5}layui-show{/if}">
                    <!--商品促销start-->
                    <div class="layui-form-item">
                        <label class="layui-form-label">活动配置</label>
                        <div class="layui-input-block">
                            <div class="disf">
                                <select id="goodsmodel-have_activity" class="form-control chosen-select" name="have_activity" lay-filter="have_activity">
                                    <option value="1">参与活动</option>
                                    <option value="2">不参与活动</option>
                                </select>
                                <div id="activity_id" class="xm-select-demo w200" style="margin-top:0px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">商业推广</label>
                        <div class="layui-input-block">
                            <fieldset class="layui-elem-field" style="display:none;">
                                <legend>默认值-关键字</legend>
                                <div class="layui-field-box">

                                </div>
                            </fieldset>

                            <fieldset class="layui-elem-field">
                                <legend>自定义-关键字</legend>
                                <div class="layui-field-box">
                                    <input type="text" class="layui-input" name="other_keywords" placeholder="多个关键字用“、”隔开">
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <!--商品促销end-->
                    <div class="form-actions">
                        <button class="btn btn-primary submitBtn" lay-submit="" lay-filter="component-form-demo1" data-i="5">立即保存</button>
                    </div>
                </div>
                <div class="layui-tab-item {if $page_type==6}layui-show{/if}">
                    <!--商品详情start-->
                    <div class="layui-tab layui-tab-card">
                        <ul class="layui-tab-title">
                            <li class="layui-this">商品参数</li>
                            <li class="">商品描述</li>
                        </ul>
                        <div class="layui-tab-content" style="min-height:550px;max-height:550px;overflow-y:auto;">
                            <div class="layui-tab-item layui-show">
                                <!--商品参数start-->
                                <table class="layui-table spec_table">
                                    <thead>
                                    <th style="min-width: 90px;max-width: 90px;">参数类别</th>
                                    <th>参数名称</th>
                                    <th>参数描述</th>
                                    <th style="width:100px;">操作</th>
                                    </thead>
                                    <tbody class="normal_tbody manufacture_tbody">
                                    <!--制造企业-->
                                    <tr>
                                        <td rowspan="5">制造企业</td>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="企业名称" value="企业名称" readonly>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="manufacture[company_name]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="注册地址" value="注册地址" readonly>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="country_sel">
                                                    <select name="manufacture[country]" lay-search lay-filter="manufacture_country">
                                                        <option value="">请选择</option>
                                                        {volist name="type['country']" id="vo"}
                                                        <option value="{$vo['id']}">{$vo['param2']}</option>
                                                        {/volist}
                                                    </select>
                                                </div>
                                                <div class="manufacture_area disf">

                                                </div>
                                                <input type="text" class="layui-input" name="manufacture[address]" placeholder="具体地址">
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select name="manufacture[connect_type]">
                                                <option value="联系电话">联系电话</option>
                                                <option value="联系邮箱">联系邮箱</option>
                                                <option value="联系网址">联系网址</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="manufacture[connect_info]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="生产许可" value="生产许可" readonly>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="manufacture[product_license]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="生产标准" value="生产标准" readonly>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="manufacture[product_standard]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody class="normal_tbody sale_tbody">
                                    <!--销售企业-->
                                    <tr>
                                        <td rowspan="4">销售企业</td>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="企业名称" value="企业名称" readonly>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="sales[company_name]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="注册地址" value="注册地址" readonly>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="country_sel">
                                                    <select name="sales[country]" lay-search lay-filter="sales_country">
                                                        <option value="">请选择</option>
                                                        {volist name="type['country']" id="vo"}
                                                        <option value="{$vo['id']}">{$vo['param2']}</option>
                                                        {/volist}
                                                    </select>
                                                </div>
                                                <div class="sales_area disf">

                                                </div>
                                                <input type="text" class="layui-input" name="sales[address]" placeholder="具体地址">
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select name="sales[connect_type]">
                                                <option value="联系电话">联系电话</option>
                                                <option value="联系邮箱">联系邮箱</option>
                                                <option value="联系网址">联系网址</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="sales[connect_info]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="销售许可" value="销售许可" readonly>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="sales[product_license]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody class="normal_tbody foreign_tbody">
                                    <!--外贸企业-->
                                    <tr>
                                        <td rowspan="4">外贸企业</td>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="企业名称" value="企业名称" readonly>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="foreign[company_name]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="注册地址" value="注册地址" readonly>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="country_sel">
                                                    <select name="foreign[country]" lay-search lay-filter="foreign_country">
                                                        <option value="">请选择</option>
                                                        {volist name="type['country']" id="vo"}
                                                        <option value="{$vo['id']}">{$vo['param2']}</option>
                                                        {/volist}
                                                    </select>
                                                </div>
                                                <div class="foreign_area disf">

                                                </div>
                                                <input type="text" class="layui-input" name="foreign[address]" placeholder="具体地址">
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select name="foreign[connect_type]">
                                                <option value="联系电话">联系电话</option>
                                                <option value="联系邮箱">联系邮箱</option>
                                                <option value="联系网址">联系网址</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="foreign[connect_info]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select name="foreign[product_type]">
                                                <option value="外贸方式-进口">外贸方式-进口</option>
                                                <option value="外贸方式-出口">外贸方式-出口</option>
                                                <option value="外贸方式-转口">外贸方式-转口</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="foreign[product_license]" placeholder="许可编号">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody class="normal_tbody effective_tbody">
                                    <!--有效期限-->
                                    <tr>
                                        <td rowspan="2">有效期限</td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-form-mid layui-word-aux">生产日期：</div>
                                                <div>
                                                    <select name="effective[type]" lay-filter="effective_type">
                                                        <option value="1">详见包装</option>
                                                        <option value="2">选择日期</option>
                                                    </select>
                                                </div>
                                                <div class="effective_type2" style="display: none;">
                                                    <select name="effective[type2]" lay-filter="effective_type2">
                                                        <option value="1">固定日</option>
                                                        <option value="2">时间段</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="effective_fixed_day" style="display: none;">
                                                <input type="text" class="layui-input" id="fixed_day" name="effective[fixed_day]" placeholder="年/月/日">
                                            </div>
                                            <div class="effective_interval_day" style="display: none;">
                                                <input type="text" class="layui-input" id="interval_day" name="effective[interval_day]" placeholder="年/月/日">
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="有效期限" value="有效期限" readonly>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <input type="number" class="layui-input" name="effective[valid_period]" placeholder="期限数值">
                                                <div class="valid_unit">
                                                    <select name="effective[valid_unit]">
                                                        <option value="年">年</option>
                                                        <option value="月">月</option>
                                                        <option value="周">周</option>
                                                        <option value="天">天</option>
                                                        <option value="时">时</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody class="normal_tbody store_tbody">
                                    <!--贮存条件-->
                                    <tr>
                                        <td rowspan="6">贮存条件</td>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="温度条件" value="温度条件" readonly>
                                        </td>
                                        <td>
                                            <select name="store[temperature_condition]">
                                                <option value="">请选择</option>
                                                <option value="常温保存">常温保存</option>
                                                <option value="冷藏保存">冷藏保存</option>
                                                <option value="冷冻保存">冷冻保存</option>
                                                <option value="恒温保存">恒温保存</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="湿度条件" value="湿度条件" readonly>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="humidity_condition">
                                                    <select name="store[humidity_condition]" lay-filter="humidity_condition">
                                                        <option value="">请选择</option>
                                                        <option value="置于干燥保存">置于干燥保存</option>
                                                        <option value="密封防潮保存">密封防潮保存</option>
                                                        <option value="3">相对湿度 X%-Y % 保存</option>
                                                    </select>
                                                </div>
                                                <div class="humidity_value" style="display: none;">
                                                    <div class="disf">
                                                        <input type="number" class="layui-input" name="store[humidity_x]" placeholder="湿度X%">
                                                        <div class="layui-form-mid layui-word-aux">%~</div>
                                                        <input type="number" class="layui-input" name="store[humidity_y]" placeholder="湿度Y%">
                                                        <div class="layui-form-mid layui-word-aux">%</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="光照条件" value="光照条件" readonly>
                                        </td>
                                        <td>
                                            <select name="store[light_condition]">
                                                <option value="">请选择</option>
                                                <option value="阴凉避光保存">阴凉避光保存</option>
                                                <option value="避免紫外线暗处保存">避免紫外线暗处保存</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="包装条件" value="包装条件" readonly>
                                        </td>
                                        <td>
                                            <select name="store[packing_condition]">
                                                <option value="">请选择</option>
                                                <option value="密封保存">密封保存</option>
                                                <option value="原包装保存">原包装保存</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="储存环境" value="储存环境" readonly>
                                        </td>
                                        <td>
                                            <select name="store[store_condition]">
                                                <option value="">请选择</option>
                                                <option value="通风环境保存">通风环境保存</option>
                                                <option value="清洁环境保存">清洁环境保存</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" class="layui-input" placeholder="特殊要求" value="特殊要求" readonly>
                                        </td>
                                        <td>
                                            <select name="store[special_condition]">
                                                <option value="">请选择</option>
                                                <option value="防磁保存">防磁保存</option>
                                                <option value="防压保存">防压保存</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody class="normal_tbody packing_tbody">
                                    <!--产品包装-->
                                    <tr>
                                        <td>产品包装</td>
                                        <td>
                                            <select name="packing[type]" lay-filter="packing_type">
                                                <option value="有包装">有包装</option>
                                                <option value="无包装">无包装</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="have_pack">
                                                <div class="disf">
                                                    <div class="layui-form-mid layui-word-aux">包装方式：</div>
                                                    <div class="packing_method">
                                                        <select name="packing[method]" lay-filter="packing_method">
                                                            <option value="">请选择</option>
                                                            {volist name="type['packing']" id="vo"}
                                                            <option value="{$vo['id']}">{$vo['name']}</option>
                                                            {/volist}
                                                        </select>
                                                    </div>
                                                    <div class="packing_method_box disf"></div>
                                                </div>
                                            </div>
                                            <div class="no_pack" style="display: none;">
                                                <select name="packing[no_pack]">
                                                    <option value="裸装">裸装</option>
                                                    <option value="散装">散装</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody class="diyparam_tbody spec_info">
                                    <!--自定义-->
                                    <tr class="diyparam_tr">
                                        <td rowspan="999">
                                            自定参数
                                            <br>
                                            <div class="btn btn-primary" onclick="get_lastinfo()" title="获取最近参数信息" style="white-space: nowrap;margin-top:10px;padding:5px;">获取参数</div>
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="spec_name[]" placeholder="参数名称">
                                        </td>
                                        <td>
                                            <input type="text" class="layui-input" name="spec_desc[]" placeholder="参数描述">
                                        </td>
                                        <td>
                                            <div class="disf">
                                                <div class="layui-btn layui-btn-md layui-btn-normal" onclick="spec_add(this)">+</div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="layui-tab-item">
                                <!--商品描述start-->
                                <script id="content" name="pc_desc" class="content" type="text/plain" style="width:100%;height:200px;background:#444444;">

                                </script>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                    <!--商品详情end-->
                    <div class="form-actions">
                        <button class="btn btn-primary submitBtn" lay-submit="" lay-filter="component-form-demo1" data-i="6">立即保存</button>
                    </div>
                </div>
                <div class="layui-tab-item {if $page_type==7}layui-show{/if}">
                    <!--卖家说明start-->
                    <div class="layui-form-item">
                        <label class="layui-form-label">选择规则</label>
                        <div class="layui-input-block">
                            <div class="disf">
                                <select id="rule_select" class="form-control chosen-select" name="rule_id" lay-filter="rule_select">
                                    <option value="">请选择</option>
<!--                                    <option value="-1">暂无规则？跳转添加</option>-->
                                    {volist name="type['rule']" id="vo"}
                                    <option value="{$vo['id']}">{$vo['rule_name']}</option>
                                    {/volist}
                                </select>
                            </div>
                        </div>
                    </div>
                    <!--卖家说明end-->
                    <div class="form-actions">
                        <button class="btn btn-primary submitBtn" lay-submit="" lay-filter="component-form-demo1" data-i="7">立即保存</button>
                    </div>
                </div>
            </div>
        </div>
</form>

</body>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="layui/layui.js"></script>
<script src="./layui/xm-select.js"></script>
<script>
    var domestic_area_html = '';
    var domestic_areas_name = '';
    var otherFeesArea_html = '';
    var ue = '';
    var activity = '';

    layui.use(['layer','form','laydate','upload','element','colorpicker'],function() {
        var laydate = layui.laydate
            ,layer = layui.layer
            ,form = layui.form
            ,$ = layui.jquery
            ,upload = layui.upload
            ,element = layui.element
            ,colorpicker = layui.colorpicker;

        if({$id}>0){
            $('#goods_id').val({$id});
            $('#goods_id').attr('disabled', true);
            get_goods_info({$id});
        }

        form.render(null, 'component-form-group');

        //商品参数-制造企业注册地址====================================================================start
        form.on('select(manufacture_country)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':5,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area1">' +
                        '<select name="manufacture[area1]" lay-search lay-filter="manufacture_area1">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.manufacture_area').html(html);
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(manufacture_area1)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area2">' +
                        '<select name="manufacture[area2]" lay-search lay-filter="manufacture_area2">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.manufacture_area').append(html);
                    $('.manufacture_area').find('.area3').remove();
                    $('.manufacture_area').find('.area4').remove();
                    $('.manufacture_area').find('.area5').remove();
                    $('.manufacture_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(manufacture_area2)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area3">' +
                        '<select name="manufacture[area3]" lay-search lay-filter="manufacture_area3">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.manufacture_area').append(html);
                    $('.manufacture_area').find('.area4').remove();
                    $('.manufacture_area').find('.area5').remove();
                    $('.manufacture_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(manufacture_area3)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area4">' +
                        '<select name="manufacture[area4]" lay-search lay-filter="manufacture_area4">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.manufacture_area').append(html);
                    $('.manufacture_area').find('.area5').remove();
                    $('.manufacture_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(manufacture_area4)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area5">' +
                        '<select name="manufacture[area5]" lay-search lay-filter="manufacture_area5">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.manufacture_area').append(html);
                    $('.manufacture_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(manufacture_area5)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area6">' +
                        '<select name="manufacture[area6]" lay-search lay-filter="manufacture_area6">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.manufacture_area').append(html);
                    form.render(null,'component-form-group');
                }
            });
        });
        //商品参数-制造企业注册地址====================================================================end

        //商品参数-销售企业注册地址====================================================================start
        form.on('select(sales_country)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':5,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area1">' +
                        '<select name="sales[area1]" lay-search lay-filter="sales_area1">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.sales_area').html(html);
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(sales_area1)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area2">' +
                        '<select name="sales[area2]" lay-search lay-filter="sales_area2">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.sales_area').append(html);
                    $('.sales_area').find('.area3').remove();
                    $('.sales_area').find('.area4').remove();
                    $('.sales_area').find('.area5').remove();
                    $('.sales_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(sales_area2)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area3">' +
                        '<select name="sales[area3]" lay-search lay-filter="sales_area3">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.sales_area').append(html);
                    $('.sales_area').find('.area4').remove();
                    $('.sales_area').find('.area5').remove();
                    $('.sales_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(sales_area3)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area4">' +
                        '<select name="sales[area4]" lay-search lay-filter="sales_area4">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.sales_area').append(html);
                    $('.sales_area').find('.area5').remove();
                    $('.sales_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(sales_area4)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area5">' +
                        '<select name="sales[area5]" lay-search lay-filter="sales_area5">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.sales_area').append(html);
                    $('.sales_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(sales_area5)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area6">' +
                        '<select name="sales[area6]" lay-search lay-filter="sales_area6">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.sales_area').append(html);
                    form.render(null,'component-form-group');
                }
            });
        });
        //商品参数-销售企业注册地址====================================================================end

        //商品参数-外贸企业注册地址====================================================================start
        form.on('select(foreign_country)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':5,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area1">' +
                        '<select name="foreign[area1]" lay-search lay-filter="foreign_area1">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.foreign_area').html(html);
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(foreign_area1)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area2">' +
                        '<select name="foreign[area2]" lay-search lay-filter="foreign_area2">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.foreign_area').append(html);
                    $('.foreign_area').find('.area3').remove();
                    $('.foreign_area').find('.area4').remove();
                    $('.foreign_area').find('.area5').remove();
                    $('.foreign_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(foreign_area2)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area3">' +
                        '<select name="foreign[area3]" lay-search lay-filter="foreign_area3">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.foreign_area').append(html);
                    $('.foreign_area').find('.area4').remove();
                    $('.foreign_area').find('.area5').remove();
                    $('.foreign_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(foreign_area3)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area4">' +
                        '<select name="foreign[area4]" lay-search lay-filter="foreign_area4">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.foreign_area').append(html);
                    $('.foreign_area').find('.area5').remove();
                    $('.foreign_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(foreign_area4)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area5">' +
                        '<select name="foreign[area5]" lay-search lay-filter="foreign_area5">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.foreign_area').append(html);
                    $('.foreign_area').find('.area6').remove();
                    form.render(null,'component-form-group');
                }
            });
        });

        form.on('select(foreign_area5)',function(data){
            let val = data.value;
            layer.load();

            $.post('/?s=index/get_name',{'type':6,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="area6">' +
                        '<select name="foreign[area6]" lay-search lay-filter="foreign_area6">'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list.length;i++){
                        html += '<option value="'+data.list[i].id+'">'+data.list[i].code_name+'</option>';
                    }
                    html += '</select>'+
                        '</div>';
                    $('.foreign_area').append(html);
                    form.render(null,'component-form-group');
                }
            });
        });
        //商品参数-外贸企业注册地址====================================================================end

        //有效期限====================================================================================start
        form.on('select(effective_type)',function(data){
            let val = data.value;

            if(val==1){
                //详见包装
                $(this).parents(":eq(3)").find('.effective_type2').hide();
                $('.effective_fixed_day,.effective_interval_day').hide();
            }
            else if(val==2){
                //选择日期
                $(this).parents(":eq(3)").find('.effective_type2').show();
                $('.effective_fixed_day').show();
                $('.effective_interval_day').hide();
            }
        });

        form.on('select(effective_type2)',function(data) {
            let val = data.value;

            if(val==1){
                //固定日
                $('.effective_fixed_day').show();
                $('.effective_interval_day').hide();
            }
            else if(val==2){
                //时间段
                $('.effective_fixed_day').hide();
                $('.effective_interval_day').show();
            }
        });

        laydate.render({
            elem: '#fixed_day'
        });

        laydate.render({
            elem: '#interval_day',
            range:true,
            type:'date',
            format:'yyyy-MM-dd'
        });
        //有效期限====================================================================================end

        //贮存条件====================================================================================start
        form.on('select(humidity_condition)',function(data){
            let val = data.value;

            if(val==3){
                //相对湿度x%-y%
                $('.humidity_value').show();
            }
            else{
                //其他
                $('.humidity_value').hide();
            }
        });
        //贮存条件====================================================================================end

        //产品包装====================================================================================start
        form.on('select(packing_type)',function(data){
            let val = data.value;

            if(val=='有包装'){
                $('.have_pack').show();
                $('.no_pack').hide();
            }
            else if(val=='无包装'){
                $('.have_pack').hide();
                $('.no_pack').show();
            }
        });

        form.on('select(packing_method)',function(data){
            let val = data.value;

            layer.load();

            $.post('/?s=index/get_name',{'type':7,'val':val},function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div class="layui-form-mid layui-word-aux">容器：</div>\n' +
                        '                                                                <div class="packing_container">\n' +
                        '                                                                    <select name="packing[packing_container]" lay-search>\n'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list['container'].length;i++) {
                        html+='                                                                      <option value="'+data.list['container'][i].id+'">'+data.list['container'][i].name+'</option>\n';
                    }
                    html+='                                                              </select>\n' +
                        '                                                                </div>\n' +
                        '                                                                &nbsp;\n' +
                        '                                                                <div class="layui-form-mid layui-word-aux">材料：</div>\n' +
                        '                                                                <div class="packing_container">\n' +
                        '                                                                    <select name="packing[packing_material]" lay-search>\n'+
                        '        <option value="">请选择</option>';
                    for(let i=0;i<data.list['material'].length;i++) {
                        html+='                                                                        <option value="'+data.list['material'][i].id+'">'+data.list['material'][i].name+'</option>\n';
                    }
                    html+='                                                              </select>\n' +
                        '                                                                </div>';
                    $('.packing_method_box').html(html);
                    form.render(null,'component-form-group');
                }
            });
        });
        //产品包装====================================================================================end

        //商品描述
        ue = UE.getEditor('content', {
            initialFrameHeight: 400,
            serverUrl: '/cklein/plugins/ueditor/php/controller.php'
        });
        setTimeout(function(){
            $('.edui-editor-iframeholder iframe').css('background','#666');
            $('#edui1').find('body').css('background','#666');
        },3000);

        //活动
        activity = xmSelect.render({
            el: '#activity_id',
            autoRow: true, //自动换行
            filterable: true, //可搜索
            searchTips: '请搜索',
            radio: false,
            name: "activity_id",
            model: {
                icon: 'hidden',//是否展示复选框或者单选框图标 show, hidden:变换背景色  ！！这句话是重点，不然会变成父节点也有单选框！！
                label: {
                    type: 'block',
                    block: {
                        //最大显示数量, 0:不限制
                        showCount: 1,
                        //是否显示删除图标
                        showIcon: true,
                    }
                },
            },
            prop:{
                name: 'name',
                value: 'id',
            },
            tree: {
                show: true, //用树显示
                showFolderIcon: true, //是否显示节点前的三角图标
                expandedKeys: false, //默认全部展开
                showLine: true, //显示渐近线
                indent: 20, //间距
                strict: false, //重点！！设置成非严格父子模式，这样父节点被禁用，子节点依然可以点击
                clickCheck: true,
                vaguaSearch:0,//关闭模糊搜索
            },
            toolbar: {
                show: false, //显示工具条
                list: ['ALL', 'REVERSE', 'CLEAR']
            },
            height: '300px', //最大下拉框高度
            data: {$type['activity']},
            initValue:[],
        });

        //选择商品
        form.on('select(goods_id)',function(data){
            let val = data.value;

            if(val!=''){
                $('input[name="id"]').val(val);
                get_goods_info(val);
            }
        });

        //选择币种结算方式
        form.on('select(currency_type)',function(data){
            let val = data.value;

            if(val==0){
                $('.currency_div').find('.now_currency').show();
                $('.currency_div').find('.other_currency').hide();
            }
            else if(val==1){
                $('.currency_div').find('.now_currency').hide();
                $('.currency_div').find('.other_currency').show();
            }
        });

        //有无规格型号
        form.on('select(have_specs)',function(data){
            let val = data.value;
            if(val==1){
                //有型号
                $('.no_specs_div').hide();
                $('.have_specs_div').show();
                $('.add_specs').show();
            }
            else if(val==2){
                //无型号
                $('.no_specs_div').show();
                $('.have_specs_div').hide();
                $('.add_specs').hide();
            }
        });

        // 防抖函数
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // 实际的请求函数
        function makeRequest(value,type2,num) {
            layer.load();
            $.post('/?s=index/get_name', {'type':type2,'val':value}, function(data){
                layer.closeAll('loading');
                if(data.code==0){
                    let html = '<div onclick="close_resultDiv(this)" class="close_resultDiv">×</div>'+
                        '     <ul class="result_ul">';
                    for(let i=0;i<data.list.length;i++){
                        html += '<li onclick="select_name(this,'+num+')" data-name="'+data.list[i].attr_name+'">'+data.list[i].attr_name+'</li>';
                    }
                    html += '</ul>';
                    $('#grade'+num+'_result').html(html);
                    $('#grade'+num+'_result').show();
                }else{
                    // $('#grade1_result').html('');
                    // $('#grade1_result').hide();
                }
            });
        }

        // 创建防抖版本的处理函数（延迟500毫秒）
        const debouncedRequest = debounce(makeRequest, 500);

        //型号分类（大类）
        const inputElement = document.getElementById('option1');
        inputElement.addEventListener('input', function(event) {
            debouncedRequest(event.target.value,3,1);
        });

        //型号属性（二级）
        const inputElement2 = document.getElementById('option2');
        inputElement2.addEventListener('input', function(event) {
            debouncedRequest(event.target.value,4,2);

            // layer.load();
            // $.post('/?s=index/get_name',{'type':4,'val':event.target.value},function(data){
            //     layer.closeAll('loading');
            //     if(data.code==0){
            //         let html = '<div onclick="close_resultDiv(this)" class="close_resultDiv">×</div>'+
            //             '     <ul class="result_ul">';
            //         for(let i=0;i<data.list.length;i++){
            //             html += '<li onclick="select_name(this,2)" data-name="'+data.list[i].attr_vname+'">'+data.list[i].attr_vname+'</li>';
            //         }
            //         html += '</ul>';
            //         $('#grade2_result').html(html);
            //         $('#grade2_result').show();
            //     }else{
            //         // $('#grade2_result').html('');
            //         // $('#grade2_result').hide();
            //     }
            // });
        });

        //型号属性（三级）
        const inputElement3 = document.getElementById('option3');
        inputElement3.addEventListener('input', function(event) {
            debouncedRequest(event.target.value,4,3);

            // layer.load();
            // $.post('/?s=index/get_name',{'type':4,'val':event.target.value},function(data){
            //     layer.closeAll('loading');
            //     if(data.code==0){
            //         let html = '<div onclick="close_resultDiv(this)" class="close_resultDiv">×</div>'+
            //             '     <ul class="result_ul">';
            //         for(let i=0;i<data.list.length;i++){
            //             html += '<li onclick="select_name(this,3)" data-name="'+data.list[i].attr_vname+'">'+data.list[i].attr_vname+'</li>';
            //         }
            //         html += '</ul>';
            //         $('#grade3_result').html(html);
            //         $('#grade3_result').show();
            //     }else{
            //         // $('#grade3_result').html('');
            //         // $('#grade3_result').hide();
            //     }
            // });
        });

        $('.layui-form-label').click(function(){
            $('.result_div').html('');
            $('.result_div').hide();
        });

        //区域数值
        form.on('select(select_end)',function(data){
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.end_num').show();
                $(this).parents(":eq(5)").find('td').eq(-1).find('.addbtn').show();
            }else if(val==2){
                $(this).parents(":eq(3)").find('.end_num').hide();
                $(this).parents(":eq(5)").find('td').eq(-1).find('.addbtn').hide();
            }
        });

        //物流支撑
        form.on('select(service_type)',function(data){
            let val = data.value;

            if(val==1){
                //国内配送
                $('.domestic_logistics_div').show();
                $('.foreign_logistics_div').hide();
            }
            else if(val==2){
                //跨境配送
                $('.domestic_logistics_div').hide();
                $('.foreign_logistics_div').show();
            }
        });

        //国内配送========================================start
        form.on('select(area1)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,2,t);
                    $(t).parents(":eq(3)").find('.area3').html('');
                    $(t).parents(":eq(3)").find('.area4').html('');
                    $(t).parents(":eq(3)").find('.area5').html('');
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(area2)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,3,t);
                    $(t).parents(":eq(3)").find('.area4').html('');
                    $(t).parents(":eq(3)").find('.area5').html('');
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(area3)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,4,t);
                    $(t).parents(":eq(3)").find('.area5').html('');
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(area4)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,5,t);
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(area5)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,6,t);
                });
            }
        });
        //国内配送========================================end

        //跨境配送========================================start
        form.on('select(gather_method)',function(data){
            let val = data.value;

            if(val==1){
                //由平台集运
                $('.support_export').hide();
                $('.nosupport_export').hide();
                $('.support_gather_div').hide();
            }
            else if(val==2){
                //不提供集运
                $('.support_export').show();
                $('.nosupport_export').hide();
                $('.support_gather_div').hide();
            }
        });

        form.on('select(support_export)',function(data){
            let val = data.value;

            if(val==1){
                $('.support_gather_div').show();
                $('.nosupport_export').hide();
            }
            else if(val==2){
                $('.nosupport_export').show();
                $('.support_gather_div').hide();
            }
        });

        form.on('select(nosupport_export)',function(data){
            let val = data.value;

            if(val==1){
                //由平台集运
                document.getElementById('gather_method').value = 1;
                $('.support_export').hide();
                $('.nosupport_export').hide();
                $('.support_gather_div').hide();
            }
            else if(val==2){
                //不提供集运
                document.getElementById('service_type').value = 1;
                $('.domestic_logistics_div').show();
                $('.foreign_logistics_div').hide();

            }
            form.render('select');
        });

        //选洲
        form.on('select(gather_zhou)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':3},function(res) {
                    layer.closeAll('loading');

                    let html = '<select name="gather_country[]" lay-search lay-filter="gather_country">\n'+
                        '           <option value="">请选择</option>\n';
                    for(let i=0;i<res.data.length;i++){
                        html += '<option value="'+res.data[i].id+'">'+res.data[i].param2+'</option>\n';
                    }
                    html += '</select>';

                    $(t).parents(":eq(3)").find('td').eq(1).html(html);
                    $(t).parents(":eq(3)").find('td').eq(2).html('');
                    form.render(null,'component-form-group');
                });
            }
        });

        //选国家
        form.on('select(gather_country)',function(data){
            let val = data.value;
            let t = this;
            let idx = $(t).parents(":eq(3)").index();

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':4},function(res) {
                    layer.closeAll('loading');

                    let html = '<div id="gather_postal'+idx+'" class="xm-select-demo w200" style="display: inline-block;"></div>';
                    $(t).parents(":eq(3)").find('td').eq(2).html(html);
                    form.render(null,'component-form-group');

                    setTimeout(function(){
                        xmSelect.render({
                            el: '#gather_postal'+idx,
                            autoRow: true, //自动换行
                            filterable: true, //可搜索
                            searchTips: '请搜索',
                            radio: false,
                            name: "gather_postal["+idx+"]",
                            model: {
                                icon: 'hidden',//是否展示复选框或者单选框图标 show, hidden:变换背景色  ！！这句话是重点，不然会变成父节点也有单选框！！
                                label: {
                                    type: 'block',
                                    block: {
                                        //最大显示数量, 0:不限制
                                        showCount: 1,
                                        //是否显示删除图标
                                        showIcon: true,
                                    }
                                },
                            },
                            prop:{
                                name: 'code_name',
                                value: 'id',
                            },
                            tree: {
                                show: true, //用树显示
                                showFolderIcon: true, //是否显示节点前的三角图标
                                expandedKeys: false, //默认全部展开
                                showLine: true, //显示渐近线
                                indent: 20, //间距
                                strict: false, //重点！！设置成非严格父子模式，这样父节点被禁用，子节点依然可以点击
                                clickCheck: true,
                                vaguaSearch:0,//关闭模糊搜索
                            },
                            toolbar: {
                                show: true, //显示工具条
                                list: ['ALL', 'REVERSE', 'CLEAR']
                            },
                            height: '300px', //最大下拉框高度
                            data: res.data,
                            // data: res.data,
                            initValue:[],
                        });
                    },1000);
                });
            }
        });
        //跨境配送=========================================end

        //其他费用=========================================start
        form.on('select(fees_condition)',function(data){
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.condition_div2').hide();
            }
            else if(val==2){
                $(this).parents(":eq(3)").find('.condition_div2').show();
            }
        });
        form.on('select(fees_trigger)',function(data){
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.trigger_div1').show();
                $(this).parents(":eq(3)").find('.trigger_div2').hide();
                $(this).parents(":eq(3)").find('.trigger_div3').hide();
            }
            else if(val==2){
                $(this).parents(":eq(3)").find('.trigger_div1').hide();
                $(this).parents(":eq(3)").find('.trigger_div2').show();
                $(this).parents(":eq(3)").find('.trigger_div3').hide();
            }
            else if(val==3){
                $(this).parents(":eq(3)").find('.trigger_div1').hide();
                $(this).parents(":eq(3)").find('.trigger_div2').hide();
                $(this).parents(":eq(3)").find('.trigger_div3').show();
            }
        });
        form.on('select(fees_trigger2_area)',function(data) {
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.trigger_area1').show();
                $(this).parents(":eq(3)").find('.trigger_area2').hide();
            }
            else if(val==2){
                $(this).parents(":eq(3)").find('.trigger_area1').hide();
                $(this).parents(":eq(3)").find('.trigger_area2').show();
            }
        });
        form.on('select(fees_standard)',function(data){
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.fees_standard_div1').show();
                $(this).parents(":eq(3)").find('.fees_standard_div2').hide();
            }
            else if(val==2){
                $(this).parents(":eq(3)").find('.fees_standard_div1').hide();
                $(this).parents(":eq(3)").find('.fees_standard_div2').show();
            }
        });
        form.on('select(fees_standard_ratio)',function(data){
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.fees_standard_ratio_div1').show();
                $(this).parents(":eq(3)").find('.fees_standard_ratio_div2').hide();
            }
            else if(val==2){
                $(this).parents(":eq(3)").find('.fees_standard_ratio_div1').hide();
                $(this).parents(":eq(3)").find('.fees_standard_ratio_div2').show();
            }
        });
        //==+==地点触发单个行政区
        form.on('select(otherfees_area1)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,2,t,1);
                    $(t).parents(":eq(3)").find('.area3').html('');
                    $(t).parents(":eq(3)").find('.area4').html('');
                    $(t).parents(":eq(3)").find('.area5').html('');
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(otherfees_area2)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,3,t,1);
                    $(t).parents(":eq(3)").find('.area4').html('');
                    $(t).parents(":eq(3)").find('.area5').html('');
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(otherfees_area3)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,4,t,1);
                    $(t).parents(":eq(3)").find('.area5').html('');
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(otherfees_area4)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,5,t,1);
                    $(t).parents(":eq(3)").find('.area6').html('');
                });
            }
        });
        form.on('select(otherfees_area5)',function(data){
            let val = data.value;
            let t = this;

            if(val!=''){
                layer.load();
                $.post('/?s=index/getarea',{'val':val,'type':2},function(res) {
                    layer.closeAll('loading');

                    get_area(res,6,t,1);
                });
            }
        });
        //其他费用=========================================end

        //价格说明=========================================start
        form.on('select(reduction_type)',function(data){
            let val = data.value;

            let name1 = $(this).parents(":eq(2)").find('#goodsmodel-reduction_type').find('option:selected').attr('data-name1');
            let name2 = $(this).parents(":eq(2)").find('#goodsmodel-reduction_type').find('option:selected').attr('data-name2');

            $(this).parents(":eq(3)").find('td').eq(3).find('.name1').text(name1);
            $(this).parents(":eq(3)").find('td').eq(3).find('.name2').text(name2);

        });

        form.on('select(gift_type)',function(data){
            let val = data.value;

            if(val == 1){
                $(this).parents(":eq(2)").find('.points_coupon_div').show();
                $(this).parents(":eq(2)").find('.points_div').show();
                $(this).parents(":eq(2)").find('.coupon_div').hide();
                $(this).parents(":eq(2)").find('.accgift_div').hide();
            }else if(val == 2){
                $(this).parents(":eq(2)").find('.points_coupon_div').show();
                $(this).parents(":eq(2)").find('.points_div').hide();
                $(this).parents(":eq(2)").find('.coupon_div').show();
                $(this).parents(":eq(2)").find('.accgift_div').hide();
            }else if(val == 3){
                $(this).parents(":eq(2)").find('.points_coupon_div').hide();
                $(this).parents(":eq(2)").find('.points_div').hide();
                $(this).parents(":eq(2)").find('.coupon_div').hide();
                $(this).parents(":eq(2)").find('.accgift_div').show();
            }
        });

        form.on('select(points_type)',function(data){
            let val = data.value;

            if(val==1){
                $(this).parents(":eq(3)").find('.points_money').hide();
            }else if(val == 2){
                $(this).parents(":eq(3)").find('.points_money').show();
            }
        });

        form.on('select(accgift_type)',function (data) {
            let val = data.value;

        });
        //价格说明=========================================end

        //商铺促销=========================================start
        form.on('select(have_activity)',function(data){
            let val = data.value;

            if(val==1){
                $('#activity_id').show();
            }
            else if(val==2){
                $('#activity_id').hide();
            }
        });
        //商品促销=========================================end

        //卖家说明=========================================start
        form.on('select(rule_select)',function(data){
            let val = data.value;

            if(val==-1){
                var index = layer.open({
                    type: 2,
                    title: '添加规则',
                    content: '/?s=index/description_manage',
                    area:['100%','100%']
                });
                // parent.location.href='/?s=index/description_manage';
            }
        });
        //卖家说明=========================================end

        /* 监听提交 */
        form.on('submit(component-form-demo1)', function (data) {
            layer.load();
            data.field['page_type'] = $(this).attr('data-i');
            $.ajax({
                url: "/?s=index/save_shelf",
                method: 'post',
                data: data.field,
                dataType: 'JSON',
                success: function (res) {
                    layer.closeAll('loading');
                    layer.msg(res.msg, {time: 2000}, function () {
                        if (res.code == 0) {
                            // var index = parent.layer.getFrameIndex(window.name);
                            // parent.layer.close(index);
                            // parent.window.location.reload();
                            // get_goods_info(res.data.goods_id);

                            layer.confirm('请选择你的下一步操作', {
                                btn: ['配置库存信息', '继续编辑信息']
                            }, function () {
                                //'/?s=index/save_inventory&company_id={$company_id}&company_type={$company_type}&type={$type2}&is_shelf_link=1&id='+res.data.goods_id
                                $(window.top.document).find('#content-area').find('.iframe_info').attr('src','/?s=index/save_procurement&company_id={$company_id}&company_type={$company_type}&type={$type2}');
                            }, function () {
                                window.location.href="/?s=index/save_shelf&id="+res.data.goods_id+"&page_type="+data.field['page_type']+'&company_id={$company_id}&company_type={$company_type}&type={$type2}'
                            });
                        }
                    });
                },
                error: function (data) {
                    layer.msg('系统错误', {time: 2000});
                }
            });
            return false;
        });
    });

    //获取上一个商品的参数信息
    function get_lastinfo(){
        let layer = layui.layer,
            $ = layui.$,
            form = layui.form;
        layer.load();
        $.post('/?s=index/get_goods_param',{'company_id':"{$company_id}",'company_type':"{$company_type}"},function(res){
            layer.closeAll('loading');
            layer.msg(res.msg, {time: 2000}, function () {
                if(res.code == 0){
                    let spec_html = '<tbody class="spec_info diyparam_tbody">\n';
                    for(let i=0;i<res.datas.length;i++){
                        spec_html+='<tr>\n';
                        if(i==0){
                            spec_html+='<td rowspan="999">自定参数</td>\n';
                        }
                        spec_html+='<td><input type="text" class="layui-input" name="spec_name[]" placeholder="参数名称" value="'+res.datas[i]['spec_name']+'"></td>\n'+
                            '       <td><input type="text" class="layui-input" name="spec_desc[]" placeholder="参数描述" value="'+res.datas[i]['spec_desc']+'"></td></td>\n'+
                            '       <td>' +
                            '               <div class="disf">\n';
                        if(i==0) {
                            spec_html += '       <div class="layui-btn layui-btn-md layui-btn-normal" onclick="spec_add(this)">+</div>\n';
                        }
                        else{
                            spec_html += '       <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n'+
                                '       <div class="layui-btn layui-btn-md layui-btn-normal" onclick="spec_add(this)">+</div>\n';
                        }
                        spec_html += '  </div>\n' +
                            '           </td>\n'+
                            '</tr>\n';
                    }
                    spec_html+='</tbody>';

                    $('.spec_table').find('.diyparam_tbody').remove();
                    $('.spec_table').find('.spec_info').remove();
                    $('.spec_table').append(spec_html);
                    form.render(null, 'component-form-group');
                }
            });
        });
    }

    function close_resultDiv(t){
        let layer = layui.layer,
            $ = layui.$,
            form = layui.form;

        $('.result_div').html('');
        $('.result_div').hide();
    }

    function get_goods_info(val){
        let layer = layui.layer,
            $ = layui.$,
            form = layui.form;

        layer.load();
        $.post('/?s=index/get_goods_info',{'id':val},function(res){
            layer.closeAll('loading');
            //计价币种=============================================================start
            //本币
            $('.currency_div').find('.now_currency').html(res.data.goods.currency_info);
            $('.currency_div').find('.now_currency').show();
            //外币
            let other_currency_html = '<select name="other_currency" id="other_currency" lay-filter="other_currency" lay-search>\n'+
                '        <option value="">请选择</option>\n';
            for(let i=0;i<res.data.currency.length;i++){
                other_currency_html += '<option value="'+res.data.currency[i].id+'">'+res.data.currency[i].currency_symbol_standard+'</option>\n';
            }
            other_currency_html += '</select>';
            $('.currency_div').find('.other_currency').html(other_currency_html);
            $('.currency_div').find('.other_currency').hide();
            //计价币种=============================================================end

            //商品型号=============================================================start
            if(res.data['goods']['have_specs']==1){
                //有规格
                $('#have_specs').val(res.data['goods']['have_specs']);
                $('#have_specs').attr('disabled', true);
                $('.add_specs').css('display','block');
                $('.no_specs_div').hide();
                $('.have_specs_div').show();

                let spec_table_html = '';
                for(let i=0;i<res.data['goods']['havespecs'].length;i++){
                    spec_table_html += '<tr class="spec_tr">\n' +
                        '                                                        <td class="specs_th_name">\n' +
                        '                                                            <input type="hidden" name="is_edit" value="1">\n'+
                        '                                                            <input type="hidden" name="havespecs[sku_id][]" value="'+res.data['goods']['havespecs'][i]['sku_id']+'">\n'+
                        '                                                            <div class="option_txt" style="text-align:left;">'+res.data['goods']['havespecs'][i]['spec_names']+'</div>\n'+
                        '                                                            <input type="hidden" class="layui-input" name="havespecs[option_name][]" placeholder="型号" value="'+res.data['goods']['havespecs'][i]['spec_names']+'" readonly>\n' +
                        '                                                        </td>\n' +
                        '                                                        <td>\n' +
                        '                                                            <input type="text" class="layui-input" name="havespecs[goods_sn][]" placeholder="货号" value="'+res.data['goods']['havespecs'][i]['goods_sn']+'">\n' +
                        '                                                        </td>\n' +
                        '                                                        <td>\n' +
                        '                                                            <input type="text" class="layui-input" name="havespecs[goods_barcode][]" placeholder="条码" value="'+res.data['goods']['havespecs'][i]['goods_barcode']+'">\n' +
                        '                                                        </td>\n' +
                        '                                                        <td>\n' +
                        '                                                            <input type="text" class="layui-input" name="havespecs[goods_stockcode][]" placeholder="库码" value="'+res.data['goods']['havespecs'][i]['goods_stockcode']+'">\n' +
                        '                                                        </td>\n' +
                        '                                                        <td>\n' +
                        '                                                            <table class="havespec_table" style="width:100%;text-align:center;">\n';
                    for(let i2=0;i2<res.data['goods']['havespecs'][i]['sku_prices']['start_num'].length;i2++){
                        spec_table_html+='                                              <tr>\n' +
                            '                                                                    <td class="td_width">\n' +
                            '                                                                        <div class="disf">\n' +
                            '                                                                            <input type="number" name="havespecs[start_num]['+i+'][]" class="layui-input w70 start_num" placeholder="起始数值" value="'+res.data['goods']['havespecs'][i]['sku_prices']['start_num'][i2]+'">\n' +
                            '                                                                            至\n' +
                            '                                                                            <div class="w70">\n' +
                            '                                                                                <select name="havespecs[select_end]['+i+'][]" class="form-control chosen-select" lay-filter="select_end">\n';
                        if(res.data['goods']['havespecs'][i]['sku_prices']['select_end'][i2]==1){
                            spec_table_html+='                                                            <option value="1" selected>数值</option>\n' +
                                '                                                                             <option value="2">以上</option>\n';
                        }
                        else if(res.data['goods']['havespecs'][i]['sku_prices']['select_end'][i2]==2){
                            spec_table_html+='                                                            <option value="1">数值</option>\n' +
                                '                                                                         <option value="2" selected>以上</option>\n';
                        }
                        spec_table_html+='                                                               </select>\n' +
                            '                                                                            </div>\n';
                        if(res.data['goods']['havespecs'][i]['sku_prices']['select_end'][i2]==1){
                            spec_table_html+='                                                       <input type="number" name="havespecs[end_num]['+i+'][]" value="'+res.data['goods']['havespecs'][i]['sku_prices']['end_num'][i2]+'" class="layui-input w70 end_num" placeholder="尾止数值">\n';
                        }
                        else if(res.data['goods']['havespecs'][i]['sku_prices']['select_end'][i2]==2){
                            spec_table_html+='                                                       <input type="number" name="havespecs[end_num]['+i+'][]" value="'+res.data['goods']['havespecs'][i]['sku_prices']['end_num'][i2]+'" class="layui-input w70 end_num" placeholder="尾止数值" style="display:none;">\n';
                        }
                        spec_table_html+='                                                           <div class="w70">\n';
                        if(i2==0){
                            spec_table_html+='                                                          <select name="havespecs[unit]['+i+'][]" class="form-control chosen-select unit"  lay-search>\n' +
                                '                                                                                    <option value="">请选择</option>\n';
                            {volist name="type['unit']" id="v"}

                            if("{$v['code_value']}"==res.data['goods']['havespecs'][i]['sku_prices']['unit'][0]){
                                spec_table_html+='                        <option value="{$v['code_value']}" data-title="{$v['code_name']}" selected>{$v['code_name']}</option>\n';
                            }
                            else{
                                spec_table_html+='                        <option value="{$v['code_value']}" data-title="{$v['code_name']}">{$v['code_name']}</option>\n';
                            }
                            {/volist}
                            spec_table_html += '                                                                   </select>\n';
                        }
                        else{
                            {volist name="type['unit']" id="v"}
                            if("{$v['code_value']}"==res.data['goods']['havespecs'][i]['sku_prices']['unit'][0]) {
                                spec_table_html += '<div class="unit_div layui-input w70" style="line-height: 38px;text-align: left;">{$v['code_name']}</div>';
                            }
                            {/volist}
                            }
                            spec_table_html +='                                                              </div>\n' +
                                '                                                                        </div>\n' +
                                '                                                                    </td>\n' +
                                '                                                                    <td class="td_width">\n' +
                                '                                                                        <input type="number" name="havespecs[price][' + i + '][]" value="'+res.data['goods']['havespecs'][i]['sku_prices']['price'][i2]+'" class="layui-input" placeholder="区间金额">\n' +
                                '                                                                    </td>\n' +
                                '                                                                    <td style="text-align:center;">\n';
                            if(res.data['goods']['havespecs'][i]['sku_prices']['select_end'][i2]==1) {
                                //数值
                                if(i2!=0){
                                    spec_table_html += '<div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_interval(this)">-</div>\n';
                                }
                                else{
                                    //第一个
                                    spec_table_html += '<div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_interval_havespecs(this,' + i + ')">+</div>\n';
                                }
                            }
                            else if(res.data['goods']['havespecs'][i]['sku_prices']['select_end'][i2]==2){
                                //以上
                                if(i2!=0) {
                                    spec_table_html += ' <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_interval(this)">-</div>\n';
                                }
                                else{
                                    //第一个
                                    spec_table_html += '<div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_interval_havespecs(this,' + i + ')" style="display:none;">+</div>\n';
                                }
                            }
                            spec_table_html+=
                                '                                                                    </td>\n' +
                                '                                                                </tr>\n';
                        }
                        spec_table_html+='                                               </table>\n' +
                            '                                                        </td>\n' +
                            '                                                        <td>\n' +
                            '                                                            <input type="number" class="layui-input" name="havespecs[market_price][]" placeholder="市场价" value="'+res.data['goods']['havespecs'][i]['market_price']+'">\n' +
                            '                                                        </td>\n' +
                            '                                                        <td>\n' +
                            '                                                            <input type="number" class="layui-input" name="havespecs[cost_price][]" placeholder="成本价" value="'+res.data['goods']['havespecs'][i]['cost_price']+'">\n' +
                            '                                                        </td>\n' +
                            '                                                        <td>\n' +
                            '                                                            <input type="number" class="layui-input shelf_number" name="havespecs[shelf_number][]" placeholder="上架数量" value="'+res.data['goods']['havespecs'][i]['shelf_number']+'">\n' +
                            '                                                        </td>\n' +
                            '                                                        <td>\n' +
                            '                                                            <div class="disf">\n' +
                            '                                                                <div class="w100 warn_select">\n' +
                            '                                                                    <select name="havespecs[warn_type][]">\n';
                        if(res.data['goods']['havespecs'][i]['warn_type']==1){
                            spec_table_html+='                                                   <option value="1" selected>少于</option>\n'+
                                '                                                   <option value="2">少于或等于</option>\n'+
                                '                                                   <option value="3">等于</option>\n'+
                                '                                                   <option value="4">大于</option>\n'+
                                '                                                   <option value="5">大于或等于</option>\n';
                        }
                        else if(res.data['goods']['havespecs'][i]['warn_type']==2){
                            spec_table_html+='                                                   <option value="1">少于</option>\n'+
                                '                                                   <option value="2" selected>少于或等于</option>\n'+
                                '                                                   <option value="3">等于</option>\n'+
                                '                                                   <option value="4">大于</option>\n'+
                                '                                                   <option value="5">大于或等于</option>\n';
                        }
                        else if(res.data['goods']['havespecs'][i]['warn_type']==3){
                            spec_table_html+='                                                   <option value="1">少于</option>\n'+
                                '                                                   <option value="2">少于或等于</option>\n'+
                                '                                                   <option value="3" selected>等于</option>\n'+
                                '                                                   <option value="4">大于</option>\n'+
                                '                                                   <option value="5">大于或等于</option>\n';
                        }
                        else if(res.data['goods']['havespecs'][i]['warn_type']==4){
                            spec_table_html+='                                                   <option value="1">少于</option>\n'+
                                '                                                   <option value="2">少于或等于</option>\n'+
                                '                                                   <option value="3">等于</option>\n'+
                                '                                                   <option value="4" selected>大于</option>\n'+
                                '                                                   <option value="5">大于或等于</option>\n';
                        }
                        else if(res.data['goods']['havespecs'][i]['warn_type']==5){
                            spec_table_html+='                                                   <option value="1">少于</option>\n'+
                                '                                                   <option value="2">少于或等于</option>\n'+
                                '                                                   <option value="3">等于</option>\n'+
                                '                                                   <option value="4">大于</option>\n'+
                                '                                                   <option value="5" selected>大于或等于</option>\n';
                        }
                        spec_table_html+='                                                        </select>\n' +
                            '                                                                </div>\n' +
                            '                                                                <input type="number" class="layui-input w100 warn_number" name="havespecs[warn_number][]" placeholder="报警值" value="'+res.data['goods']['havespecs'][i]['warn_number']+'">\n' +
                            '                                                                <div class="layu-input" style="white-space: nowrap;">触发报警</div>\n' +
                            '                                                            </div>\n' +
                            '                                                        </td>\n' +
                            '                                                    </tr>';

                        $('.have_specs_div').find('.layui-table').find('.tbody').html(spec_table_html);
                    }
            }
            else if(res.data['goods']['have_specs']==2){
                //无规格
                $('#have_specs').val(res.data['goods']['have_specs']);
                $('#have_specs').attr('disabled', true);
                $('.no_specs_div').show();
                $('.have_specs_div').hide();
                $('input[name="nospecs[goods_sn]"]').val(res.data['goods']['nospecs']['sku_info']['goods_sn']);
                $('input[name="nospecs[goods_barcode]"]').val(res.data['goods']['nospecs']['sku_info']['goods_barcode']);
                $('input[name="nospecs[goods_stockcode]"]').val(res.data['goods']['nospecs']['sku_info']['goods_stockcode']);
                $('input[name="nospecs[market_price]"]').val(res.data['goods']['nospecs']['sku_info']['market_price']);
                $('input[name="nospecs[cost_price]"]').val(res.data['goods']['nospecs']['sku_info']['cost_price']);
                $('input[name="nospecs[shelf_number]"]').val(res.data['goods']['nospecs']['sku_info']['shelf_number']);
                $('select[name="nospecs[warn_type]"]').val(res.data['goods']['nospecs']['sku_info']['warn_type']);
                $('input[name="nospecs[warn_number]"]').val(res.data['goods']['nospecs']['sku_info']['warn_number']);

                let spec_table_html = '          <input type="hidden" name="is_edit" value="1">\n'+
                    '                            <input type="hidden" name="sku_id" value="'+res.data['goods']['sku_id']+'">\n';
                for(let i=0;i<res.data['goods']['nospecs']['start_num'].length;i++){
                    spec_table_html += '<tr>\n' +
                        '                   <td class="td_width">\n' +
                        '                       <div class="disf">\n' +
                        '                            <input type="number" name="nospecs[start_num][]" value="'+res.data['goods']['nospecs']['start_num'][i]+'" class="layui-input w70 start_num" placeholder="起始数值">\n' +
                        '                            至\n' +
                        '                            <div class="w70">\n' +
                        '                                 <select name="nospecs[select_end][]" class="form-control chosen-select" lay-filter="select_end">\n';
                    if(res.data['goods']['nospecs']['select_end'][i]==1) {
                        spec_table_html += '                  <option value="1" selected>数值</option>\n'+
                            '                  <option value="2">以上</option>\n';
                    }
                    else{
                        spec_table_html += '                   <option value="1">数值</option>\n'+
                            '                   <option value="2" selected>以上</option>\n';
                    }
                    spec_table_html += '                  </select>\n' +
                        '                            </div>\n';
                    if(res.data['goods']['nospecs']['select_end'][i]==1){
                        spec_table_html+='                                                       <input type="number" name="nospecs[end_num][]" value="'+res.data['goods']['nospecs']['end_num'][i]+'" class="layui-input w70 end_num" placeholder="尾止数值">\n';
                    }
                    else if(res.data['goods']['nospecs']['select_end'][i]==2){
                        spec_table_html+='                                                       <input type="number" name="nospecs[end_num][]" value="'+res.data['goods']['nospecs']['end_num'][i]+'" class="layui-input w70 end_num" placeholder="尾止数值" style="display:none;">\n';
                    }
                    spec_table_html += '           <div class="w70">\n';

                    if(i==0){
                        spec_table_html += '         <select name="nospecs[unit][]" class="form-control chosen-select unit" lay-search>\n' +
                            '                                    <option value="">请选择</option>\n';
                        {volist name="type['unit']" id="v"}
                        if("{$v['code_value']}"==res.data['goods']['nospecs']['unit'][0]){
                            spec_table_html+='               <option value="{$v['code_value']}" data-title="{$v['code_name']}" selected>{$v['code_name']}</option>\n';
                        }
                        else{
                            spec_table_html+='               <option value="{$v['code_value']}" data-title="{$v['code_name']}">{$v['code_name']}</option>\n';
                        }
                        {/volist}
                            spec_table_html+='       </select>\n';
                        }else{
                            {volist name="type['unit']" id="v"}
                            if("{$v['code_value']}"==res.data['goods']['nospecs']['unit'][0]){
                                spec_table_html += '<div class="unit_div layui-input w70" style="line-height: 38px;text-align: left;">{$v['code_name']}</div>';
                            }
                            {/volist}
                            }

                            spec_table_html+='           </div>\n' +
                                '                       </div>\n' +
                                '                  </td>\n' +
                                '                  <td class="td_width">\n' +
                                '                      <input type="number" name="nospecs[price][]" value="'+res.data['goods']['nospecs']['price'][i]+'" class="layui-input" placeholder="区间金额">\n' +
                                '                  </td>\n' +
                                '                  <td class="disf" style="text-align:center;">\n';
                            if(res.data['goods']['nospecs']['select_end'][i]==1) {
                                if(i!=0){
                                    spec_table_html += '<div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_interval(this)">-</div>\n';
                                }
                                else{
                                    spec_table_html += '    <div class="layui-btn layui-btn-md layui-btn-normal addbtn" style="display:none;" onclick="add_interval2(this)">+</div>\n';
                                }
                            }
                            else if(res.data['goods']['nospecs']['select_end'][i]==2){
                                if(i!=0){
                                    spec_table_html += '<div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_interval(this)">-</div>\n'+
                                        '<div class="layui-btn layui-btn-md layui-btn-normal addbtn" style="display:none;" onclick="add_interval2(this)">+</div>\n';
                                }else{
                                    spec_table_html += '<div class="layui-btn layui-btn-md layui-btn-normal addbtn" style="display:none;" onclick="add_interval2(this)">+</div>\n';
                                }
                            }
                            spec_table_html+='</td>\n' +
                                '            </tr>\n';
                        }
                        $('.no_specs_div').find('.havespec_table').html(spec_table_html);
                    }
                    //商品型号=============================================================end

    //物流支撑=============================================================start
    let support_logistics_html = '<select name="service_type" id="service_type" lay-filter="service_type">\n' +
        '                                <option value="1">支持（'+res.data.country_name+'）国内配送</option>\n' +
        '                                <option value="2">支持（'+res.data.country_name+'）跨境配送</option>\n' +
        '                        </select>';
    $('.support_logistics').find('.layui-input-block').html(support_logistics_html);
    if(res.data['goods']['service_type']==0){
        $('.support_logistics').find('#service_type').val(1);//默认选择第一个
    }else{
        $('.support_logistics').find('#service_type').val(res.data['goods']['service_type']);
    }

    //国内行政区域
    domestic_area_html = '<select name="domestic_logistics[area1][]" lay-search lay-filter="area1">\n' +
        '                             <option value="">请选择</option>\n';
    for(let i=0;i<res.data.addr.length;i++) {
        domestic_area_html += '       <option value="'+res.data.addr[i].id+'">'+res.data.addr[i].code_name+'</option>\n';
    }
    domestic_area_html += '   </select>';
    $('.domestic_logistics_div').find('.domestic_area').find('.area1').html(domestic_area_html);

    //其他费用的单个行政区触发html
    otherFeesArea_html = '<select name="other_fees_area[area1][]" lay-search lay-filter="otherfees_area1">\n' +
        '                             <option value="">请选择</option>\n';
    for(let i=0;i<res.data.addr.length;i++) {
        otherFeesArea_html += '       <option value="'+res.data.addr[i].id+'">'+res.data.addr[i].code_name+'</option>\n';
    }
    otherFeesArea_html += '   </select>';

    if(res.data['goods']['service_type']==1){
        //国内配送
        $('.domestic_logistics_div').show();
        $('.foreign_logistics_div').hide();

        //其他费用的区域触发
        domestic_areas_name = res.data['goods']['domestic_logistics']['name'];

        let domestic_html = '<thead>\n' +
            '                                        <th class="w150">区域名称</th>\n' +
            '                                        <th>区域行政</th>\n' +
            '                                        <th class="w120">操作</th>\n' +
            '                                        </thead>';
        for(let i=0;i<res.data['goods']['domestic_logistics']['name'].length;i++){
            domestic_html += '<tr>\n' +
                '                                            <td>\n' +
                '                                                <input type="text" class="layui-input" name="domestic_logistics[name][]" placeholder="区域名称" value="'+res.data['goods']['domestic_logistics']['name'][i]+'">\n' +
                '                                            </td>\n' +
                '                                            <td>\n' +
                '                                                <div class="domestic_area disf">\n' +
                '                                                    <div class="area1">\n';

            if(res.data['goods']['domestic_logistics']['areas'][i]['area1'] != ''){
                domestic_html+='<input name="domestic_logistics[area1][]" type="hidden" value="'+res.data['goods']['domestic_logistics']['areas'][i]['area1']['id']+'">\n'+
                    res.data['goods']['domestic_logistics']['areas'][i]['area1']['code_name'];
            }
            else{
                domestic_html+=domestic_area_html;
            }

            domestic_html+='                                     </div>\n' +
                '                                                    <div class="area2">\n';

            if(res.data['goods']['domestic_logistics']['areas'][i]['area2'] != ''){
                domestic_html+='<input name="domestic_logistics[area2][]" type="hidden" value="'+res.data['goods']['domestic_logistics']['areas'][i]['area2']['id']+'">\n'+
                    res.data['goods']['domestic_logistics']['areas'][i]['area2']['code_name'];
            }

            domestic_html+='                                                    </div>\n' +
                '                                                    <div class="area3">\n';

            if(res.data['goods']['domestic_logistics']['areas'][i]['area3'] != ''){
                domestic_html+='<input name="domestic_logistics[area3][]" type="hidden" value="'+res.data['goods']['domestic_logistics']['areas'][i]['area3']['id']+'">\n'+
                    res.data['goods']['domestic_logistics']['areas'][i]['area3']['code_name'];
            }

            domestic_html+='                                                    </div>\n' +
                '                                                    <div class="area4">\n';

            if(res.data['goods']['domestic_logistics']['areas'][i]['area4'] != ''){
                domestic_html+='<input name="domestic_logistics[area4][]" type="hidden" value="'+res.data['goods']['domestic_logistics']['areas'][i]['area4']['id']+'">\n'+
                    res.data['goods']['domestic_logistics']['areas'][i]['area4']['code_name'];
            }

            domestic_html+='                                                        </div>\n' +
                '                                                    <div class="area5">\n';

            if(res.data['goods']['domestic_logistics']['areas'][i]['area5'] != ''){
                domestic_html+='<input name="domestic_logistics[area5][]" type="hidden" value="'+res.data['goods']['domestic_logistics']['areas'][i]['area5']['id']+'">\n'+
                    res.data['goods']['domestic_logistics']['areas'][i]['area5']['code_name'];
            }

            domestic_html+='                                                    </div>\n' +
                '                                                    <div class="area6">\n';

            if(res.data['goods']['domestic_logistics']['areas'][i]['area6'] != ''){
                domestic_html+='<input name="domestic_logistics[area6][]" type="hidden" value="'+res.data['goods']['domestic_logistics']['areas'][i]['area6']['id']+'">\n'+
                    res.data['goods']['domestic_logistics']['areas'][i]['area6']['code_name'];
            }

            domestic_html+='                                         </div>\n' +
                '                                                </div>\n' +
                '                                            </td>\n' +
                '                                            <td>\n' +
                '                                                <div class="disf">\n';
            if(i==0){
                domestic_html+='                                          <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_domestic_area(this)">+</div>\n';
            }
            else {
                domestic_html+='                                          <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_domestic_area(this)">-</div>\n';
                domestic_html+='                                          <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_domestic_area(this)">+</div>\n';
            }
            domestic_html+='                                     </div>\n' +
                '                                            </td>\n' +
                '                                        </tr>';
        }
        $('.domestic_logistics_div').find('.domestic_table').html(domestic_html);
    }
    else if(res.data['goods']['service_type']==2){
        //跨境配送
        let foreign_html = '';
        $('.domestic_logistics_div').hide();
        $('.foreign_logistics_div,.support_gather_div').show();
        $('#gather_method').val(res.data['goods']['gather_method']);
        $('#support_export').val(res.data['goods']['support_export']);
        if(res.data['goods']['gather_method']==2){
            $('.support_export').show();
            $('.support_gather_div').hide();
            if(res.data['goods']['support_export']==1){
                $('.support_gather_div').show();
            }
        }
        else if(res.data['goods']['gather_method']==1){
            $('.support_export').hide();
            $('.support_gather_div').hide();
        }
        if(res.data['goods']['support_export']==1){
            if(res.data['goods']['gather_countrys']!=null){
                for(let i=0;i<res.data['goods']['gather_countrys']['areas'].length;i++){
                    foreign_html += '<tr>\n' +
                        '                                                <td>\n' +
                        '                                                    <input name="gather_zhou[]" type="hidden" value="'+res.data['goods']['gather_countrys']['areas'][i]['area1']['id']+'">'+res.data['goods']['gather_countrys']['areas'][i]['area1']['param1']+
                        '                                                </td>\n' +
                        '                                                <td>\n' +
                        '                                                    <input name="gather_country[]" type="hidden" value="'+res.data['goods']['gather_countrys']['areas'][i]['area2']['id']+'">'+res.data['goods']['gather_countrys']['areas'][i]['area2']['param2']+
                        '                                                </td>\n' +
                        '                                                <td style="text-align:center;">\n' +
                        '                                                    <input name="gather_postal[]" type="hidden" value="'+res.data['goods']['gather_countrys']['gather_postal'][i]+'">\n';
                    foreign_html+='<div style="max-width:800px;white-space: nowrap;text-overflow: ellipsis;overflow:hidden;margin:0 auto;">\n';
                    for(let i2=0;i2<res.data['goods']['gather_countrys']['areas'][i]['area3'].length;i2++){
                        foreign_html+=res.data['goods']['gather_countrys']['areas'][i]['area3'][i2]['code_name']+'、';
                    }
                    foreign_html+='</div>';
                    foreign_html+='                                                </td>\n' +
                        '                                                <td>\n' +
                        '                                                    <div class="disf">\n';
                    if(i==0){
                        foreign_html+='                                                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_gather_country(this)">+</div>\n';
                    }
                    else{
                        foreign_html+='                                                        <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_gather_country(this)">-</div>\n'+
                            '                                                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_gather_country(this)">+</div>\n';
                    }
                    foreign_html+='                                      </div>\n' +
                        '                                                </td>\n' +
                        '                                            </tr>';
                }
            }
            else{
                foreign_html+='<tr>\n' +
                    '                                                <td>\n' +
                    '                                                    <select name="gather_zhou[]" lay-filter="gather_zhou">\n' +
                    '                                                        <option value="">请选择</option>\n';
                {volist name="type['zhou']" id="vo"}
                foreign_html+='                                                     <option value="{$vo['id']}">{$vo['param1']}</option>\n';
                {/volist}
                    foreign_html+='                                          </select>\n' +
                        '                                                </td>\n' +
                        '                                                <td></td>\n' +
                        '                                                <td></td>\n' +
                        '                                                <td>\n' +
                        '                                                    <div class="disf">\n' +
                        '                                                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_gather_country(this)">+</div>\n' +
                        '                                                    </div>\n' +
                        '                                                </td>\n' +
                        '                                            </tr>';
                }
                $('.support_gather_div').find('.gather_table').find('tbody').html(foreign_html);

            }
        }
        //物流支撑=============================================================end

    //其它费用=============================================================start
    if(res.data['goods']['otherfees_content']!==null && res.data['goods']['otherfees_content']!==''){
        let html = '';
        for(let i=0;i<res.data['goods']['otherfees_content']['fees_name'].length;i++){
            html+='<tr>\n' +
                '                                        <td>\n' +
                '                                            <input type="text" class="layui-input" name="fees_name[]" placeholder="费用名称" value="'+res.data['goods']['otherfees_content']['fees_name'][i]+'">\n' +
                '                                        </td>\n' +
                '                                        <td>\n' +
                '                                            <input type="text" class="layui-input" name="fees_desc[]" placeholder="费用描述" value="'+res.data['goods']['otherfees_content']['fees_desc'][i]+'">\n' +
                '                                        </td>\n' +
                '                                        <td>\n' +
                '                                            <div class="disf">\n' +
                '                                                <div class="condition_div w120">\n' +
                '                                                    <select name="fees_condition[]" lay-filter="fees_condition">\n';
            if(res.data['goods']['otherfees_content']['fees_condition'][i]==1){
                html+='                                                      <option value="1" selected>无条件触发</option>\n' +
                    '                                                        <option value="2">有条件触发</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_condition'][i]==2){
                html+='                                                      <option value="1" >无条件触发</option>\n' +
                    '                                                        <option value="2" selected>有条件触发</option>\n';
            }
            html+='                                              </select>\n' +
                '                                                </div>\n';
            if(res.data['goods']['otherfees_content']['fees_condition'][i]==1) {
                html+='                                                <div class="condition_div2" style="display: none;">\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_condition'][i]==2) {
                html+='                                                <div class="condition_div2" style="display: ;">\n';
            }
            html+='                                               <div class="disf">\n' +
                '                                                        <div class="trigger_div w100">\n' +
                '                                                            <select name="fees_trigger[]" lay-filter="fees_trigger">\n';
            if(res.data['goods']['otherfees_content']['fees_trigger'][i]==1) {
                html+='                                                          <option value="1" selected>要素触发</option>\n' +
                    '                                                                <option value="2">型号触发</option>\n' +
                    '                                                                <option value="3">物流触发</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger'][i]==2) {
                html+='                                                          <option value="1" >要素触发</option>\n' +
                    '                                                                <option value="2" selected>型号触发</option>\n' +
                    '                                                                <option value="3">物流触发</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger'][i]==3) {
                html+='                                                          <option value="1" >要素触发</option>\n' +
                    '                                                                <option value="2" >型号触发</option>\n' +
                    '                                                                <option value="3" selected>物流触发</option>\n';
            }
            html+='                                                      </select>\n' +
                '                                                        </div>\n' +
                '                                                        <!--要素触发-->\n';
            if(res.data['goods']['otherfees_content']['fees_trigger'][i]==1) {
                html+='                                                        <div class="trigger_div1">\n';
            }
            else{
                html+='                                                        <div class="trigger_div1" style="display: none;">\n';
            }
            html+='                                                      <div class="disf">\n' +
                '                                                                <div class="trigger_div1_box w100">\n' +
                '                                                                    <select name="fees_trigger2[]">\n';
            if(res.data['goods']['otherfees_content']['fees_trigger2'][i]==1) {
                html+='                                                                  <option value="1" selected>购买数量</option>\n' +
                    '                                                                        <option value="2">购买金额</option>\n';
            }
            else{
                html+='                                                                  <option value="1" >购买数量</option>\n' +
                    '                                                                    <option value="2" selected>购买金额</option>\n';
            }
            html+='                                                              </select>\n' +
                '                                                                </div>\n' +
                '                                                                <div class="trigger_div1_box w120">\n' +
                '                                                                    <select name="fees_trigger2_equal[]">\n';
            if(res.data['goods']['otherfees_content']['fees_trigger2_equal'][i]==1) {
                html+='                                                                  <option value="1" selected>少于</option>\n' +
                    '                                                                        <option value="2">少于或等于</option>\n' +
                    '                                                                        <option value="3">等于</option>\n' +
                    '                                                                        <option value="4">大于</option>\n' +
                    '                                                                        <option value="5">大于或等于</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger2_equal'][i]==2){
                html+='                                                                  <option value="1" >少于</option>\n' +
                    '                                                                        <option value="2" selected>少于或等于</option>\n' +
                    '                                                                        <option value="3">等于</option>\n' +
                    '                                                                        <option value="4">大于</option>\n' +
                    '                                                                        <option value="5">大于或等于</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger2_equal'][i]==3){
                html+='                                                                  <option value="1" >少于</option>\n' +
                    '                                                                        <option value="2" >少于或等于</option>\n' +
                    '                                                                        <option value="3">等于</option>\n' +
                    '                                                                        <option value="4" selected>大于</option>\n' +
                    '                                                                        <option value="5">大于或等于</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger2_equal'][i]==4){
                html+='                                                                  <option value="1" >少于</option>\n' +
                    '                                                                        <option value="2" >少于或等于</option>\n' +
                    '                                                                        <option value="3">等于</option>\n' +
                    '                                                                        <option value="4" selected>大于</option>\n' +
                    '                                                                        <option value="5">大于或等于</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger2_equal'][i]==5){
                html+='                                                                  <option value="1" >少于</option>\n' +
                    '                                                                        <option value="2" >少于或等于</option>\n' +
                    '                                                                        <option value="3">等于</option>\n' +
                    '                                                                        <option value="4">大于</option>\n' +
                    '                                                                        <option value="5" selected>大于或等于</option>\n';
            }
            html+='                                                               </select>\n' +
                '                                                                </div>\n' +
                '                                                                <input type="number" class="layui-input w100" name="fees_trigger2_num[]" placeholder="输入数值" value="'+res.data['goods']['otherfees_content']['fees_trigger2_num'][i]+'">\n' +
                '                                                                <div class="layui-input w70" style="line-height: 38px;padding-left:0;white-space:nowrap;">触发收费</div>\n' +
                '                                                            </div>\n' +
                '                                                        </div>\n' +
                '                                                        <!--型号触发-->\n';
            if(res.data['goods']['otherfees_content']['fees_trigger'][i]==2) {
                html+='                                                        <div class="trigger_div2">\n';
            }
            else{
                html+='                                                        <div class="trigger_div2" style="display: none;">\n';
            }
            html+='                                                      <div class="disf">\n' +
                '                                                                <div class="trigger_div2_box fees_options_trigger">\n' +
                '                                                                    <!--新增规格型号时触发-->\n' +
                '                                                                    <select name="fees_options[]" lay-search>\n';
            if(res.data['goods']['have_specs']==2){
                html+='                                                                  <option value="-1">暂无规格型号数据</option>\n';
            }
            else if(res.data['goods']['have_specs']==1){
                for(let i2=0;i2<res.data['goods']['havespecs'].length;i2++){
                    if(res.data['goods']['otherfees_content']['fees_options'][i]==res.data['goods']['havespecs'][i2]['sku_id']){
                        html+='<option value="'+res.data['goods']['havespecs'][i2]['sku_id']+'" selected>'+res.data['goods']['havespecs'][i2]['spec_names2']+'</option>';
                    }
                    else{
                        html+='<option value="'+res.data['goods']['havespecs'][i2]['sku_id']+'">'+res.data['goods']['havespecs'][i2]['spec_names2']+'</option>';
                    }
                }
            }
            html+='                                                              </select>\n' +
                '                                                                </div>\n' +
                '                                                                <div class="layui-input w70" style="line-height: 38px;padding-left:0;white-space:nowrap;">触发收费</div>\n' +
                '                                                            </div>\n' +
                '                                                        </div>\n' +
                '                                                        <!--物流触发-->\n';
            if(res.data['goods']['otherfees_content']['fees_trigger'][i]==3) {
                html+='                                                        <div class="trigger_div3">\n';
            }
            else{
                html+='                                                        <div class="trigger_div3" style="display: none;">\n';
            }
            html+='                                                     <div class="disf">\n' +
                '                                                                <div class="layui-input w70" style="line-height: 38px;padding-left: 0;">收货地点</div>\n' +
                '                                                                <div class="trigger_div3_box w100">\n' +
                '                                                                    <select name="fees_trigger2_area[]" lay-filter="fees_trigger2_area">\n';
            if(res.data['goods']['otherfees_content']['fees_trigger2_area'][i]==1 || res.data['goods']['otherfees_content']['fees_trigger2_area'][i]==''){
                html+='                                                                  <option value="1" selected>区域触发</option>\n' +
                    '                                                                    <option value="2">地点触发</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_trigger2_area'][i]==1){
                html+='                                                                  <option value="1" >区域触发</option>\n' +
                    '                                                                    <option value="2" selected>地点触发</option>\n';
            }

            html+='                                                              </select>\n' +
                '                                                                </div>\n';
            if(res.data['goods']['otherfees_content']['fees_trigger2_area'][i]==1 || res.data['goods']['otherfees_content']['fees_trigger2_area'][i]==''){
                html+='                                                           <div class="trigger_div3_box trigger_area1 w120">\n';
            }
            else{
                html+='                                                           <div class="trigger_div3_box trigger_area1 w120" style="display:none;">\n';
            }
            html+='                                                                    <select name="fees_trigger2_area1[]" lay-search>\n';
            if(res.data['goods']['service_type']==1){
                for(let i2=0;i2<res.data['goods']['domestic_logistics']['name'].length;i2++){
                    if(res.data['goods']['domestic_logistics']['name'][i2]==res.data['goods']['otherfees_content']['fees_trigger2_area1'][i]){
                        html+='                                                          <option value="'+res.data['goods']['domestic_logistics']['name'][i2]+'" selected>'+res.data['goods']['domestic_logistics']['name'][i2]+'</option>\n';
                    }
                    else{
                        html+='                                                          <option value="'+res.data['goods']['domestic_logistics']['name'][i2]+'">'+res.data['goods']['domestic_logistics']['name'][i2]+'</option>\n';
                    }
                }
            }
            else{
                html+='                                                                  <option value="-1">暂无区域信息</option>\n';
            }
            html+='                                                              </select>\n' +
                '                                                                </div>\n';
            if(res.data['goods']['otherfees_content']['fees_trigger2_area'][i]==2){
                html+='                                                           <div class="trigger_div3_box trigger_area2">\n';
            }
            else{
                html+='                                                           <div class="trigger_div3_box trigger_area2" style="display:none;">\n';
            }
            html+='                                                              <div class="disf">\n' +
                '                                                                        <div class="area1">\n';
            if(res.data['goods']['otherfees_content']['areas'][i]['area1'] != ''){
                html+='<input name="other_fees_area[area1][]" type="hidden" value="'+res.data['goods']['otherfees_content']['areas'][i]['area1']['id']+'">\n'+
                    res.data['goods']['otherfees_content']['areas'][i]['area1']['code_name'];
            }
            else{
                html+=otherFeesArea_html;
            }

            html+='                                                                  </div>\n' +
                '                                                                        <div class="area2">\n';
            if(res.data['goods']['otherfees_content']['areas'][i]['area2'] != ''){
                html+='<input name="other_fees_area[area2][]" type="hidden" value="'+res.data['goods']['otherfees_content']['areas'][i]['area2']['id']+'">\n'+
                    res.data['goods']['otherfees_content']['areas'][i]['area2']['code_name'];
            }
            html+='                                                                  </div>\n' +
                '                                                                        <div class="area3">\n';
            if(res.data['goods']['otherfees_content']['areas'][i]['area3'] != ''){
                html+='<input name="other_fees_area[area3][]" type="hidden" value="'+res.data['goods']['otherfees_content']['areas'][i]['area3']['id']+'">\n'+
                    res.data['goods']['otherfees_content']['areas'][i]['area3']['code_name'];
            }
            html+='                                                                  </div>\n' +
                '                                                                        <div class="area4">\n';
            if(res.data['goods']['otherfees_content']['areas'][i]['area4'] != ''){
                html+='<input name="other_fees_area[area4][]" type="hidden" value="'+res.data['goods']['otherfees_content']['areas'][i]['area4']['id']+'">\n'+
                    res.data['goods']['otherfees_content']['areas'][i]['area4']['code_name'];
            }
            html+='                                                                  </div>\n' +
                '                                                                        <div class="area5">\n';
            if(res.data['goods']['otherfees_content']['areas'][i]['area5'] != ''){
                html+='<input name="other_fees_area[area5][]" type="hidden" value="'+res.data['goods']['otherfees_content']['areas'][i]['area5']['id']+'">\n'+
                    res.data['goods']['otherfees_content']['areas'][i]['area5']['code_name'];
            }
            html+='                                                                  </div>\n' +
                '                                                                        <div class="area6">\n';
            if(res.data['goods']['otherfees_content']['areas'][i]['area6'] != ''){
                html+='<input name="other_fees_area[area6][]" type="hidden" value="'+res.data['goods']['otherfees_content']['areas'][i]['area6']['id']+'">\n'+
                    res.data['goods']['otherfees_content']['areas'][i]['area6']['code_name'];
            }
            html+='                                                                  </div>\n';
            html+='                                                                  <input class="layui-input" name="other_fees_area[detail_area][]" placeholder="具体地址" value="'+res.data['goods']['otherfees_content']['areas'][i]['detail_area']+'">\n'+
                '                                                                     </div>\n' +
                '                                                                </div>\n' +
                '                                                            </div>\n' +
                '                                                        </div>\n' +
                '                                                    </div>\n' +
                '                                                </div>\n' +
                '                                            </div>\n' +
                '                                        </td>\n' +
                '                                        <td>\n' +
                '                                            <div class="disf">\n' +
                '                                                <div class="fees_standard w100">\n' +
                '                                                    <select name="fees_standard[]" lay-filter="fees_standard">\n';
            if(res.data['goods']['otherfees_content']['fees_standard'][i]==1) {
                html+='                                                        <option value="1" selected>定额计价</option>\n' +
                    '                                                        <option value="2">比例计价</option>\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_standard'][i]==2) {
                html+='                                                        <option value="1" >定额计价</option>\n' +
                    '                                                        <option value="2" selected>比例计价</option>\n';
            }
            html+='                                                </select>\n' +
                '                                                </div>\n';
            if(res.data['goods']['otherfees_content']['fees_standard'][i]==1) {
                html+='                                                <div class="fees_standard_div1">\n';
            }
            else if(res.data['goods']['otherfees_content']['fees_standard'][i]==2) {
                html+='                                                <div class="fees_standard_div1" style="display: none;">\n';
            }
            html+='                                                    <div class="disf">\n' +
                '                                                        <div class="fees_standard_box w100">\n' +
                '                                                            <select name="fees_standard_currency[]" lay-search>\n';
            {volist name="type['currency']" id="vo"}
            if(res.data['goods']['otherfees_content']['fees_standard_currency'][i]=={$vo['id']}) {
                html += '                                                            <option value="{$vo['id']}" selected>{$vo['currency_symbol_standard']}</option>\n';
            }
            else{
                html += '                                                            <option value="{$vo['id']}">{$vo['currency_symbol_standard']}</option>\n';
            }
            {/volist}
                html += '                                                    </select>\n' +
                    '                                                        </div>\n' +
                    '                                                        <div class="fees_standard_box w120">\n' +
                    '                                                            <input type="number" class="layui-input" name="fees_standard_price[]" placeholder="金额" value="'+res.data['goods']['otherfees_content']['fees_standard_price'][i]+'">\n' +
                    '                                                        </div>\n' +
                    '                                                        <div class="fees_standard_box w100">\n' +
                    '                                                            <select name="fees_standard_unit[]" lay-search>\n';
                {volist name="type['unit']" id="vo2"}
                if(res.data['goods']['otherfees_content']['fees_standard_unit'][i]=="{$vo2['code_value']}") {
                    html += '                                                            <option value="{$vo2['code_value']}" selected>{$vo2['code_name']}</option>\n';
                }
                else{
                    html += '                                                            <option value="{$vo2['code_value']}">{$vo2['code_name']}</option>\n';
                }
                {/volist}
                    html += '                                                    </select>\n' +
                        '                                                        </div>\n' +
                        '                                                    </div>\n' +
                        '                                                </div>\n';
                    if(res.data['goods']['otherfees_content']['fees_standard'][i]==2) {
                        html+='                                                <div class="fees_standard_div2">\n';
                    }
                    else if(res.data['goods']['otherfees_content']['fees_standard'][i]==1) {
                        html+='                                                <div class="fees_standard_div2" style="display: none;">\n';
                    }
                    html+='                                              <div class="disf">\n' +
                        '                                                        <div class="fees_standard_box w100">\n' +
                        '                                                            <select name="fees_standard_ratio[]" lay-filter="fees_standard_ratio">\n';
                    if(res.data['goods']['otherfees_content']['fees_standard_ratio'][i]==1) {
                        html+='                                                                <option value="1" selected>计费基数</option>\n' +
                            '                                                                <option value="2">计费比率</option>\n';
                    }
                    else if(res.data['goods']['otherfees_content']['fees_standard_ratio'][i]==2) {
                        html += '                                                                <option value="1" >计费基数</option>\n' +
                            '                                                                <option value="2" selected>计费比率</option>\n';
                    }
                    html += '                                                     </select>\n' +
                        '                                                        </div>\n';
                    if(res.data['goods']['otherfees_content']['fees_standard_ratio'][i]==1) {
                        html+='                                                        <div class="fees_standard_ratio_div1 w100">\n';
                    }
                    else{
                        html+='                                                        <div class="fees_standard_ratio_div1 w100" style="display: none;">\n';
                    }
                    html+='                                                       <input type="number" class="layui-input" name="fees_standard_ratio_price[]" placeholder="输入金额" value="'+res.data['goods']['otherfees_content']['fees_standard_ratio_price'][i]+'">\n' +
                        '                                                        </div>\n';
                    if(res.data['goods']['otherfees_content']['fees_standard_ratio'][i]==2) {
                        html+='                                                        <div class="fees_standard_ratio_div2 w120" style="display: ;">\n';
                    }
                    else{
                        html+='                                                        <div class="fees_standard_ratio_div2 w120" style="display: none;">\n';
                    }
                    html+='                                                     <div class="disf">\n' +
                        '                                                                <input type="number" class="layui-input" name="fees_standard_ratio_ratio[]" placeholder="输入比率" value="'+res.data['goods']['otherfees_content']['fees_standard_ratio_ratio'][i]+'">\n' +
                        '                                                                <div class="layui-input" style="width:35px;line-height: 38px;padding-left:0;">%</div>\n' +
                        '                                                            </div>\n' +
                        '                                                        </div>\n' +
                        '                                                    </div>\n' +
                        '                                                </div>\n' +
                        '                                            </div>\n' +
                        '                                        </td>\n' +
                        '                                        <td>\n' +
                        '                                            <div class="disf">\n';
                    if(i==0){
                        html+='                                                <div class="layui-btn layui-btn-md layui-btn-normal" onclick="fees_add(this)">+</div>\n';
                    }
                    else{
                        html+='                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="fees_del(this)">-</div>\n'+
                            '                                                <div class="layui-btn layui-btn-md layui-btn-normal" onclick="fees_add(this)">+</div>\n';
                    }
                    html+='                                      </div>\n' +
                        '                                        </td>\n' +
                        '                                    </tr>';
                }
                $('.fees_table').find('tbody').html(html);
            }
            //其它费用=============================================================end

    //价格说明=============================================================start
    //减免
    if(res.data['goods']['reduction_content']!==null){
        let html = '';
        for(let i=0;i<res.data['goods']['reduction_content']['preferential_blong'].length;i++){
            html += '<tr>\n' +
                '                                                    <td>\n' +
                '                                                        <select id="goodsmodel-preferential_blong" class="form-control chosen-select" name="reduction[preferential_blong][]">\n';
            if(res.data['goods']['reduction_content']['preferential_blong'][i]==1){
                html +='                                                            <option value="1" selected>卖家优惠</option>\n' +
                    '                                                            <option value="2">平台优惠</option>\n' +
                    '                                                            <option value="3">他方优惠</option>\n';
            }
            else if(res.data['goods']['reduction_content']['preferential_blong'][i]==2){
                html +='                                                            <option value="1" >卖家优惠</option>\n' +
                    '                                                            <option value="2" selected>平台优惠</option>\n' +
                    '                                                            <option value="3">他方优惠</option>\n';
            }
            else if(res.data['goods']['reduction_content']['preferential_blong'][i]==3){
                html +='                                                            <option value="1" >卖家优惠</option>\n' +
                    '                                                            <option value="2" >平台优惠</option>\n' +
                    '                                                            <option value="3" selected>他方优惠</option>\n';
            }
            html +='                                                 </select>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <select id="goodsmodel-reduction_type" class="form-control chosen-select" name="reduction[type][]" lay-filter="reduction_type">\n' +
                '                                                            <option value="">请选择规则</option>\n';
            {volist name="type['reduction_rule']" id="v"}
            if({$v['id']}==res.data['goods']['reduction_content']['type'][i]){
                html +='                                                    <option value="{$v['id']}" data-name1="{$v['content'][0]}" data-name2="{$v['content'][2]}" selected>{$v['name']}</option>\n';
            }
            else{
                html +='                                                    <option value="{$v['id']}" data-name1="{$v['content'][0]}" data-name2="{$v['content'][2]}">{$v['name']}</option>\n';
            }
            {/volist}
                html +='                                                 </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select id="goodsmodel-reduction_strict" class="form-control chosen-select" name="reduction[strict][]">\n';
                if(res.data['goods']['reduction_content']['strict'][i]==1){
                    html +='                                                            <option value="1" selected>单独</option>\n' +
                        '                                                            <option value="2">叠加</option>\n';
                }
                else if(res.data['goods']['reduction_content']['strict'][i]==2){
                    html +='                                                            <option value="1">单独</option>\n' +
                        '                                                            <option value="2" selected>叠加</option>\n';
                }
                html +='                                                 </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf" style="width:100%;justify-content: center;">\n' +
                    '                                                            <div class="name1">\n';
                {volist name="type['reduction_rule']" id="v"}
                if({$v['id']}==res.data['goods']['reduction_content']['type'][i]){
                    html +='                                                          {$v['content'][0]}';
                }
                {/volist}
                    html += '                                                    </div>\n' +
                        '                                                            <input type="number" class="layui-input w100" name="reduction[price1][]" placeholder="数值" value="'+res.data['goods']['reduction_content']['price1'][i]+'">\n' +
                        '                                                            <div class="name2">\n';
                    {volist name="type['reduction_rule']" id="v"}
                    if({$v['id']}==res.data['goods']['reduction_content']['type'][i]){
                        html +='                                                          {$v['content'][2]}';
                    }
                    {/volist}
                        html += '                                                    </div>\n' +
                            '                                                            <input type="number" class="layui-input w100" name="reduction[price2][]" placeholder="数值" value="'+res.data['goods']['reduction_content']['price2'][i]+'">\n' +
                            '                                                        </div>\n' +
                            '                                                    </td>\n' +
                            '                                                    <td style="width: 140px;">\n' +
                            '                                                        <div class="disf">\n';
                        if(i==0){
                            html+='                                                   <div class="layui-btn layui-btn-md layui-btn-normal" onclick="reduction_add(this)">+</div>\n';
                        }
                        else{
                            html+='                                                   <div class="layui-btn layui-btn-md layui-btn-danger" onclick="reduction_del(this)">-</div>\n'+
                                '                                                   <div class="layui-btn layui-btn-md layui-btn-normal" onclick="reduction_add(this)">+</div>\n';
                        }

                        html +='                                                 </div>\n' +
                            '                                                    </td>\n' +
                            '                                                </tr>';
                    }
                    $('.reduction_div').find('tbody').html(html);
                }

                //随赠
                if(res.data['goods']['gift_content']!==null){
                    let html = '';

                    for(let i=0;i<res.data['goods']['gift_content']['preferential_blong'].length;i++){
                        html += '<tr>\n' +
                            '                     <td>\n' +
                            '                       <select id="goodsmodel-preferential_blong" class="form-control chosen-select" name="gift[preferential_blong][]">\n';
                        if(res.data['goods']['gift_content']['preferential_blong'][i]==1){
                            html +='                                                            <option value="1" selected>卖家优惠</option>\n' +
                                '                                                            <option value="2">平台优惠</option>\n' +
                                '                                                            <option value="3">他方优惠</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['preferential_blong'][i]==2){
                            html +='                                                            <option value="1" >卖家优惠</option>\n' +
                                '                                                            <option value="2" selected>平台优惠</option>\n' +
                                '                                                            <option value="3">他方优惠</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['preferential_blong'][i]==3){
                            html +='                                                            <option value="1" >卖家优惠</option>\n' +
                                '                                                            <option value="2" >平台优惠</option>\n' +
                                '                                                            <option value="3" selected>他方优惠</option>\n';
                        }
                        html+='                                                  </select>\n' +
                            '                                                    </td>\n' +
                            '                                                    <td>\n' +
                            '                                                        <select id="goodsmodel-gift_type" class="form-control chosen-select" name="gift[type][]" lay-filter="gift_type">\n' +
                            '                                                            <option value="">请选择项目</option>\n';
                        if(res.data['goods']['gift_content']['type'][i]==1){
                            html +='                                                            <option value="1" selected>积分</option>\n' +
                                '                                                            <option value="2">卡券</option>\n' +
                                '                                                            <option value="3">随赠</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['type'][i]==2){
                            html +='                                                            <option value="1" >积分</option>\n' +
                                '                                                            <option value="2" selected>卡券</option>\n' +
                                '                                                            <option value="3">随赠</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['type'][i]==3){
                            html +='                                                            <option value="1" >积分</option>\n' +
                                '                                                            <option value="2" >卡券</option>\n' +
                                '                                                            <option value="3" selected>随赠</option>\n';
                        }
                        else{
                            html +='                                                            <option value="1">积分</option>\n' +
                                '                                                                   <option value="2">卡券</option>\n' +
                                '                                                                   <option value="3">随赠</option>\n';
                        }
                        html +='                                                     </select>\n';
                        if(res.data['goods']['gift_content']['type'][i]==1){
                            html +='                                                        <div class="points_coupon_div">\n';
                        }
                        else{
                            html +='                                                        <div class="points_coupon_div" style="display:none;">\n';
                        }
                        html +='                                                    <div class="disf">\n' +
                            '                                                                <span class="gift_span">运营商：</span><select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[operaer][]" lay-filter="gift_type">\n';
                        if(res.data['goods']['gift_content']['operaer'][i]==1){
                            html +='                                                            <option value="1" selected>平台</option>\n' +
                                '                                                            <option value="2">卖家</option>\n' +
                                '                                                            <option value="3">他方</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['operaer'][i]==2){
                            html +='                                                            <option value="1" >平台</option>\n' +
                                '                                                            <option value="2" selected>卖家</option>\n' +
                                '                                                            <option value="3">他方</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['operaer'][i]==3){
                            html +='                                                            <option value="1" >平台</option>\n' +
                                '                                                            <option value="2" >卖家</option>\n' +
                                '                                                            <option value="3" selected>他方</option>\n';
                        }
                        html +='                                                          </select>\n' +
                            '                                                            </div>\n' +
                            '                                                        </div>\n';
                        if(res.data['goods']['gift_content']['type'][i]==1){
                            html +='                                                  <div class="points_div" style="display: ;">\n';
                        }else{
                            html +='                                                  <div class="points_div" style="display: none;">\n';
                        }
                        html +='                                                     <div class="disf">\n' +
                            '                                                                <span class="gift_span">按：</span><select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[points_type][]"  lay-filter="points_type">\n';
                        if(res.data['goods']['gift_content']['points_type'][i]==1){
                            html +='                                                            <option value="1" selected>订单/次</option>\n' +
                                '                                                            <option value="2">金额</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['points_type'][i]==2){
                            html +='                                                            <option value="1" >订单/次</option>\n' +
                                '                                                            <option value="2" selected>金额</option>\n';
                        }
                        html +='                                                     </select>\n' +
                            '                                                            </div>\n';
                        if(res.data['goods']['gift_content']['points_type'][i]==1){
                            html +='                                                     <div class="disf points_money" style="display: none;">\n';
                        }
                        else{
                            html +='                                                     <div class="disf points_money" style="display: ;">\n';
                        }
                        html +='                                                          <input type="number" class="layui-input" name="gift[points_money][]" placeholder="金额" value="'+res.data['goods']['gift_content']['points_money'][i]+'">\n' +
                            '                                                            </div>\n' +
                            '                                                            <div class="disf">\n' +
                            '                                                                <span class="gift_span">送：</span><input type="number" class="layui-input" name="gift[points_send][]" placeholder="赠送值" value="'+res.data['goods']['gift_content']['points_send'][i]+'">\n' +
                            '                                                            </div>\n' +
                            '                                                        </div>\n';
                        if(res.data['goods']['gift_content']['type'][i]==2){
                            html +='                                                 <div class="coupon_div" style="display: ;">\n';
                        }
                        else{
                            html +='                                                 <div class="coupon_div" style="display: none;">\n';
                        }
                        html +='                                                     <div class="disf">\n' +
                            '                                                                <span class="gift_span">面值：</span>\n' +
                            '                                                                <input type="number" class="layui-input" name="gift[coupon_money][]" placeholder="金额" value="'+res.data['goods']['gift_content']['coupon_money'][i]+'">\n' +
                            '                                                                <input type="number" class="layui-input" name="gift[coupon_num][]" placeholder="数量" value="'+res.data['goods']['gift_content']['coupon_num'][i]+'">\n' +
                            '                                                            </div>\n' +
                            '                                                        </div>\n';
                        if(res.data['goods']['gift_content']['type'][i]==3){
                            html +='                                                        <div class="accgift_div" style="display: ;">\n';
                        }
                        else{
                            html +='                                                        <div class="accgift_div" style="display: none;">\n';
                        }
                        html +='                                                      <div class="disf">\n' +
                            '                                                                <span class="gift_span">类别：</span><select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[accgift_type][]" lay-filter="accgift_type">\n';
                        if(res.data['goods']['gift_content']['accgift_type'][i]==1){
                            html +='                                                            <option value="1" selected>虚拟</option>\n' +
                                '                                                            <option value="2">服务</option>\n'+
                                '                                                            <option value="3">实物</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['accgift_type'][i]==2){
                            html +='                                                            <option value="1" >虚拟</option>\n' +
                                '                                                            <option value="2" selected>服务</option>\n'+
                                '                                                            <option value="3">实物</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['accgift_type'][i]==3){
                            html +='                                                            <option value="1" >虚拟</option>\n' +
                                '                                                            <option value="2" >服务</option>\n'+
                                '                                                            <option value="3" selected>实物</option>\n';
                        }
                        html +='                                                         </select>\n' +
                            '                                                                <input type="text" class="layui-input" name="gift[accgift_content][]" placeholder="内容" value="'+res.data['goods']['gift_content']['accgift_content'][i]+'">\n' +
                            '                                                                <input type="number" class="layui-input" name="gift[accgift_num][]" placeholder="数量" value="'+res.data['goods']['gift_content']['accgift_num'][i]+'">\n' +
                            '                                                            </div>\n' +
                            '                                                        </div>\n' +
                            '                                                    </td>\n' +
                            '                                                    <td>\n' +
                            '                                                        <select id="goodsmodel-gift_strict" class="form-control chosen-select" name="gift[strict][]">\n';
                        if(res.data['goods']['gift_content']['strict'][i]==1){
                            html +='                                                            <option value="1" selected>单独</option>\n' +
                                '                                                            <option value="2">叠加</option>\n';
                        }
                        else if(res.data['goods']['gift_content']['strict'][i]==2){
                            html +='                                                            <option value="1" >单独</option>\n' +
                                '                                                            <option value="2" selected>叠加</option>\n';
                        }
                        html +='                                                 </select>\n' +
                            '                                                    </td>\n' +
                            '                                                    <td style="width:140px;">\n' +
                            '                                                        <div class="disf">\n';
                        if(i==0){
                            html +='                                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="gift_add(this)">+</div>\n';
                        }
                        else{
                            html +='                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="gift_del(this)">-</div>\n'+
                                '                                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="gift_add(this)">+</div>\n';
                        }

                        html +='                                                 </div>\n' +
                            '                                                    </td>\n' +
                            '                                                </tr>';
                    }
                    $('.gift_div').find('tbody').html(html);
                }

                //价格未含
                if(res.data['goods']['noinclude_content']!==null){
                    let html = '';

                    for(let i=0;i<res.data['goods']['noinclude_content']['name'].length;i++){
                        html += '<tr>\n' +
                            '                                                    <td>\n' +
                            '                                                        <input type="text" id="noinclude-name" class="layui-input" name="noinclude[name][]" data-anchor="费用名称" placeholder="费用名称" value="'+res.data['goods']['noinclude_content']['name'][i]+'">\n' +
                            '                                                    </td>\n' +
                            '                                                    <td>\n' +
                            '                                                        <input type="text" id="noinclude-desc" class="layui-input" name="noinclude[desc][]" data-anchor="摘要描述" placeholder="摘要描述" value="'+res.data['goods']['noinclude_content']['desc'][i]+'">\n' +
                            '                                                    </td>\n' +
                            '                                                    <td>\n' +
                            '                                                        <input type="text" id="noinclude-price" class="layui-input" name="noinclude[price][]" data-anchor="计量单价" placeholder="计量单价" value="'+res.data['goods']['noinclude_content']['price'][i]+'">\n' +
                            '                                                    </td>\n' +
                            '                                                    <td style="width: 140px;">\n' +
                            '                                                        <div class="disf">\n';
                        if(i==0){
                            html +='                                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="noinclude_add(this)">+</div>\n';
                        }
                        else{
                            html +='                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="noinclude_del(this)">-</div>\n'+
                                '                                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="noinclude_add(this)">+</div>\n';
                        }
                        html +='                                                        </div>\n' +
                            '                                                    </td>\n' +
                            '                                                </tr>';
                    }
                    $('.noinclude_table').find('tbody').html(html);
                }

                //潜在收费
                if(res.data['goods']['potential_content']!==null){
                    let html = '';

                    for(let i=0;i<res.data['goods']['potential_content']['name'].length;i++){
                        html += '<tr>\n' +
                            '                                                    <td>\n' +
                            '                                                        <select id="noinclude-currency" class="form-control chosen-select" name="potential[currency][]">\n';
                        {volist name="type['currency']" id="v"}
                        if(res.data['goods']['potential_content']['currency'][i]=={$v['id']}){
                            html +='                                                     <option value="{$v['id']}" selected>{$v['currency_symbol_standard']}</option>\n';
                        }
                        else{
                            html +='                                                     <option value="{$v['id']}">{$v['currency_symbol_standard']}</option>\n';
                        }
                        {/volist}
                            html += '                                                </select>\n' +
                                '                                                    </td>\n' +
                                '                                                    <td>\n' +
                                '                                                        <input type="text" id="noinclude-name" class="layui-input" name="potential[name][]" data-anchor="费用名称" placeholder="费用名称" value="'+res.data['goods']['potential_content']['name'][i]+'">\n' +
                                '                                                    </td>\n' +
                                '                                                    <td>\n' +
                                '                                                        <input type="text" id="noinclude-desc" class="layui-input" name="potential[desc][]" data-anchor="摘要描述" placeholder="摘要描述" value="'+res.data['goods']['potential_content']['desc'][i]+'">\n' +
                                '                                                    </td>\n' +
                                '                                                    <td>\n' +
                                '                                                        <input type="text" id="noinclude-price" class="layui-input" name="potential[price][]" data-anchor="计量单价" placeholder="计量单价" value="'+res.data['goods']['potential_content']['price'][i]+'">\n' +
                                '                                                    </td>\n' +
                                '                                                    <td style="width: 140px;">\n' +
                                '                                                        <div class="disf">\n';
                            if(i==0){
                                html +='                                                 <div class="layui-btn layui-btn-md layui-btn-normal" onclick="potential_add(this)">+</div>\n';
                            }
                            else{
                                html +='                                                 <div class="layui-btn layui-btn-md layui-btn-danger" onclick="potential_del(this)">-</div>\n'+
                                    '                                                        <div class="layui-btn layui-btn-md layui-btn-normal" onclick="potential_add(this)">+</div>\n';
                            }
                            html +='                                                 </div>\n' +
                                '                                                    </td>\n' +
                                '                                                </tr>';
                        }
                        $('.potential_table').find('tbody').html(html);
                    }
                    //价格说明=============================================================end

    //商品促销=============================================================start
    if(res.data['goods']['activity_info']!==null){
        activity.setValue(res.data['goods']['activity_info']);
    }
    if(res.data['goods']['other_keywords']!='') {
        $('input[name="other_keywords"]').val(res.data['goods']['other_keywords']);
    }
    //商品促销=============================================================end

    //商品详情=============================================================start
    //==制造企业
    if(res.data['goods']['manufacture']!=null && res.data['goods']['manufacture']!=''){
        let spec_html = '';
        spec_html+='<tbody class="manufacture_tbody">\n' +
            '                                                <tr>\n' +
            '                                                    <td rowspan="5">制造企业</td>\n';
        if(typeof(res.data['goods']['manufacture']['company_name']) != 'undefined') {
            spec_html += '                                         <td>\n' +
                '                                                        <input type="text" class="layui-input" placeholder="企业名称" value="企业名称" readonly>\n' +
                '                                                    </td>\n'+
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" name="manufacture[company_name]" placeholder="参数描述" value="' + res.data['goods']['manufacture']['company_name'] + '">\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>\n' +
                '                                                        </div>\n' +
                '                                                    </td>\n';
        }
        spec_html+='                                      </tr>\n';
        if(typeof(res.data['goods']['manufacture']['country']) != 'undefined') {
            spec_html+='                                     <tr>\n' +
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" placeholder="注册地址" value="注册地址" readonly>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="country_sel">\n' +
                '                                                                <select name="manufacture[country]" lay-search lay-filter="manufacture_country">\n' +
                '                                                                    <option value="">请选择</option>\n';
            {volist name="type['country']" id="vo"}
            if(res.data['goods']['manufacture']['country']=="{$vo['id']}"){
                spec_html+='                                                                <option value="{$vo['id']}" selected>{$vo['param2']}</option>\n';
            }
            else{
                spec_html+='                                                                <option value="{$vo['id']}">{$vo['param2']}</option>\n';
            }
            {/volist}
                spec_html+='                                                     </select>\n' +
                    '                                                            </div>\n' +
                    '                                                            <div class="manufacture_area disf">\n';
                if(typeof(res.data['goods']['manufacture']['area1']) != 'undefined') {
                    spec_html+='<div class="area1"><select name="manufacture[area1]"><option value="'+res.data['goods']['manufacture']['area1']+'">'+res.data['goods']['manufacture']['area1_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['manufacture']['area2']) != 'undefined') {
                    spec_html+='<div class="area2"><select name="manufacture[area2]"><option value="'+res.data['goods']['manufacture']['area2']+'">'+res.data['goods']['manufacture']['area2_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['manufacture']['area3']) != 'undefined') {
                    spec_html+='<div class="area3"><select name="manufacture[area3]"><option value="'+res.data['goods']['manufacture']['area3']+'">'+res.data['goods']['manufacture']['area3_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['manufacture']['area4']) != 'undefined') {
                    spec_html+='<div class="area4"><select name="manufacture[area4]"><option value="'+res.data['goods']['manufacture']['area4']+'">'+res.data['goods']['manufacture']['area4_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['manufacture']['area5']) != 'undefined') {
                    spec_html+='<div class="area5"><select name="manufacture[area5]"><option value="'+res.data['goods']['manufacture']['area5']+'">'+res.data['goods']['manufacture']['area5_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['manufacture']['area6']) != 'undefined') {
                    spec_html+='<div class="area6"><select name="manufacture[area6]"><option value="'+res.data['goods']['manufacture']['area6']+'">'+res.data['goods']['manufacture']['area6_name']+'</option></select></div>';
                }
                spec_html+='                                                 </div>\n' +
                    '                                                            <input type="text" class="layui-input" name="manufacture[address]" placeholder="具体地址" value="'+res.data['goods']['manufacture']['address']+'">\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
    if(typeof(res.data['goods']['manufacture']['connect_type']) != 'undefined') {
        spec_html += '                                         <tr>\n' +
            '                                                    <td>\n' +
            '                                                        <select name="manufacture[connect_type]">\n';
        if (res.data['goods']['manufacture']['connect_type'] == '联系电话') {
            spec_html += '                                                         <option value="联系电话" selected>联系电话</option>\n';
        } else {
            spec_html += '                                                         <option value="联系电话">联系电话</option>\n';
        }
        if (res.data['goods']['manufacture']['connect_type'] == '联系邮箱') {
            spec_html += '                                                         <option value="联系邮箱" selected>联系邮箱</option>\n';
        } else {
            spec_html += '                                                         <option value="联系邮箱">联系邮箱</option>\n';
        }
        if (res.data['goods']['manufacture']['connect_type'] == '联系网址') {
            spec_html += '                                                         <option value="联系网址" selected>联系网址</option>\n';
        } else {
            spec_html += '                                                         <option value="联系网址">联系网址</option>\n';
        }
        spec_html += '                                                  </select>\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" name="manufacture[connect_info]" placeholder="参数描述" value="' + res.data['goods']['manufacture']['connect_info'] + '">\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
            '                                                        </div>\n' +
            '                                                    </td>\n' +
            '                                                </tr>\n';
    }
    if(typeof(res.data['goods']['manufacture']['product_license']) != 'undefined') {
        spec_html += '                                       <tr>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" placeholder="生产许可" value="生产许可" readonly>\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" name="manufacture[product_license]" placeholder="参数描述" value="'+res.data['goods']['manufacture']['product_license']+'">\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
            '                                                        </div>\n' +
            '                                                    </td>\n' +
            '                                                </tr>\n';
    }
    if(typeof(res.data['goods']['manufacture']['product_standard']) != 'undefined') {
        spec_html+='                                     <tr>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" placeholder="生产标准" value="生产标准" readonly>\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" name="manufacture[product_standard]" placeholder="参数描述" value="'+res.data['goods']['manufacture']['product_standard']+'">\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
            '                                                        </div>\n' +
            '                                                    </td>\n' +
            '                                                </tr>\n';
    }
    spec_html+='                                 </tbody>';

    $('.spec_table').find('.normal_tbody').remove();
    $('.spec_table').find('.manufacture_tbody').remove();
    $('.spec_table').append(spec_html);
}
//==销售企业
if(res.data['goods']['sales']!=null && res.data['goods']['sales']!='') {
    let spec_html = '';
    spec_html+='<tbody class="sale_tbody">\n' +
        '                                                <tr>\n' +
        '                                                    <td rowspan="4">销售企业</td>\n';
    if(typeof(res.data['goods']['sales']['company_name']) != 'undefined') {
        spec_html+='                                         <td>\n' +
            '                                                        <input type="text" class="layui-input" placeholder="企业名称" value="企业名称" readonly>\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" name="sales[company_name]" placeholder="参数描述" value="'+res.data['goods']['sales']['company_name']+'">\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>\n' +
            '                                                        </div>\n' +
            '                                                    </td>\n';
    }
    spec_html+='                                     </tr>\n';
    if(typeof(res.data['goods']['sales']['country']) != 'undefined') {
        spec_html+='                                     <tr>\n' +
            '                                                    <td>\n' +
            '                                                        <input type="text" class="layui-input" placeholder="注册地址" value="注册地址" readonly>\n' +
            '                                                    </td>\n' +
            '                                                    <td>\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="country_sel">\n' +
            '                                                                <select name="sales[country]" lay-search lay-filter="sales_country">\n' +
            '                                                                    <option value="">请选择</option>\n';
        {volist name="type['country']" id="vo"}
        if(res.data['goods']['sales']['country']=="{$vo['id']}"){
            spec_html+='                                                                <option value="{$vo['id']}" selected>{$vo['param2']}</option>\n';
        }
        else{
            spec_html+='                                                                <option value="{$vo['id']}">{$vo['param2']}</option>\n';
        }
        {/volist}
            spec_html+='                                                     </select>\n' +
                '                                                            </div>\n' +
                '                                                            <div class="sales_area disf">\n';
            if(typeof(res.data['goods']['sales']['area1']) != 'undefined') {
                spec_html+='<div class="area1"><select name="sales[area1]"><option value="'+res.data['goods']['sales']['area1']+'">'+res.data['goods']['sales']['area1_name']+'</option></select></div>';
            }
            if(typeof(res.data['goods']['sales']['area2']) != 'undefined') {
                spec_html+='<div class="area2"><select name="sales[area2]"><option value="'+res.data['goods']['sales']['area2']+'">'+res.data['goods']['sales']['area2_name']+'</option></select></div>';
            }
            if(typeof(res.data['goods']['sales']['area3']) != 'undefined') {
                spec_html+='<div class="area3"><select name="sales[area3]"><option value="'+res.data['goods']['sales']['area3']+'">'+res.data['goods']['sales']['area3_name']+'</option></select></div>';
            }
            if(typeof(res.data['goods']['sales']['area4']) != 'undefined') {
                spec_html+='<div class="area4"><select name="sales[area4]"><option value="'+res.data['goods']['sales']['area4']+'">'+res.data['goods']['sales']['area4_name']+'</option></select></div>';
            }
            if(typeof(res.data['goods']['sales']['area5']) != 'undefined') {
                spec_html+='<div class="area5"><select name="sales[area5]"><option value="'+res.data['goods']['sales']['area5']+'">'+res.data['goods']['sales']['area5_name']+'</option></select></div>';
            }
            if(typeof(res.data['goods']['sales']['area6']) != 'undefined') {
                spec_html+='<div class="area6"><select name="sales[area6]"><option value="'+res.data['goods']['sales']['area6']+'">'+res.data['goods']['sales']['area6_name']+'</option></select></div>';
            }
            spec_html+='                                                 </div>\n' +
                '                                                            <input type="text" class="layui-input" name="sales[address]" placeholder="具体地址" value="'+res.data['goods']['sales']['address']+'">\n' +
                '                                                        </div>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                '                                                        </div>\n' +
                '                                                    </td>\n' +
                '                                                </tr>\n';
        }
        if(typeof(res.data['goods']['sales']['connect_type']) != 'undefined') {
            spec_html+='                                     <tr>\n' +
                '                                                    <td>\n' +
                '                                                        <select name="sales[connect_type]">\n';
            if (res.data['goods']['sales']['connect_type'] == '联系电话') {
                spec_html += '                                                         <option value="联系电话" selected>联系电话</option>\n';
            } else {
                spec_html += '                                                         <option value="联系电话">联系电话</option>\n';
            }
            if (res.data['goods']['sales']['connect_type'] == '联系邮箱') {
                spec_html += '                                                         <option value="联系邮箱" selected>联系邮箱</option>\n';
            } else {
                spec_html += '                                                         <option value="联系邮箱">联系邮箱</option>\n';
            }
            if (res.data['goods']['sales']['connect_type'] == '联系网址') {
                spec_html += '                                                         <option value="联系网址" selected>联系网址</option>\n';
            } else {
                spec_html += '                                                         <option value="联系网址">联系网址</option>\n';
            }
            spec_html+='                                             </select>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" name="sales[connect_info]" placeholder="参数描述" value="'+res.data['goods']['sales']['connect_info']+'">\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                '                                                        </div>\n' +
                '                                                    </td>\n' +
                '                                                </tr>\n';
        }
        if(typeof(res.data['goods']['sales']['product_license']) != 'undefined') {
            spec_html += '                                     <tr>\n' +
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" placeholder="销售许可" value="销售许可" readonly>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" name="sales[product_license]" placeholder="参数描述" value="'+res.data['goods']['sales']['product_license']+'">\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                '                                                        </div>\n' +
                '                                                    </td>\n' +
                '                                                </tr>\n';
        }
        spec_html += '                                    </tbody>';

        $('.spec_table').find('.normal_tbody').remove();
        $('.spec_table').find('.sale_tbody').remove();
        $('.spec_table').append(spec_html);
    }
    //==外贸企业
    if(res.data['goods']['foreign']!=null && res.data['goods']['foreign']!='') {
        let spec_html = '';
        spec_html+='<tbody class="foreign_tbody">\n' +
            '                                                <tr>\n' +
            '                                                    <td rowspan="4">外贸企业</td>\n';
        if(typeof(res.data['goods']['foreign']['company_name']) != 'undefined') {
            spec_html+='                                         <td>\n' +
                '                                                        <input type="text" class="layui-input" placeholder="企业名称" value="企业名称" readonly>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" name="foreign[company_name]" placeholder="参数描述" value="'+res.data['goods']['foreign']['company_name']+'">\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>\n' +
                '                                                        </div>\n' +
                '                                                    </td>\n';
        }
        spec_html+='                                     </tr>\n';
        if(typeof(res.data['goods']['foreign']['country']) != 'undefined') {
            spec_html+='                                     <tr>\n' +
                '                                                    <td>\n' +
                '                                                        <input type="text" class="layui-input" placeholder="注册地址" value="注册地址" readonly>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n' +
                '                                                        <div class="disf">\n' +
                '                                                            <div class="country_sel">\n' +
                '                                                                <select name="foreign[country]" lay-search lay-filter="foreign_country">\n' +
                '                                                                    <option value="">请选择</option>\n';
            {volist name="type['country']" id="vo"}
            if(res.data['goods']['foreign']['country']=="{$vo['id']}"){
                spec_html+='                                                                <option value="{$vo['id']}" selected>{$vo['param2']}</option>\n';
            }
            else{
                spec_html+='                                                                <option value="{$vo['id']}">{$vo['param2']}</option>\n';
            }
            {/volist}
                spec_html+='                                                     </select>\n' +
                    '                                                            </div>\n' +
                    '                                                            <div class="foreign_area disf">\n';
                if(typeof(res.data['goods']['foreign']['area1']) != 'undefined') {
                    spec_html+='<div class="area1"><select name="foreign[area1]"><option value="'+res.data['goods']['foreign']['area1']+'">'+res.data['goods']['foreign']['area1_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['foreign']['area2']) != 'undefined') {
                    spec_html+='<div class="area2"><select name="foreign[area2]"><option value="'+res.data['goods']['foreign']['area2']+'">'+res.data['goods']['foreign']['area2_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['foreign']['area3']) != 'undefined') {
                    spec_html+='<div class="area3"><select name="foreign[area3]"><option value="'+res.data['goods']['foreign']['area3']+'">'+res.data['goods']['foreign']['area3_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['foreign']['area4']) != 'undefined') {
                    spec_html+='<div class="area4"><select name="foreign[area4]"><option value="'+res.data['goods']['foreign']['area4']+'">'+res.data['goods']['foreign']['area4_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['foreign']['area5']) != 'undefined') {
                    spec_html+='<div class="area5"><select name="foreign[area5]"><option value="'+res.data['goods']['foreign']['area5']+'">'+res.data['goods']['foreign']['area5_name']+'</option></select></div>';
                }
                if(typeof(res.data['goods']['foreign']['area6']) != 'undefined') {
                    spec_html+='<div class="area6"><select name="foreign[area6]"><option value="'+res.data['goods']['foreign']['area6']+'">'+res.data['goods']['foreign']['area6_name']+'</option></select></div>';
                }
                spec_html+='                                                 </div>\n' +
                    '                                                            <input type="text" class="layui-input" name="foreign[address]" placeholder="具体地址" value="'+res.data['goods']['foreign']['address']+'">\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            if(typeof(res.data['goods']['foreign']['connect_type']) != 'undefined') {
                spec_html += '                                         <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="foreign[connect_type]">\n';
                if (res.data['goods']['foreign']['connect_type'] == '联系电话') {
                    spec_html += '                                                         <option value="联系电话" selected>联系电话</option>\n';
                } else {
                    spec_html += '                                                         <option value="联系电话">联系电话</option>\n';
                }
                if (res.data['goods']['foreign']['connect_type'] == '联系邮箱') {
                    spec_html += '                                                         <option value="联系邮箱" selected>联系邮箱</option>\n';
                } else {
                    spec_html += '                                                         <option value="联系邮箱">联系邮箱</option>\n';
                }
                if (res.data['goods']['foreign']['connect_type'] == '联系网址') {
                    spec_html += '                                                         <option value="联系网址" selected>联系网址</option>\n';
                } else {
                    spec_html += '                                                         <option value="联系网址">联系网址</option>\n';
                }
                spec_html += '                                                        </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" name="foreign[connect_info]" placeholder="参数描述" value="' + res.data['goods']['foreign']['connect_info'] + '">\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            if(typeof(res.data['goods']['foreign']['product_type']) != 'undefined') {
                spec_html += '                                     <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="foreign[product_type]">\n';
                if (res.data['goods']['foreign']['connect_type'] == '外贸方式-进口') {
                    spec_html += '                                                         <option value="外贸方式-进口" selected>外贸方式-进口</option>\n';
                } else {
                    spec_html += '                                                         <option value="外贸方式-进口">外贸方式-进口</option>\n';
                }
                if (res.data['goods']['foreign']['connect_type'] == '外贸方式-出口') {
                    spec_html += '                                                         <option value="外贸方式-出口" selected>外贸方式-出口</option>\n';
                } else {
                    spec_html += '                                                         <option value="外贸方式-出口">外贸方式-出口</option>\n';
                }
                if (res.data['goods']['foreign']['connect_type'] == '外贸方式-转口') {
                    spec_html += '                                                         <option value="外贸方式-转口" selected>外贸方式-转口</option>\n';
                } else {
                    spec_html += '                                                         <option value="外贸方式-转口">外贸方式-转口</option>\n';
                }
                spec_html += '                                              </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" name="foreign[product_license]" placeholder="许可编号" value="' + res.data['goods']['foreign']['product_license'] + '">\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            spec_html+='                                            </tbody>';

            $('.spec_table').find('.normal_tbody').remove();
            $('.spec_table').find('.foreign_tbody').remove();
            $('.spec_table').append(spec_html);
        }
        //==有效期限
        if(res.data['goods']['effective']!=null && res.data['goods']['effective']!='') {
            let spec_html = '';
            spec_html+='<tbody class="effective_tbody">\n' +
                '                                                <tr>\n' +
                '                                                    <td rowspan="2">有效期限</td>\n';
            if(typeof(res.data['goods']['effective']['type']) != 'undefined') {
                spec_html += '                                         <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-form-mid layui-word-aux">生产日期：</div>\n' +
                    '                                                            <div>\n' +
                    '                                                                <select name="effective[type]" lay-filter="effective_type">\n';
                if(res.data['goods']['effective']['type']==1) {
                    spec_html+='                                                         <option value="1" selected>详见包装</option>\n';
                }
                else{
                    spec_html+='                                                         <option value="1">详见包装</option>\n';
                }
                if(res.data['goods']['effective']['type']==2) {
                    spec_html += '                                                         <option value="2" selected>选择日期</option>\n';
                }
                else{
                    spec_html += '                                                         <option value="2">选择日期</option>\n';
                }
                spec_html+='                                                      </select>\n' +
                    '                                                            </div>\n';
                if(res.data['goods']['effective']['type']==1) {
                    spec_html+='                                             <div class="effective_type2" style="display: none;">\n';
                }
                else{
                    spec_html+='                                             <div class="effective_type2" style="display: block;">\n';
                }
                spec_html+='                                                     <select name="effective[type2]" lay-filter="effective_type2">\n';
                if(res.data['goods']['effective']['type2']==1) {
                    spec_html+='                                                         <option value="1" selected>固定日</option>\n';
                }
                else{
                    spec_html+='                                                         <option value="1">固定日</option>\n';
                }
                if(res.data['goods']['effective']['type2']==2) {
                    spec_html += '                                                         <option value="2" selected>时间段</option>\n';
                }
                else{
                    spec_html += '                                                         <option value="2">时间段</option>\n';
                }
                spec_html+='                                                     </select>\n' +
                    '                                                            </div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n';
                if(res.data['goods']['effective']['type2']==1 && res.data['goods']['effective']['type']==2) {
                    spec_html+='                                         <div class="effective_fixed_day" style="display: block;">\n';
                }
                else{
                    spec_html+='                                         <div class="effective_fixed_day" style="display: none;">\n';
                }
                spec_html+='                                                  <input type="text" class="layui-input" id="fixed_day" name="effective[fixed_day]" placeholder="年/月/日" value="'+res.data['goods']['effective']['fixed_day']+'">\n' +
                    '                                                        </div>\n';
                if(res.data['goods']['effective']['type2']==2 && res.data['goods']['effective']['type']==2) {
                    spec_html += '                                         <div class="effective_interval_day" style="display: block;">\n';
                }
                else{
                    spec_html += '                                         <div class="effective_interval_day" style="display: none;">\n';
                }
                spec_html+='                                                    <input type="text" class="layui-input" id="interval_day" name="effective[interval_day]" placeholder="年/月/日" value="'+res.data['goods']['effective']['interval_day']+'">\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n';
            }
            spec_html+='                                         </tr>\n';
            if(typeof(res.data['goods']['effective']['valid_period']) != 'undefined') {
                spec_html += '                                     <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="有效期限" value="有效期限" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <input type="number" class="layui-input" name="effective[valid_period]" placeholder="期限数值" value="'+res.data['goods']['effective']['valid_period']+'">\n' +
                    '                                                            <div class="valid_unit">\n' +
                    '                                                                <select name="effective[valid_unit]">\n';
                if(res.data['goods']['effective']['valid_unit']=='年') {
                    spec_html += '                                         <option value="年" selected>年</option>\n';
                }
                else{
                    spec_html += '                                         <option value="年">年</option>\n';
                }
                if(res.data['goods']['effective']['valid_unit']=='月') {
                    spec_html += '                                         <option value="月" selected>月</option>\n';
                }
                else{
                    spec_html += '                                         <option value="月">月</option>\n';
                }
                if(res.data['goods']['effective']['valid_unit']=='周') {
                    spec_html += '                                         <option value="周" selected>周</option>\n';
                }
                else{
                    spec_html += '                                         <option value="周">周</option>\n';
                }
                if(res.data['goods']['effective']['valid_unit']=='天') {
                    spec_html += '                                         <option value="天" selected>天</option>\n';
                }
                else{
                    spec_html += '                                         <option value="天">天</option>\n';
                }
                if(res.data['goods']['effective']['valid_unit']=='时') {
                    spec_html += '                                         <option value="时" selected>时</option>\n';
                }
                else{
                    spec_html += '                                         <option value="时">时</option>\n';
                }
                spec_html+='                                                       </select>\n' +
                    '                                                            </div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            spec_html+='                                            </tbody>';

            $('.spec_table').find('.normal_tbody').remove();
            $('.spec_table').find('.effective_tbody').remove();
            $('.spec_table').append(spec_html);
        }
        //==贮存条件
        if(res.data['goods']['store']!=null && res.data['goods']['store']!='') {
            let spec_html = '';
            spec_html+='<tbody class="store_tbody">\n' +
                '                                                <tr>\n' +
                '                                                    <td rowspan="6">贮存条件</td>\n';
            if(typeof(res.data['goods']['store']['temperature_condition']) != 'undefined') {
                spec_html+='                                         <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="温度条件" value="温度条件" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="store[temperature_condition]">\n' +
                    '                                                            <option value="">请选择</option>\n';
                if (res.data['goods']['store']['temperature_condition'] == '常温保存') {
                    spec_html += '                                                         <option value="常温保存" selected>常温保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="常温保存">常温保存</option>\n';
                }
                if (res.data['goods']['store']['temperature_condition'] == '冷藏保存') {
                    spec_html += '                                                         <option value="冷藏保存" selected>冷藏保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="冷藏保存">冷藏保存</option>\n';
                }
                if (res.data['goods']['store']['temperature_condition'] == '冷冻保存') {
                    spec_html += '                                                         <option value="冷冻保存" selected>冷冻保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="冷冻保存">冷冻保存</option>\n';
                }
                if (res.data['goods']['store']['temperature_condition'] == '恒温保存') {
                    spec_html += '                                                         <option value="恒温保存" selected>恒温保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="恒温保存">恒温保存</option>\n';
                }
                spec_html += '                                           </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this,0)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n';
            }
            spec_html+='                                     </tr>\n';
            if(typeof(res.data['goods']['store']['humidity_condition']) != 'undefined') {
                spec_html += '                                     <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="湿度条件" value="湿度条件" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="humidity_condition">\n' +
                    '                                                                <select name="store[humidity_condition]" lay-filter="humidity_condition">\n' +
                    '                                                                    <option value="">请选择</option>\n';
                if (res.data['goods']['store']['humidity_condition'] == '置于干燥保存') {
                    spec_html += '                                                         <option value="置于干燥保存" selected>置于干燥保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="置于干燥保存">置于干燥保存</option>\n';
                }
                if (res.data['goods']['store']['humidity_condition'] == '密封防潮保存') {
                    spec_html += '                                                         <option value="密封防潮保存" selected>密封防潮保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="密封防潮保存">密封防潮保存</option>\n';
                }
                if (res.data['goods']['store']['humidity_condition'] == 3) {
                    spec_html += '                                                         <option value="相对湿度 X%-Y % 保存" selected>相对湿度 X%-Y % 保存</option>\n';
                } else {
                    spec_html += '                                                         <option value="相对湿度 X%-Y % 保存">相对湿度 X%-Y % 保存</option>\n';
                }
                spec_html+='                                                         </select>\n' +
                    '                                                            </div>\n';
                if (res.data['goods']['store']['humidity_condition'] == 3) {
                    spec_html+='                                                <div class="humidity_value" style="display: block;">\n';
                }
                else{
                    spec_html+='                                                <div class="humidity_value" style="display: none;">\n';
                }
                spec_html+='                                                        <div class="disf">\n' +
                    '                                                                    <input type="number" class="layui-input" name="store[humidity_x]" placeholder="湿度X%" value="'+res.data['goods']['store']['humidity_x']+'">\n' +
                    '                                                                    <div class="layui-form-mid layui-word-aux">%~</div>\n' +
                    '                                                                    <input type="number" class="layui-input" name="store[humidity_y]" placeholder="湿度Y%" value="'+res.data['goods']['store']['humidity_y']+'">\n' +
                    '                                                                    <div class="layui-form-mid layui-word-aux">%</div>\n' +
                    '                                                                </div>\n' +
                    '                                                            </div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            if(typeof(res.data['goods']['store']['light_condition']) != 'undefined') {
                spec_html += '                                         <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="光照条件" value="光照条件" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="store[light_condition]">\n' +
                    '                                                            <option value="">请选择</option>\n';
                if (res.data['goods']['store']['light_condition'] == '阴凉避光保存') {
                    spec_html += '                                                <option value="阴凉避光保存" selected>阴凉避光保存</option>\n';
                } else {
                    spec_html += '                                                <option value="阴凉避光保存">阴凉避光保存</option>\n';
                }
                if (res.data['goods']['store']['light_condition'] == '避免紫外线暗处保存') {
                    spec_html += '                                                <option value="避免紫外线暗处保存" selected>避免紫外线暗处保存</option>\n';
                } else {
                    spec_html += '                                                <option value="避免紫外线暗处保存">避免紫外线暗处保存</option>\n';
                }
                spec_html += '                                                  </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            if(typeof(res.data['goods']['store']['packing_condition']) != 'undefined') {
                spec_html+='                                     <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="包装条件" value="包装条件" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="store[packing_condition]">\n' +
                    '                                                            <option value="">请选择</option>\n';
                if (res.data['goods']['store']['packing_condition'] == '密封保存') {
                    spec_html += '                                                <option value="密封保存" selected>密封保存</option>\n';
                } else {
                    spec_html += '                                                <option value="密封保存">密封保存</option>\n';
                }
                if (res.data['goods']['store']['packing_condition'] == '原包装保存') {
                    spec_html += '                                                <option value="原包装保存" selected>原包装保存</option>\n';
                } else {
                    spec_html += '                                                <option value="原包装保存">原包装保存</option>\n';
                }
                spec_html += '                                           </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            if(typeof(res.data['goods']['store']['store_condition']) != 'undefined') {
                spec_html+='                                     <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="储存环境" value="储存环境" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="store[store_condition]">\n' +
                    '                                                            <option value="">请选择</option>\n';
                if (res.data['goods']['store']['store_condition'] == '通风环境保存') {
                    spec_html += '                                                <option value="通风环境保存" selected>通风环境保存</option>\n';
                } else {
                    spec_html += '                                                <option value="通风环境保存">通风环境保存</option>\n';
                }
                if (res.data['goods']['store']['store_condition'] == '清洁环境保存') {
                    spec_html += '                                                <option value="清洁环境保存" selected>清洁环境保存</option>\n';
                } else {
                    spec_html += '                                                <option value="清洁环境保存">清洁环境保存</option>\n';
                }
                spec_html+='                                              </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            if(typeof(res.data['goods']['store']['special_condition']) != 'undefined') {
                spec_html+='                                     <tr>\n' +
                    '                                                    <td>\n' +
                    '                                                        <input type="text" class="layui-input" placeholder="特殊要求" value="特殊要求" readonly>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <select name="store[special_condition]">\n' +
                    '                                                            <option value="">请选择</option>\n';
                if (res.data['goods']['store']['special_condition'] == '防磁保存') {
                    spec_html += '                                                <option value="防磁保存" selected>防磁保存</option>\n';
                } else {
                    spec_html += '                                                <option value="防磁保存">防磁保存</option>\n';
                }
                if (res.data['goods']['store']['special_condition'] == '防压保存') {
                    spec_html += '                                                <option value="防压保存" selected>防压保存</option>\n';
                } else {
                    spec_html += '                                                <option value="防压保存">防压保存</option>\n';
                }
                spec_html += '                                            </select>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n';
            }
            spec_html+='                                 </tbody>';
            $('.spec_table').find('.normal_tbody').remove();
            $('.spec_table').find('.store_tbody').remove();
            $('.spec_table').append(spec_html);
        }
        //==产品包装
        if(res.data['goods']['packing']!=null && res.data['goods']['packing']!='') {
            let spec_html = '';
            spec_html += '<tbody class="packing_tbody">\n' +
                '                                                <tr>\n' +
                '                                                    <td>产品包装</td>\n' +
                '                                                    <td>\n' +
                '                                                        <select name="packing[type]" lay-filter="packing_type">\n';
            if (res.data['goods']['packing']['type'] == '有包装') {
                spec_html += '                                                         <option value="有包装" selected>有包装</option>\n';
            } else {
                spec_html += '                                                         <option value="有包装">有包装</option>\n';
            }
            if (res.data['goods']['packing']['type'] == '无包装') {
                spec_html += '                                                         <option value="无包装" selected>无包装</option>\n';
            } else {
                spec_html += '                                                         <option value="无包装">无包装</option>\n';
            }
            spec_html+='                                                 </select>\n' +
                '                                                    </td>\n' +
                '                                                    <td>\n';
            if (res.data['goods']['packing']['type'] == '有包装') {
                spec_html+='                                           <div class="have_pack">\n';
            }
            else{
                spec_html+='                                           <div class="have_pack" style="display:none;">\n';
            }
            spec_html+='                                                    <div class="disf">\n' +
                '                                                                <div class="layui-form-mid layui-word-aux">包装方式：</div>\n' +
                '                                                                <div class="packing_method">\n' +
                '                                                                    <select name="packing[method]" lay-filter="packing_method">\n' +
                '                                                                        <option value="">请选择</option>\n';
            {volist name="type['packing']" id="vo"}
            if(res.data['goods']['packing']['method']=="{$vo['id']}"){
                spec_html+='                                                                    <option value="{$vo['id']}" selected>{$vo['name']}</option>\n';
            }
            else{
                spec_html+='                                                                    <option value="{$vo['id']}">{$vo['name']}</option>\n';
            }
            {/volist}
                spec_html+='                                                             </select>\n' +
                    '                                                                </div>\n' +
                    '                                                                <div class="packing_method_box disf">'+
                    '                                                                     <div class="layui-form-mid layui-word-aux">容器：</div>\n' +
                    '                                                                     <div class="packing_container">\n' +
                    '                                                                          <select name="packing[packing_container]" lay-search>\n'+
                    '                                                                                  <option value="">请选择</option>';
                for(let i=0;i<res.data['container'].length;i++) {
                    if(res.data['container'][i].id==res.data['goods']['packing']['packing_container']){
                        spec_html += '                                                                 <option value="' + res.data['container'][i].id + '" selected>' + res.data['container'][i].name + '</option>\n';
                    }
                    else{
                        spec_html += '                                                                 <option value="' + res.data['container'][i].id + '">' + res.data['container'][i].name + '</option>\n';
                    }
                }
                spec_html+='                                                                   </select>\n' +
                    '                                                                          </div>\n' +
                    '                                                                          &nbsp;\n' +
                    '                                                                          <div class="layui-form-mid layui-word-aux">材料：</div>\n' +
                    '                                                                          <div class="packing_container">\n' +
                    '                                                                               <select name="packing[packing_material]" lay-search>\n'+
                    '                                                                                       <option value="">请选择</option>';
                for(let i=0;i<res.data['material'].length;i++) {
                    if(res.data['material'][i].id==res.data['goods']['packing']['packing_material']){
                        spec_html += '                                                                 <option value="' + res.data['material'][i].id + '" selected>' + res.data['material'][i].name + '</option>\n';
                    }
                    else{
                        spec_html += '                                                                 <option value="' + res.data['material'][i].id + '">' + res.data['material'][i].name + '</option>\n';
                    }
                }
                spec_html+='                                                                         </select>\n' +
                    '                                                                          </div>'+
                    '                                                                      </div>\n' +
                    '                                                            </div>\n' +
                    '                                                        </div>\n';
                if (res.data['goods']['packing']['type'] == '无包装') {
                    spec_html+='                                           <div class="no_pack">\n';
                }
                else{
                    spec_html+='                                           <div class="no_pack" style="display:none;">\n';
                }
                spec_html+='                                                     <select name="packing[no_pack]">\n';
                if (res.data['goods']['packing']['no_pack'] == '裸装') {
                    spec_html += '                                                         <option value="裸装" selected>裸装</option>\n';
                } else {
                    spec_html += '                                                         <option value="裸装">裸装</option>\n';
                }
                if (res.data['goods']['packing']['no_pack'] == '散装') {
                    spec_html += '                                                         <option value="散装" selected>散装</option>\n';
                } else {
                    spec_html += '                                                         <option value="散装">散装</option>\n';
                }
                spec_html+='                                                       </select>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                    <td>\n' +
                    '                                                        <div class="disf">\n' +
                    '                                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
                    '                                                        </div>\n' +
                    '                                                    </td>\n' +
                    '                                                </tr>\n' +
                    '                                            </tbody>';

                $('.spec_table').find('.normal_tbody').remove();
                $('.spec_table').find('.packing_tbody').remove();
                $('.spec_table').append(spec_html);
            }
            //==自定义参数
            if(res.data['goods']['spec_info']!==null && res.data['goods']['spec_info']!=''){
                let spec_html = '<tbody class="spec_info">\n';
                for(let i=0;i<res.data['goods']['spec_info'].length;i++){
                    spec_html+='<tr>\n';
                    if(i==0){
                        spec_html+='<td rowspan="999">自定参数</td>\n';
                    }
                    spec_html+='<td><input type="text" class="layui-input" name="spec_name[]" placeholder="参数名称" value="'+res.data['goods']['spec_info'][i]['spec_name']+'"></td>\n'+
                        '       <td><input type="text" class="layui-input" name="spec_desc[]" placeholder="参数描述" value="'+res.data['goods']['spec_info'][i]['spec_desc']+'"></td></td>\n'+
                        '       <td>' +
                        '               <div class="disf">\n';
                    if(i==0) {
                        spec_html += '       <div class="layui-btn layui-btn-md layui-btn-normal" onclick="spec_add(this)">+</div>\n';
                    }
                    else{
                        spec_html += '       <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n'+
                            '       <div class="layui-btn layui-btn-md layui-btn-normal" onclick="spec_add(this)">+</div>\n';
                    }
                    spec_html += '  </div>\n' +
                        '           </td>\n'+
                        '</tr>\n';
                }
                spec_html+='</tbody>';

                $('.spec_table').find('.diyparam_tbody').remove();
                $('.spec_table').find('.spec_info').remove();
                $('.spec_table').append(spec_html);
            }

            //==商品描述
            if(res.data['goods']['pc_desc']!==null){
                ue.setContent(res.data['goods']['pc_desc']);
            }
            //商品详情=============================================================end

            //卖家说明=============================================================start
            $('#rule_select').val(res.data['goods']['rule_id']);
            //卖家说明=============================================================end
            form.render(null,'component-form-group');
        });
    }

    //无规格=========================================================================================start
    function add_interval2(t){
        let layer = layui.layer,
            $ = layui.$,
            form = layui.form;
        if(parseInt($(t).parents(':eq(1)').find('.end_num').val()) <= parseInt($(t).parents(':eq(1)').find('.start_num').val())){
            alert('请填写正确的数量区间信息');return false;
        }
        let start_num = parseInt($(t).parents(':eq(1)').find('.end_num').val()) + 1;
        let unit = $(t).parents(":eq(2)").find('.unit').find('option:selected').data('title');
        if($(t).parents(':eq(1)').find('.end_num').val()<1 || unit==''){
            alert('请填写当前区间信息');return false;
        }

        let html = '<tr>\n' +
            '                    <td class="td_width">\n' +
            '                        <div class="disf">\n' +
            '                            <input type="number" name="nospecs[start_num][]" value="'+start_num+'" class="layui-input w70 start_num" placeholder="起始数值" readonly>\n' +
            '                            至\n' +
            '                            <div class="w70">\n'+
            '                                 <select name="nospecs[select_end][]" class="form-control chosen-select" lay-filter="select_end">\n' +
            '                                         <option value="1">数值</option>\n' +
            '                                         <option value="2">以上</option>\n' +
            '                                 </select>\n' +
            '                            </div>\n'+
            '                            <input type="number" name="nospecs[end_num][]" value="" class="layui-input w70 end_num" placeholder="尾止数值">\n' +
            '                            <div class="unit_div layui-input w70" style="line-height: 38px;text-align: left;">'+unit+'</div>' +
            '                        </div>\n' +
            '                    </td>\n' +
            '                    <td class="td_width">\n' +
            '                        <input type="number" name="nospecs[price][]" value="" class="layui-input" placeholder="区间金额">\n' +
            '                    </td>\n' +
            '                    <td class="disf" style="text-align:center;">\n' +
            '                        <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_interval(this)">-</div>\n' +
            '                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_interval2(this)">+</div>\n' +
            '                    </td>\n' +
            '                </tr>';

        $(t).parents(":eq(0)").hide();
        $(t).parents(":eq(2)").append(html);

        form.render(null,'component-form-group');
    }
    function del_interval(t){
        let layer = layui.layer,
            $ = layui.$;
        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(1)").prev().find('td').eq(-1).show();
            $(t).parents(":eq(1)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }
    //无规格=========================================================================================end

    //有规格=========================================================================================start
    function add_interval_havespecs(t,tr_num=0){
        let layer = layui.layer,
            $ = layui.$,
            form = layui.form;

        if($(t).parents(":eq(2)").find('tr').last().find('td').eq(0).find('.disf').find('.w70').eq(1).find('select').val()==2){
            alert('已存在“以上”数量区间');return false;
        }
        if(parseInt($(t).parents(':eq(1)').find('.end_num').val()) <= parseInt($(t).parents(':eq(1)').find('.start_num').val())){
            alert('请填写正确的数量区间信息');return false;
        }
        let start_num = parseInt($(t).parents(':eq(1)').find('.end_num').val()) + 1;
        let unit = $(t).parents(":eq(2)").find('.unit').find('option:selected').data('title');
        if($(t).parents(':eq(1)').find('.end_num').val()<1 || unit==''){
            alert('请填写当前区间信息');return false;
        }

        let html = '<tr>\n' +
            '                    <td class="td_width">\n' +
            '                        <div class="disf">\n' +
            '                            <input type="number" name="havespecs[start_num]['+tr_num+'][]" value="'+start_num+'" class="layui-input w70 start_num" placeholder="起始数值" readonly>\n' +
            '                            至\n' +
            '                            <div class="w70">\n'+
            '                                 <select name="havespecs[select_end]['+tr_num+'][]" class="form-control chosen-select" lay-filter="select_end">\n' +
            '                                         <option value="1">数值</option>\n' +
            '                                         <option value="2">以上</option>\n' +
            '                                 </select>\n' +
            '                            </div>\n'+
            '                            <input type="number" name="havespecs[end_num]['+tr_num+'][]" value="" class="layui-input w70 end_num" placeholder="尾止数值">\n' +
            '                            <div class="unit_div layui-input w70" style="line-height: 38px;text-align: left;">'+unit+'</div>' +
            '                        </div>\n' +
            '                    </td>\n' +
            '                    <td class="td_width">\n' +
            '                        <input type="number" name="havespecs[price]['+tr_num+'][]" value="" class="layui-input" placeholder="区间金额">\n' +
            '                    </td>\n' +
            '                    <td class="disf" style="text-align:center;">\n' +
            '                        <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_interval(this)">-</div>\n' +
            '                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_interval_havespecs(this,'+tr_num+')">+</div>\n' +
            '                    </td>\n' +
            '                </tr>';

        $(t).parents(":eq(0)").hide();
        $(t).parents(":eq(2)").append(html);

        form.render(null,'component-form-group');
    }

    //弹出添加型号框
    var specs_html = '';
    var option1_arr = [];var option2_arr = [];var option3_arr = [];
    function add_specs(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        specs_html = layer.open({
            type: 1,
            title: '添加型号',
            content: $('.add_specs_div'),
            area:['500px','400px']
        });
    }

    function save_specs(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        if($('#goods_id').val()==''){
            layer.msg('请先选择商品');return false;
        }

        layer.load();

        var id = $('input[name="id"]').val();
        if(id>0){
            //获取已有的规格
            let spec_tr = $('.have_specs_div .layui-table .tbody .spec_tr');
            var txt_arr = [];
            for(let k=0;k<spec_tr.length;k++){
                var txt = $('.have_specs_div .layui-table .tbody .spec_tr').eq(k).find('.specs_th_name .option_txt').html();

                if (!txt_arr.includes(txt)) {
                    txt_arr.push(txt);
                }
            }

            $.ajax({
                url: "/?s=index/spec_arrange",
                data: {'txt_arr': txt_arr},
                type: 'post',
                cache: false,
                dataType: 'json',
                success: function (data) {
                    option1_arr = data.option1_arr;
                    option2_arr = data.option2_arr;
                    option3_arr = data.option3_arr;
                }
            });
        }

        setTimeout(function(){
            //添加新规格
            let option_name = '';
            let option1_name = $('#option1').val();
            let option2_name = $('#option2').val();
            let option3_name = $('#option3').val();
            let tr_len = $('.have_specs_div').find('.layui-table').find('.tbody').find('.spec_tr');
            if(tr_len.length>0) {
                if (id == '' || id == 0) {
                    $('.have_specs_div').find('.layui-table').find('.tbody').html("");
                } else {
                    //如果大类不一样，则清空html
                    if (!option1_arr.includes(option1_name)) {
                        $('.have_specs_div').find('.layui-table').find('.tbody').html("");
                    }
                }
            }

            let new_option_arr = [];
            if(option1_name=='' || option2_name==''){
                layer.closeAll('loading');
                layer.msg('请输入型号分类或型号属性');return false;
            }
            else{
                //型号分类
                if (!option1_arr.includes(option1_name)) {
                    option1_arr.push(option1_name);
                }
                //型号属性
                option_name = option1_name+':'+option2_name;
                if(option3_name!=''){
                    option_name += '-@-'+option3_name+'';
                    if (!option3_arr.includes(option1_name+':'+option2_name+'-@-'+option3_name)) {
                        option3_arr.push(option1_name+':'+option2_name+'-@-'+option3_name);
                    }
                }
                else{
                    if (!option2_arr.includes(option1_name+':'+option2_name)) {
                        option2_arr.push(option1_name+':'+option2_name);
                    }

                    option_name += '';
                }

                //整理型号
                for(let i=0;i<option1_arr.length;i++){
                    let obj = {
                        name: option1_arr[i],
                        children: []
                    };
                    new_option_arr.push(obj);
                    for(let i2=0;i2<option2_arr.length;i2++){
                        if(option2_arr[i2].includes(option1_arr[i])){
                            let obj2 = {
                                name: option2_arr[i2],
                            };
                            new_option_arr[i]['children'].push(obj2);
                        }
                    }

                    for(let i3=0;i3<option3_arr.length;i3++){
                        if(option3_arr[i3].includes(option1_arr[i])){
                            let obj2 = {
                                name: option3_arr[i3],
                            };
                            new_option_arr[i]['children'].push(obj2);
                        }
                    }
                }
            }

            if(tr_len.length>0){
                let childrenArrays = new_option_arr.map(item => item.children);
                // 生成组合
                let combinations = getCombinations(childrenArrays);
                // console.log(option1_arr,option2_arr,option3_arr,combinations);
                // console.log(combinations,1);

                // 循环到规格tr
                tr_len = $('.have_specs_div').find('.layui-table').find('.tbody').find('.spec_tr');
                let tr_num = tr_len.length;
                for(let i=0;i<combinations.length;i++){
                    let options_name = '';
                    let options3_name = '';
                    for(let i2=0;i2<combinations[i].length;i2++){
                        if(options_name==''){
                            options_name = combinations[i][i2]['name'];
                            options3_name = combinations[i][i2]['name'];
                        }
                        else{
                            options_name += '<br/>'+combinations[i][i2]['name'];
                            options3_name += '<br>'+combinations[i][i2]['name'];
                        }
                    }
                    // console.log(options_name,2);

                    var can_add = 1;
                    for(let i2=0;i2<tr_len.length;i2++){
                        let option_txt = $('.have_specs_div').find('.layui-table').find('.tbody').find('.spec_tr').eq(i2).find('.specs_th_name .option_txt').html();
                        if(option_txt==options3_name){
                            //出现相同规格名就不用继续添加了
                            can_add = 0;
                            break;
                        }
                    }
                    if(can_add==1){
                        add_specs_tr(options_name,tr_num);
                        tr_num += 1;
                    }
                }
            }
            else{
                add_specs_tr(option_name,0);
            }

            form.render(null,'component-form-group');

            //隐藏添加型号弹框
            $('#option2').val("");
            $('#option3').val("");
            $('.result_div').html("");
            $('.result_div').hide();
            layer.close(specs_html);

            layer.closeAll('loading');
        },1500);
    }

    // 计算组合数
    function getCombinations(arrays) {
        let result = arrays.reduce((a, b) => {
            let combinations = [];
            a.forEach(aItem => {
                b.forEach(bItem => {
                    combinations.push([...aItem, bItem]);
                });
            });
            return combinations;
        }, [[]]);
        return result;
    }

    //向规格型号表格插入行元素<tr>
    function add_specs_tr(option_name,tr_num=0){
        let unit = $('.have_specs_div').find('.havespec_table').eq(0).find('tbody').find('tr').eq(0).find('td').eq(0).find('.disf').find('.unit').find('option:selected').data('title');
        let shelf_number = '';
        let warn_number = '';
        if(tr_num>0){
            shelf_number = $('.have_specs_div .layui-table .tbody').find('tr').eq(0).find('.shelf_number').val();
            warn_number = $('.have_specs_div .layui-table .tbody').find('tr').eq(0).find('.warn_number').val();
        }

        let html = '<tr class="spec_tr">\n' +
            '                                                        <td class="specs_th_name">\n' +
            '                                                            <div class="option_txt" style="text-align:left;">'+option_name+'</div>\n'+
            '                                                            <input type="hidden" class="layui-input" name="havespecs[option_name]['+tr_num+']" placeholder="型号" value="'+option_name+'" readonly>\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <input type="text" class="layui-input" name="havespecs[goods_sn]['+tr_num+']" placeholder="货号">\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <input type="text" class="layui-input" name="havespecs[goods_barcode]['+tr_num+']" placeholder="条码">\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <input type="text" class="layui-input" name="havespecs[goods_stockcode]['+tr_num+']" placeholder="库码">\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <table class="havespec_table" style="width:100%;text-align:center;">\n' +
            '                                                                <tr>\n' +
            '                                                                    <td class="td_width">\n' +
            '                                                                        <div class="disf">\n' +
            '                                                                            <input type="number" name="havespecs[start_num]['+tr_num+'][]" value="1" class="layui-input w70 start_num" placeholder="起始数值">\n' +
            '                                                                            至\n' +
            '                                                                            <div class="w70">\n' +
            '                                                                                <select name="havespecs[select_end]['+tr_num+'][]" class="form-control chosen-select" lay-filter="select_end">\n' +
            '                                                                                    <option value="1">数值</option>\n' +
            '                                                                                    <option value="2">以上</option>\n' +
            '                                                                                </select>\n' +
            '                                                                            </div>\n' +
            '\n' +
            '                                                                            <input type="number" name="havespecs[end_num]['+tr_num+'][]" value="" class="layui-input w70 end_num" placeholder="尾止数值">\n' +
            '                                                                            <div class="w70">\n' +
            '                                                                                <select name="havespecs[unit]['+tr_num+'][]" class="form-control chosen-select unit" lay-search>\n' +
            '                                                                                    <option value="">请选择</option>\n';
        {volist name="type['unit']" id="v"}
        if(unit=="{$v['code_name']}"){
            html+='                                                                              <option value="{$v['code_value']}" data-title="{$v['code_name']}" selected>{$v['code_name']}</option>\n';
        }else{
            html+='                                                                              <option value="{$v['code_value']}" data-title="{$v['code_name']}">{$v['code_name']}</option>\n';
        }
        {/volist}
        html+='                                                                          </select>\n' +
            '                                                                            </div>\n' +
            '                                                                        </div>\n' +
            '                                                                    </td>\n' +
            '                                                                    <td class="td_width">\n' +
            '                                                                        <input type="number" name="havespecs[price]['+tr_num+'][]" value="" class="layui-input" placeholder="区间金额">\n' +
            '                                                                    </td>\n' +
            '                                                                    <td style="text-align:center;">\n' +
            '                                                                        <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_interval_havespecs(this,'+tr_num+')">+</div>\n' +
            '                                                                    </td>\n' +
            '                                                                </tr>\n' +
            '                                                            </table>\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <input type="number" class="layui-input" name="havespecs[market_price]['+tr_num+']" placeholder="市场价">\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <input type="number" class="layui-input" name="havespecs[cost_price]['+tr_num+']" placeholder="成本价">\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <input type="number" class="layui-input shelf_number" name="havespecs[shelf_number]['+tr_num+']" value="'+shelf_number+'" placeholder="上架数量">\n' +
            '                                                        </td>\n' +
            '                                                        <td>\n' +
            '                                                            <div class="disf">\n' +
            '                                                                <div class="w100 warn_select">\n' +
            '                                                                    <select name="havespecs[warn_type]['+tr_num+']">\n' +
            '                                                                        <option value="1">少于</option>\n' +
            '                                                                        <option value="2">少于或等于</option>\n' +
            '                                                                        <option value="3">等于</option>\n' +
            '                                                                        <option value="4">大于</option>\n' +
            '                                                                        <option value="5">大于或等于</option>\n' +
            '                                                                    </select>\n' +
            '                                                                </div>\n' +
            '                                                                <input type="number" class="layui-input w100 warn_number" name="havespecs[warn_number]['+tr_num+']" placeholder="报警值" value="'+warn_number+'">\n' +
            '                                                                <div class="layu-input" style="white-space: nowrap;">触发报警</div>\n' +
            '                                                            </div>\n' +
            '                                                        </td>\n' +
            '                                                    </tr>';

        $('.have_specs_div').find('.layui-table').find('.tbody').append(html);

        $('.result_div').hide();
    }

    function select_name(t,type){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let name = $(t).attr('data-name');
        if(type==1){
            $('#option1').val(name);
        }
        else if(type==2){
            $('#option2').val(name);
        }
        else if(type==3){
            $('#option3').val(name);
        }

        $('.result_div').hide();
    }
    //有规格=========================================================================================end

    //添加行政区域====================================================================================start
    function get_area(res,area_id,t,typ=0){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        if(res.data.length>0){
            let area_html = '';
            if(typ==0){
                area_html = '<select name="domestic_logistics[area'+area_id+'][]" lay-search lay-verify="" lay-filter="area'+area_id+'">\n';
            }else if(typ==1){
                area_html = '<select name="other_fees_area[area'+area_id+'][]" lay-search lay-verify="" lay-filter="otherfees_area'+area_id+'">\n';
            }
            area_html+='                     <option value="">请选择</option>\n';
            for(let i=0;i<res.data.length;i++){
                area_html += '<option value="'+res.data[i].id+'">'+res.data[i].code_name+'</option>\n';
            }
            area_html += '</select>';
            $(t).parents(":eq(3)").find('.area'+area_id).html(area_html);

            form.render(null,'component-form-group');
        }
    }
    function add_domestic_area(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;
        let tr_num = $('.domestic_table').find('tbody').find('tr').length;
        let html = '<tr>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" class="layui-input" name="domestic_logistics[name]['+tr_num+']" placeholder="区域名称">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <div class="domestic_area disf">\n' +
            '                                            <div class="area1">'+domestic_area_html+'</div>\n' +
            '                                            <div class="area2"></div>\n' +
            '                                            <div class="area3"></div>\n' +
            '                                            <div class="area4"></div>\n' +
            '                                            <div class="area5"></div>\n' +
            '                                            <div class="area6"></div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <div class="disf">\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_domestic_area(this)">-</div>\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_domestic_area(this)">+</div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                </tr>';

        $('.domestic_logistics_div').find('.domestic_table').find('tbody').append(html);
        form.render(null,'component-form-group');
    }
    function del_domestic_area(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }

    function add_gather_country(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let html = '<tr>\n' +
            '           <td>\n' +
            '               <select name="gather_zhou[]" lay-filter="gather_zhou">\n' +
            '                       <option value="">请选择</option>\n';
        {volist name="type['zhou']" id="vo"}
        html += '               <option value="{$vo[\'id\']}">{$vo[\'param1\']}</option>\n';
        {/volist}
            html += '       </select>\n' +
                '           </td>\n' +
                '           <td></td>\n' +
                '           <td></td>\n' +
                '           <td>\n' +
                '               <div class="disf">\n' +
                '                    <div class="layui-btn layui-btn-md layui-btn-danger delbtn" onclick="del_gather_country(this)">-</div>\n'+
                '                    <div class="layui-btn layui-btn-md layui-btn-normal addbtn" onclick="add_gather_country(this)">+</div>\n' +
                '               </div>\n' +
                '           </td>\n' +
                '      </tr>';
            $(t).parents(":eq(3)").append(html);

            form.render(null,'component-form-group');
        }

    function del_gather_country(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }
    //添加行政区域====================================================================================end

    //其他费用====================================================================================start
    function fees_add(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;
        let tr_num = $('.fees_table').find('tbody').find('tr').length;
        let html = '<tr>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" class="layui-input" name="fees_name['+tr_num+']" placeholder="费用名称">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" class="layui-input" name="fees_desc['+tr_num+']" placeholder="费用描述">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <div class="disf">\n' +
            '                                            <div class="condition_div w120">\n' +
            '                                                <select name="fees_condition['+tr_num+']" lay-filter="fees_condition">\n' +
            '                                                    <option value="1">无条件触发</option>\n' +
            '                                                    <option value="2">有条件触发</option>\n' +
            '                                                </select>\n' +
            '                                            </div>\n' +
            '                                            <div class="condition_div2" style="display: none;">\n' +
            '                                                <div class="disf">\n' +
            '                                                    <div class="trigger_div w100">\n' +
            '                                                        <select name="fees_trigger['+tr_num+']" lay-filter="fees_trigger">\n' +
            '                                                            <option value="1">要素触发</option>\n' +
            '                                                            <option value="2">型号触发</option>\n' +
            '                                                            <option value="3">物流触发</option>\n' +
            '                                                        </select>\n' +
            '                                                    </div>\n' +
            '                                                    <!--要素触发-->\n' +
            '                                                    <div class="trigger_div1">\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="trigger_div1_box w100">\n' +
            '                                                                <select name="fees_trigger2['+tr_num+']">\n' +
            '                                                                    <option value="1">购买数量</option>\n' +
            '                                                                    <option value="2">购买金额</option>\n' +
            '                                                                </select>\n' +
            '                                                            </div>\n' +
            '                                                            <div class="trigger_div1_box w120">\n' +
            '                                                                <select name="fees_trigger2_equal['+tr_num+']">\n' +
            '                                                                    <option value="1">少于</option>\n' +
            '                                                                    <option value="2">少于或等于</option>\n' +
            '                                                                    <option value="3">等于</option>\n' +
            '                                                                    <option value="4">大于</option>\n' +
            '                                                                    <option value="5">大于或等于</option>\n' +
            '                                                                </select>\n' +
            '                                                            </div>\n' +
            '                                                            <input type="number" class="layui-input w100" name="fees_trigger2_num['+tr_num+']" value="" placeholder="输入数值">\n' +
            '                                                            <div class="layui-input w70" style="line-height: 38px;padding-left:0;white-space:nowrap;">触发收费</div>\n' +
            '                                                        </div>\n' +
            '                                                    </div>\n' +
            '                                                    <!--型号触发-->\n' +
            '                                                    <div class="trigger_div2" style="display: none;">\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="trigger_div2_box fees_options_trigger">\n' +
            '                                                                <!--新增规格型号时触发-->\n' +
            '                                                                <select name="fees_options['+tr_num+']" lay-search>\n';
        {if isset($type['now_goods'])}
            {if $type['now_goods']['have_specs']==2}
                html+='                                                         <option value="-1">暂无规格型号数据</option>\n';
            {else}
                {volist name="type['now_goods']['havespecs']" id="vo"}
                html+='                                                     <option value="{$vo['sku_id']}">{$vo['spec_names2']}</option>\n';
                {/volist}
            {/if}
        {else}
        html+='                                                              <option value="-1">暂无规格型号数据</option>\n';
        {/if}

        html+='                                                          </select>\n' +
            '                                                            </div>\n' +
            '                                                            <div class="layui-input w70" style="line-height: 38px;padding-left:0;white-space:nowrap;">触发收费</div>\n' +
            '                                                        </div>\n' +
            '                                                    </div>\n' +
            '                                                    <!--物流触发-->\n' +
            '                                                    <div class="trigger_div3" style="display: none;">\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <div class="layui-input w70" style="line-height: 38px;padding-left: 0;">收货地点</div>\n' +
            '                                                            <div class="trigger_div3_box w100">\n' +
            '                                                                <select name="fees_trigger2_area['+tr_num+']" lay-filter="fees_trigger2_area">\n' +
            '                                                                    <option value="1">区域触发</option>\n' +
            '                                                                    <option value="2">地点触发</option>\n' +
            '                                                                </select>\n' +
            '                                                            </div>\n' +
            '                                                            <div class="trigger_div3_box trigger_area1 w120">\n' +
            '                                                                <select name="fees_trigger2_area1['+tr_num+']" lay-search>\n';
        if(domestic_areas_name==''){
            html+='                                                              <option value="-1">暂无区域信息</option>\n';
        }
        else{
            for(let i=0;i<domestic_areas_name.length;i++){
                html+='                                                          <option value="'+domestic_areas_name[i]+'">'+domestic_areas_name[i]+'</option>';
            }
        }
        html+='                                                          </select>\n' +
            '                                                            </div>\n' +
            '                                                            <div class="trigger_div3_box trigger_area2" style="display: none;">\n' +
            '                                                                <div class="disf">\n' +
            '                                                                    <div class="area1">'+otherFeesArea_html+'</div>\n' +
            '                                                                    <div class="area2"></div>\n' +
            '                                                                    <div class="area3"></div>\n' +
            '                                                                    <div class="area4"></div>\n' +
            '                                                                    <div class="area5"></div>\n' +
            '                                                                    <div class="area6"></div>\n' +
            '                                                                    <input class="layui-input" name="other_fees_area[detail_area]['+tr_num+']" placeholder="具体地址" value="">\n'+
            '                                                                </div>\n' +
            '                                                            </div>\n' +
            '                                                        </div>\n' +
            '                                                    </div>\n' +
            '                                                </div>\n' +
            '                                            </div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <div class="disf">\n' +
            '                                            <div class="fees_standard w100">\n' +
            '                                                <select name="fees_standard['+tr_num+']" lay-filter="fees_standard">\n' +
            '                                                    <option value="1">定额计价</option>\n' +
            '                                                    <option value="2">比例计价</option>\n' +
            '                                                </select>\n' +
            '                                            </div>\n' +
            '                                            <div class="fees_standard_div1">\n' +
            '                                                <div class="disf">\n' +
            '                                                    <div class="fees_standard_box w100">\n' +
            '                                                        <select name="fees_standard_currency['+tr_num+']" lay-search>\n';
        {volist name="type['currency']" id="vo"}
        html+='                                                            <option value="{$vo['id']}">{$vo['currency_symbol_standard']}</option>\n';
        {/volist}
        html+='                                                  </select>\n' +
            '                                                    </div>\n' +
            '                                                    <div class="fees_standard_box w120">\n' +
            '                                                        <input type="number" class="layui-input" name="fees_standard_price['+tr_num+']" placeholder="金额" value="">\n' +
            '                                                    </div>\n' +
            '                                                    <div class="fees_standard_box w100">\n' +
            '                                                        <select name="fees_standard_unit['+tr_num+']" lay-search>\n';
        {volist name="type['unit']" id="vo"}
        html+='                                                          <option value="{$vo['code_value']}">{$vo['code_name']}</option>\n';
        {/volist}
        html+='                                                  </select>\n' +
            '                                                    </div>\n' +
            '                                                </div>\n' +
            '                                            </div>\n' +
            '                                            <div class="fees_standard_div2" style="display: none;">\n' +
            '                                                <div class="disf">\n' +
            '                                                    <div class="fees_standard_box w100">\n' +
            '                                                        <select name="fees_standard_ratio['+tr_num+']" lay-filter="fees_standard_ratio">\n' +
            '                                                            <option value="1">计费基数</option>\n' +
            '                                                            <option value="2">计费比率</option>\n' +
            '                                                        </select>\n' +
            '                                                    </div>\n' +
            '                                                    <div class="fees_standard_ratio_div1 w100">\n' +
            '                                                        <input type="number" class="layui-input" name="fees_standard_ratio_price['+tr_num+']" placeholder="输入金额" value="">\n' +
            '                                                    </div>\n' +
            '                                                    <div class="fees_standard_ratio_div2 w120" style="display: none;">\n' +
            '                                                        <div class="disf">\n' +
            '                                                            <input type="number" class="layui-input" name="fees_standard_ratio_ratio['+tr_num+']" placeholder="输入比率" value="">\n' +
            '                                                            <div class="layui-input" style="width:35px;line-height: 38px;padding-left:0;">%</div>\n' +
            '                                                        </div>\n' +
            '                                                    </div>\n' +
            '                                                </div>\n' +
            '                                            </div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <div class="disf">\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="fees_del(this)">-</div>\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="fees_add(this)">+</div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                </tr>';
        $(t).parents(":eq(3)").append(html);
        form.render(null,'component-form-group');
    }

    function fees_del(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }
    //其他费用====================================================================================end

    //价格说明========================================================================================start
    //销售优惠-减免
    function reduction_add(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;
        let tr_num = $('.reduction_div').find('tbody').find('tr').length;
        let html = '<tr>\n' +
            '                                    <td>\n' +
            '                                        <select id="goodsmodel-preferential_blong" class="form-control chosen-select" name="reduction[preferential_blong]['+tr_num+']">\n' +
            '                                            <option value="1">卖家优惠</option>\n' +
            '                                            <option value="2">平台优惠</option>\n' +
            '                                            <option value="3">他方优惠</option>\n' +
            '                                        </select>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <select id="goodsmodel-reduction_type" class="form-control chosen-select" name="reduction[type]['+tr_num+']" lay-filter="reduction_type">\n' +
            '                                            <option value="">请选择规则</option>\n';
        {volist name="type['reduction_rule']" id="v"}
        html += '                                         <option value="{$v['id']}" data-name1="{$v['content'][0]}" data-name2="{$v['content'][2]}">{$v['name']}</option>\n';
        {/volist}
        html += '                                </select>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <select id="goodsmodel-reduction_strict" class="form-control chosen-select" name="reduction[strict]['+tr_num+']">\n' +
            '                                            <option value="1">单独</option>\n' +
            '                                            <option value="2">叠加</option>\n' +
            '                                        </select>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <div class="disf" style="width:100%;justify-content: center;">\n' +
            '                                            <div class="name1"></div>\n' +
            '                                            <input type="number" class="layui-input w100" name="reduction[price1]['+tr_num+']" placeholder="数值">\n' +
            '                                            <div class="name2"></div>\n' +
            '                                            <input type="number" class="layui-input w100" name="reduction[price2]['+tr_num+']" placeholder="数值">\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                    <td style="width: 140px;">\n' +
            '                                        <div class="disf">\n'+
            '                                             <div class="layui-btn layui-btn-md layui-btn-danger" onclick="reduction_del(this)">-</div>\n' +
            '                                             <div class="layui-btn layui-btn-md layui-btn-normal" onclick="reduction_add(this)">+</div>\n' +
            '                                        </div>\n'+
            '                                    </td>\n' +
            '                                </tr>';

        $(t).parents(":eq(3)").append(html);

        form.render(null,'component-form-group');
    }

    function reduction_del(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }

    //销售优惠-随赠
    function gift_add(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;
        let tr_num = $('.gift_div').find('tbody').find('tr').length;
        let html = '<tr>\n' +
            '                                    <td>\n' +
            '                                        <select id="goodsmodel-preferential_blong" class="form-control chosen-select" name="gift[preferential_blong]['+tr_num+']">\n' +
            '                                            <option value="1">卖家优惠</option>\n' +
            '                                            <option value="2">平台优惠</option>\n' +
            '                                            <option value="3">他方优惠</option>\n' +
            '                                        </select>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <select id="goodsmodel-gift_type" class="form-control chosen-select" name="gift[type]['+tr_num+']" lay-filter="gift_type">\n' +
            '                                            <option value="">请选择项目</option>\n' +
            '                                            <option value="1">积分</option>\n' +
            '                                            <option value="2">卡券</option>\n' +
            '                                            <option value="3">随赠</option>\n' +
            '                                        </select>\n' +
            '                                        <div class="points_coupon_div" style="display:none;">\n' +
            '                                            <div class="disf">\n' +
            '                                                <span class="gift_span">运营商：</span><select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[operaer]['+tr_num+']" lay-filter="gift_type">\n' +
            '                                                <option value="1">平台</option>\n' +
            '                                                <option value="2">卖家</option>\n' +
            '                                                <option value="3">他方</option>\n' +
            '                                            </select>\n' +
            '                                            </div>\n' +
            '                                        </div>\n' +
            '                                        <div class="points_div" style="display: none;">\n' +
            '                                            <div class="disf">\n' +
            '                                                <span class="gift_span">按：</span><select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[points_type]['+tr_num+']"  lay-filter="points_type">\n' +
            '                                                <option value="1">订单/次</option>\n' +
            '                                                <option value="2">金额</option>\n' +
            '                                            </select>\n' +
            '                                            </div>\n' +
            '                                            <div class="disf points_money" style="display: none;">\n' +
            '                                                <input type="number" class="layui-input" name="gift[points_money]['+tr_num+']" placeholder="金额">\n' +
            '                                            </div>\n' +
            '                                            <div class="disf">\n' +
            '                                                <span class="gift_span">送：</span><input type="number" class="layui-input" name="gift[points_send]['+tr_num+']" placeholder="赠送值">\n' +
            '                                            </div>\n' +
            '                                        </div>\n' +
            '                                        <div class="coupon_div" style="display: none;">\n' +
            '                                            <div class="disf">\n' +
            '                                                <span class="gift_span">面值：</span>\n' +
            '                                                <input type="number" class="layui-input" name="gift[coupon_money]['+tr_num+']" placeholder="金额">\n' +
            '                                                <input type="number" class="layui-input" name="gift[coupon_num]['+tr_num+']" placeholder="数量">\n' +
            '                                            </div>\n' +
            '                                        </div>\n' +
            '                                        <div class="accgift_div" style="display: none;">\n' +
            '                                            <div class="disf">\n' +
            '                                                <span class="gift_span">类别：</span><select id="goodsmodel-gift_operaer" class="form-control chosen-select" name="gift[accgift_type]['+tr_num+']" lay-filter="accgift_type">\n' +
            '                                                <option value="1">虚拟</option>\n' +
            '                                                <option value="2">服务</option>\n' +
            '                                                <option value="3">实物</option>\n' +
            '                                            </select>\n' +
            '                                                <input type="text" class="layui-input" name="gift[accgift_content]['+tr_num+']" placeholder="内容">\n' +
            '                                                <input type="number" class="layui-input" name="gift[accgift_num]['+tr_num+']" placeholder="数量">\n' +
            '                                            </div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <select id="goodsmodel-gift_strict" class="form-control chosen-select" name="gift[strict]['+tr_num+']">\n' +
            '                                            <option value="1">单独</option>\n' +
            '                                            <option value="2">叠加</option>\n' +
            '                                        </select>\n' +
            '                                    </td>\n' +
            '                                    <td style="width:140px;">\n' +
            '                                        <div class="disf">\n'+
            '                                             <div class="layui-btn layui-btn-md layui-btn-danger" onclick="gift_del(this)">-</div>\n' +
            '                                             <div class="layui-btn layui-btn-md layui-btn-normal" onclick="gift_add(this)">+</div>\n' +
            '                                        </div>\n'+
            '                                    </td>\n' +
            '                                </tr>';

        $(t).parents(":eq(3)").append(html);
        form.render(null,'component-form-group');
    }

    function gift_del(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }

    function noinclude_add(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;
        let tr_num = $('.noinclude_table').find('tbody').find('tr').length;
        let html = '<tr>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" id="noinclude-name" class="layui-input" name="noinclude[name]['+tr_num+']" data-anchor="费用名称" placeholder="费用名称">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" id="noinclude-desc" class="layui-input" name="noinclude[desc]['+tr_num+']" data-anchor="摘要描述" placeholder="摘要描述">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" id="noinclude-price" class="layui-input" name="noinclude[price]['+tr_num+']" data-anchor="计量单价" placeholder="计量单价">\n' +
            '                                    </td>\n' +
            '                                    <td style="width: 140px;">\n' +
            '                                        <div class="disf">\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="noinclude_del(this)">-</div>\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="noinclude_add(this)">+</div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                </tr>';

        $(t).parents(":eq(3)").append(html);
        form.render(null,'component-form-group');
    }

    function noinclude_del(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }

    function potential_add(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;
        let tr_num = $('.potential_table').find('tbody').find('tr').length;
        let html = '<tr>\n' +
            '                                    <td>\n' +
            '                                        <select id="noinclude-currency" class="form-control chosen-select" name="potential[currency]['+tr_num+']">\n';
        {volist name="type['currency']" id="v"}
        html += '                                          <option value="{$v['id']}" {if $v['id'] == 5} selected {/if}>{$v['currency_symbol_standard']}</option>\n';
        {/volist}
        html += '                                </select>\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" id="noinclude-name" class="layui-input" name="potential[name]['+tr_num+']" data-anchor="费用名称" placeholder="费用名称">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" id="noinclude-desc" class="layui-input" name="potential[desc]['+tr_num+']" data-anchor="摘要描述" placeholder="摘要描述">\n' +
            '                                    </td>\n' +
            '                                    <td>\n' +
            '                                        <input type="text" id="noinclude-price" class="layui-input" name="potential[price]['+tr_num+']" data-anchor="计量单价" placeholder="计量单价">\n' +
            '                                    </td>\n' +
            '                                    <td style="width: 140px;">\n' +
            '                                        <div class="disf">\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-danger" onclick="potential_del(this)">-</div>\n' +
            '                                            <div class="layui-btn layui-btn-md layui-btn-normal" onclick="potential_add(this)">+</div>\n' +
            '                                        </div>\n' +
            '                                    </td>\n' +
            '                                </tr>';

        $(t).parents(":eq(3)").append(html);
        form.render(null,'component-form-group');
    }

    function potential_del(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            $(t).parents(":eq(2)").remove();
            layer.close(close_idx);
        }, function(){

        });
    }
    //价格说明========================================================================================end

    //商品详情========================================================================================start
    function spec_add(t){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let tr_num = $('.spec_table').find('tbody').find('.diyparam_tr').length;
        let html = '<tr class="diyparam_tr">\n' +
            '                                        <td>\n' +
            '                                            <input type="text" class="layui-input" name="spec_name['+tr_num+']" placeholder="参数名称">\n' +
            '                                        </td>\n' +
            '                                        <td>\n' +
            '                                            <input type="text" class="layui-input" name="spec_desc['+tr_num+']" placeholder="参数描述">\n' +
            '                                        </td>\n' +
            '                                        <td>\n' +
            '                                            <div class="disf">\n' +
            '                                                <div class="layui-btn layui-btn-md layui-btn-danger" onclick="spec_del(this)">-</div>\n' +
            '                                                <div class="layui-btn layui-btn-md layui-btn-normal" onclick="spec_add(this)">+</div>\n' +
            '                                            </div>\n' +
            '                                        </td>\n' +
            '                                    </tr>';

        $(t).parents(":eq(3)").append(html);
        form.render(null,'component-form-group');
    }

    function spec_del(t,type){
        var $ = layui.$
            , layer = layui.layer
            , form = layui.form;

        let close_idx = layer.confirm('确认要删除？', {
            btn: ['删除','取消']
        }, function(){
            if(type==0){
                //默认项目第0个
                if($(t).parents(":eq(3)").find('tr').length==1){
                    $(t).parents(":eq(2)").remove();
                }
                else{
                    $(t).parents(":eq(2)").find('td').eq(1).remove();
                    $(t).parents(":eq(2)").find('td').eq(1).remove();
                    $(t).parents(":eq(2)").find('td').eq(1).remove();
                }
            }
            else{
                if($(t).parents(":eq(3)").find('tr').length==2 && $(t).parents(":eq(3)").find('tr').eq(0).find('td').length==1){
                    $(t).parents(":eq(3)").html("");
                }else{
                    $(t).parents(":eq(2)").remove();
                }
            }

            layer.close(close_idx);
        }, function(){

        });
    }
    //商品详情========================================================================================end
</script>
</html>